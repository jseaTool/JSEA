AbstractLineDecoration line decoration java 2 2 0 0 2006 2006 01 01 14 14 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org ??? ??? package org org jhotdraw jhotdraw draw draw import java io io import java awt awt import java awt awt geom geom import org org jhotdraw jhotdraw geom geom Geom geom import org org jhotdraw jhotdraw util util import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key An an standard standard implementation of of a a line line decoration decoration It it draws draw a a shape shape which which is is rotated rotate and and moved move to to the the end end of of the the line line The the shape shape is is scaled scale by by the the stroke stroke width width author author Werner wern Randelshofer randelshof version 2 2 0 0 2006 2006 01 01 14 14 Changed change to to support support double precison coordinates coordinate br 1 1 0 0 2003 2003 12 12 01 01 Derived derive from from JHotDraw jhotdraw 5 5 4b1 4b1 public abstract class AbstractLineDecoration line decoration implements LineDecoration line decoration If this is is true the the decoration decoration is is filled fill private boolean isFilled is fill If this is is true the the decoration decoration is is stroked stroke private boolean isStroked is stroke If this is is true the the stroke stroke color color is is used use to to fill fill the the decoration decoration private boolean isSolid is solid Constructs construct an an arrow arrow tip tip with with the the given given angle angle and and radius radius public AbstractLineDecoration line decoration boolean isFilled is fill boolean isStroked is stroke boolean isSolid is solid this isFilled is fill isFilled is fill this isStroked is stroke isStroked is stroke this isSolid is solid isSolid is solid protected boolean isFilled is fill return isFilled is fill protected boolean isStroked is stroke return isStroked is stroke protected boolean isSolid is solid return isSolid is solid Draws draw the the arrow arrow tip tip in in the the direction direction specified specify by by the the given given two two Points point template template method public void draw draw Graphics2D graphics2 d g g Figure figure f f Point2D point2 d Double p1 p1 Point2D point2 d Double p2 p2 GeneralPath general path path path getTransformedDecoratorPath get transform decorator path f f p1 p1 p2 p2 Color color color color if isFilled is fill if isSolid is solid color color STROKE s t r o k e COLOR c o l o r get get f f else color color FILL f i l l COLOR c o l o r get get f f if color color null g g setColor set color color color g g fill fill path path if isStroked is stroke color color STROKE s t r o k e COLOR c o l o r get get f f if color color null g g setColor set color color color g g setStroke set stroke AttributeKeys attribute key getStroke get stroke f f g g draw draw path path Returns the the drawing drawing bounds bound of of the the decorator decorator public Rectangle2D rectangle2 d Double getDrawBounds get draw bound Figure figure f f Point2D point2 d Double p1 p1 Point2D point2 d Double p2 p2 GeneralPath general path path path getTransformedDecoratorPath get transform decorator path f f p1 p1 p2 p2 Rectangle2D rectangle2 d b b path path getBounds2D get bounds2 d Rectangle2D rectangle2 d Double bounds bound new Rectangle2D rectangle2 d Double b b getX get x b b getY get y b b getWidth get width b b getHeight get height if isStroked is stroke double strokeWidth stroke width STROKE s t r o k e WIDTH w t h get get f f int strokeJoin stroke join STROKE s t r o k e JOIN j o i n get get f f float miterLimit miter limit float STROKE s t r o k e MITER m i t e r LIMIT l i m i t FACTOR f a c t o r get get f f strokeWidth stroke width int grow grow if strokeJoin stroke join BasicStroke basic stroke JOIN j o i n MITER m i t e r grow grow int 1 1 + + strokeWidth stroke width 2 2 miterLimit miter limit else grow grow int 1 1 + + strokeWidth stroke width 2 2 Geom geom grow grow bounds bound grow grow grow grow return bounds bound public double getDecorationRadius get decoration radius Figure figure f f double strokeWidth stroke width STROKE s t r o k e WIDTH w t h get get f f double scaleFactor scale factor if strokeWidth stroke width 1f 1f scaleFactor scale factor 1d 1d + + strokeWidth stroke width 1d 1d 2d 2d else scaleFactor scale factor 1d 1d return getDecoratorPathRadius get decorator path radius f f scaleFactor scale factor private GeneralPath general path getTransformedDecoratorPath get transform decorator path Figure figure f f Point2D point2 d Double p1 p1 Point2D point2 d Double p2 p2 GeneralPath general path path path getDecoratorPath get decorator path f f double strokeWidth stroke width STROKE s t r o k e WIDTH w t h get get f f AffineTransform affine transform transform transform new AffineTransform affine transform transform transform translate translate p1 p1 x x p1 p1 y y transform transform rotate rotate Math math atan2 atan2 p1 p1 x x p2 p2 x x p2 p2 y y p1 p1 y y transform transform rotate rotate Math math PI p i 2 2 if strokeWidth stroke width 1f 1f transform transform scale scale 1d 1d + + strokeWidth stroke width 1d 1d 2d 2d 1d 1d + + strokeWidth stroke width 1d 1d 2d 2d path path transform transform transform transform return path path protected void setFilled set fill boolean b b isFilled is fill b b protected void setStroked set stroke boolean b b isStroked is stroke b b protected void setSolid set solid boolean b b isSolid is solid b b Hook hook method to to calculates calculate the the path path of of the the decorator decorator protected abstract GeneralPath general path getDecoratorPath get decorator path Figure figure f f Hook hook method to to calculates calculate the the radius radius of of the the decorator decorator path path protected abstract double getDecoratorPathRadius get decorator path radius Figure figure f f 