AbstractApplication application java 1 1 1 1 2006 2006 05 05 01 01 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw app app import java awt awt import org org jhotdraw jhotdraw beans bean import org org jhotdraw jhotdraw util util import java util util import java util util prefs pref import javax javax swing swing import java io io AbstractApplication application author author Werner wern Randelshofer randelshof version 1 1 1 1 2006 2006 05 05 01 01 System exit exit 0 0 explicitly explicitly in in method stop stop br 1 1 0 0 October october 4 4 2005 2005 Created create public abstract class AbstractApplication application extends AbstractBean bean implements Application application private LinkedList link list projects project new LinkedList link list private Collection collection unmodifiableDocuments unmodifiable document private boolean isEnabled is enable true protected ResourceBundleUtil resource bundle util labels label private ApplicationModel application model model model private LinkedList link list File recentFiles recent new LinkedList link list private final static int maxRecentFilesCount max recent count 10 10 private Preferences preference prefs pref Creates create a a new instance instance public AbstractApplication application public void init init prefs pref Preferences preference userNodeForPackage user node getModel get model null ? ? getClass get getModel get model getClass get int count count prefs pref getInt get recentFileCount recent count 0 0 for int i i 0 0 i i count count i++ i++ String path path prefs pref get get recentFile recent +i +i null if path path null recentFiles recent add add new File path path if model model null model model initApplication init application this public void start start Project project p p createProject create project add add p p show show p p public final Project project createProject create project Project project p p basicCreateProject basic create project p p init init if getModel get model null getModel get model initProject init project this p p initProjectActions init project action p p return p p public void setModel set model ApplicationModel application model newValue value ApplicationModel application model oldValue old value model model model model newValue value firePropertyChange fire property change model model oldValue old value newValue value public ApplicationModel application model getModel get model return model model protected Project project basicCreateProject basic create project return model model createProject create project public String getName get name return model model getName get name public String getVersion get return model model getVersion get public String getCopyright get copyright return model model getCopyright get copyright protected abstract void initProjectActions init project action Project project p p public void stop stop for Project project p p new LinkedList link list Project project projects project dispose dispose p p System exit exit 0 0 public void remove remove Project project p p hide hide p p int oldCount old count projects project size size projects project remove remove p p p p setApplication set application null firePropertyChange fire property change projectCount project count oldCount old count projects project size size public void add add Project project p p if p p getApplication get application this int oldCount old count projects project size size projects project add add p p p p setApplication set application this firePropertyChange fire property change projectCount project count oldCount old count projects project size size public void dispose dispose Project project p p remove remove p p p p dispose dispose public Collection collection Project project projects project if unmodifiableDocuments unmodifiable document null unmodifiableDocuments unmodifiable document Collections collection unmodifiableCollection unmodifiable collection projects project return unmodifiableDocuments unmodifiable document public boolean isEnabled is enable return isEnabled is enable public void setEnabled set enable boolean newValue value boolean oldValue old value isEnabled is enable isEnabled is enable newValue value firePropertyChange fire property change enabled enable oldValue old value newValue value public Container container createContainer create container return new JFrame j frame public void launch launch String args configure configure args SwingUtilities swing utility invokeLater late new Runnable runnable public void run run init init start start protected void initLabels init label labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw app app Labels label public void configure configure String args public java util util List list File recentFiles recent return Collections collection unmodifiableList unmodifiable list recentFiles recent public void clearRecentFiles clear recent java util util List list File oldValue old value java util util List list File recentFiles recent clone clone recentFiles recent clear clear prefs pref putInt put recentFileCount recent count recentFiles recent size size firePropertyChange fire property change recentFiles recent Collections collection unmodifiableList unmodifiable list oldValue old value Collections collection unmodifiableList unmodifiable list recentFiles recent public void addRecentFile add recent File file java util util List list File oldValue old value java util util List list File recentFiles recent clone clone if recentFiles recent contains contain file recentFiles recent remove remove file recentFiles recent addFirst add first file if recentFiles recent size size maxRecentFilesCount max recent count recentFiles recent removeLast remove last prefs pref putInt put recentFileCount recent count recentFiles recent size size int i i 0 0 for File f f recentFiles recent prefs pref put put recentFile recent +i +i f f getPath get path i++ i++ firePropertyChange fire property change recentFiles recent oldValue old value 0 0 firePropertyChange fire property change recentFiles recent Collections collection unmodifiableList unmodifiable list oldValue old value Collections collection unmodifiableList unmodifiable list recentFiles recent 