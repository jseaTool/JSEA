DefaultDOMFactory dom factory java 1 1 0 0 1 1 2006 2006 07 07 05 05 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw xml xml import java util util DefaultDOMFactory dom factory author author Werner wern Randelshofer randelshof version 1 1 0 0 1 1 2006 2006 07 07 05 05 Improved improve error reporting reporting br 1 1 0 0 June june 10 10 2006 2006 Created create public class DefaultDOMFactory dom factory implements DOMFactory dom factory private final static HashMap hash map Class String classToNameMap to name map new HashMap hash map Class String private final static HashMap hash map String Object nameToPrototypeMap name to prototype map new HashMap hash map String Object private final static HashMap hash map Class String enumClassToNameMap to name map new HashMap hash map Class String private final static HashMap hash map String Class nameToEnumClassMap name to map new HashMap hash map String Class private final static HashMap hash map Enum String enumToValueMap to value map new HashMap hash map Enum String private final static HashMap hash map String Set set Enum valueToEnumMap value to map new HashMap hash map String Set set Enum Creates create a a new instance instance public DefaultDOMFactory dom factory Adds add a a DOMStorable dom storable class to to the the DOMFactory dom factory public void addStorableClass add storable String name name Class c c nameToPrototypeMap name to prototype map put put name name c c classToNameMap to name map put put c c name name Adds add a a DOMStorable dom storable prototype prototype to to the the DOMFactory dom factory public void addStorable add storable String name name DOMStorable dom storable prototype prototype nameToPrototypeMap name to prototype map put put name name prototype prototype classToNameMap to name map put put prototype prototype getClass get name name Adds add an an Enum class to to the the DOMFactory dom factory public void addEnumClass add String name name Class c c enumClassToNameMap to name map put put c c name name nameToEnumClassMap name to map put put name name c c Adds add an an Enum value value to to the the DOMFactory dom factory public void addEnum add String value value Enum e e enumToValueMap to value map put put e e value value Set set Enum enums if valueToEnumMap value to map containsKey contain key value value enums valueToEnumMap value to map get get value value else enums new HashSet hash set Enum valueToEnumMap value to map put put value value enums enums add add e e Creates create a a DOMStorable dom storable object public Object create create String name name Object o o nameToPrototypeMap name to prototype map get get name name if o o null throw new IllegalArgumentException illegal argument Storable storable name name not not known know to to factory factory +name +name if o o instanceof Class try return Class o o newInstance instance catch Exception e e IllegalArgumentException illegal argument error new IllegalArgumentException illegal argument Storable storable class not not instantiable instantiable by by factory factory +name +name error initCause init cause e e throw error else try return o o getClass get getMethod get clone clone Class null invoke o o Object null catch Exception e e IllegalArgumentException illegal argument error new IllegalArgumentException illegal argument Storable storable prototype prototype not not cloneable cloneable by by factory factory Name name +name +name error initCause init cause e e throw error public String getName get name DOMStorable dom storable o o String name name classToNameMap to name map get get o o getClass get if name name null throw new IllegalArgumentException illegal argument Storable storable class not not known know to to factory factory Storable storable +o+ +o+ Factory factory +this +thi getClass get return name name public String getEnumName get name Enum e e String name name enumClassToNameMap to name map get get e e getClass get if name name null throw new IllegalArgumentException illegal argument Enum class not not known know to to factory factory +e +e getClass get return name name public String getEnumValue get value Enum e e return enumToValueMap to value map containsKey contain key e e ? ? enumToValueMap to value map get get e e e e toString to public Enum createEnum create String name name String value value Class enumClass nameToEnumClassMap name to map get get name name if enumClass null throw new IllegalArgumentException illegal argument Enum name name not not known know to to factory factory +name +name Set set Enum enums valueToEnumMap value to map get get value value if enums null return Enum valueOf value of enumClass value value for Enum e e enums if e e getClass get enumClass return e e throw new IllegalArgumentException illegal argument Enum value value not not known know to to factory factory +value +value 