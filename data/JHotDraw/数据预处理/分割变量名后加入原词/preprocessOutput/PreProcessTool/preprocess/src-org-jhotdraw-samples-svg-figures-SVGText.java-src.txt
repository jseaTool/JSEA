SVGText s v g text java 1 1 0 0 July july 8 8 2006 2006 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw samples sample svg svg figures figure import java awt awt import java awt awt font font import java awt awt geom geom import java io io import org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw geom geom Geom geom import org org jhotdraw jhotdraw samples sample svg svg import org org jhotdraw jhotdraw xml xml import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key SVGText s v g text p p FIXME f i x m e Add add support support for transforms transform XXX x x x At at least least on on Mac mac OS o s X x Always alway draw draw text text using using TextLayout text layout getOutline get outline because because outline outline layout layout does doe not not match match with with TextLayout text layout draw draw output output Cache cache outline outline to to improve improve performance performance author author Werner wern Randelshofer randelshof version 1 1 0 0 July july 8 8 2006 2006 Created create public class SVGText s v g text extends TextFigure text figure implements SVGFigure s v g figure public enum TextAnchor text anchor START s t a r t MIDDLE m d l e END e n d public final static AttributeKey attribute key TextAnchor text anchor TEXT t e x t ANCHOR a n c h o r new AttributeKey attribute key TextAnchor text anchor textAnchor text anchor TextAnchor text anchor START s t a r t false Creates create a a new instance instance public SVGText s v g text SVGUtil s v g util setDefaults set this Override override protected void drawStroke draw stroke Graphics2D graphics2 d g g if getText get text null || || isEditable is editable Rectangle2D rectangle2 d Double bounds bound getBounds get bound TextLayout text layout layout layout getTextLayout get text layout AffineTransform affine transform tx tx new AffineTransform affine transform tx tx translate translate origin origin x x origin origin y y + + layout layout getAscent get ascent Shape shape outline outline layout layout getOutline get outline tx tx g g draw draw outline outline Override override protected void drawFill draw fill Graphics2D graphics2 d g g if getText get text null || || isEditable is editable TextLayout text layout layout layout getTextLayout get text layout layout layout draw draw g g float origin origin x x float origin origin y y + + layout layout getAscent get ascent Override override protected void drawText draw text java awt awt Graphics2D graphics2 d g g Override override public void write write DOMOutput dom output out out out out addAttribute add attribute x x origin origin x x out out addAttribute add attribute y y origin origin y y out out addText add text getText get text protected void writeAttributes write attribute DOMOutput dom output out out throws IOException i o SVGUtil s v g util writeAttributes write attribute this out out Override override public void read read DOMInput dom input in in throws IOException i o origin origin x x SVGUtil s v g util getDimension get dimension in in x x origin origin y y SVGUtil s v g util getDimension get dimension in in y y setText set text in in getText get text readAttributes read attribute in in AffineTransform affine transform tx tx SVGUtil s v g util getTransform get transform in in transform transform basicTransform basic transform tx tx Rectangle2D rectangle2 d Double r r getBounds get bound switch TEXT t e x t ANCHOR a n c h o r get get this case START s t a r t break case MIDDLE m d l e origin origin x x r r width width 2d 2d break case END e n d origin origin x x r r width width break origin origin y y FONT f o n t SIZE s i z e get get this protected void readAttributes read attribute DOMInput dom input in in throws IOException i o SVGUtil s v g util readAttributes read attribute this in in public Color color getTextColor get text color return FILL f i l l COLOR c o l o r get get this public Color color getFillColor get fill color return Color color white white public boolean isEmpty is empty return getText get text null || || getText get text length length 0 0 