TransformEdit transform edit java 2 2 0 0 2006 2006 01 01 14 14 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org ??? ??? package org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw util util import javax javax swing swing undo undo import java awt awt geom geom import java util util TransformEdit transform edit p p FIXME f i x m e When when we we do group group moves move or or moves move of of a a composite composite figure figure we we fail fail to to coallesce coallesce the the TransformEdit transform edit events event This may may exhaust exhaust memory memory author author Werner wern Randelshofer randelshof version 2 2 0 0 2006 2006 01 01 14 14 Changed change to to support support double precision precision coordinates coordinate br 1 1 0 0 2003 2003 12 12 01 01 Derived derive from from JHotDraw jhotdraw 5 5 4b1 4b1 public class TransformEdit transform edit extends AbstractUndoableEdit undoable edit Implementation note note Owner owner has ha package access access because because it it is is accessed access by by CompositeMoveEdit composite move edit private Collection collection Figure figure figures figure private AffineTransform affine transform tx tx Creates create a a new instance instance public TransformEdit transform edit Figure figure figure figure AffineTransform affine transform tx tx figures figure new LinkedList link list Figure figure LinkedList link list Figure figure figures figure add add figure figure this tx tx AffineTransform affine transform tx tx clone clone public TransformEdit transform edit Collection collection Figure figure figures figure AffineTransform affine transform tx tx this figures figure figures figure this tx tx AffineTransform affine transform tx tx clone clone public String getPresentationName get presentation name ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label Locale locale getDefault get return labels label getString get transformFigure transform figure public boolean addEdit add edit UndoableEdit undoable edit anEdit an edit if anEdit an edit instanceof TransformEdit transform edit TransformEdit transform edit that that TransformEdit transform edit anEdit an edit if that that figures figure this figures figure this tx tx concatenate concatenate that that tx tx that that die die return true return false public boolean replaceEdit replace edit UndoableEdit undoable edit anEdit an edit if anEdit an edit instanceof TransformEdit transform edit TransformEdit transform edit that that TransformEdit transform edit anEdit an edit if that that figures figure this figures figure this tx tx preConcatenate pre concatenate that that tx tx that that die die return true return false public void redo redo throws CannotRedoException cannot redo super redo redo for Figure figure f f figures figure f f willChange will change f f basicTransform basic transform tx tx f f changed change public void undo undo throws CannotUndoException cannot undo super undo undo try AffineTransform affine transform inverse inverse tx tx createInverse create inverse for Figure figure f f figures figure f f willChange will change f f basicTransform basic transform inverse inverse f f changed change catch NoninvertibleTransformException noninvertible transform e e e e printStackTrace print stack trace public String toString to return getClass get getName get name + + +hashCode +hash + + tx tx +tx +tx 