NodeFigure node figure java 1 1 0 0 July july 4 4 2006 2006 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org Original original code copyright copyright JHotDraw jhotdraw Project project JHotdraw j hotdraw a a GUI g u i framework framework for technical technical drawings drawing http http www www jhotdraw jhotdraw org org http http jhotdraw jhotdraw sourceforge sourceforge net net Copyright copyright c c by by the the original original author author s s and and all all contributors contributor License license Lesser less GNU g n u Public License license LGPL l g p l http http www www opensource opensource org org licenses license lgpl lgpl license license html html package org org jhotdraw jhotdraw samples sample net net figures figure import java awt awt import java awt awt geom geom import java util util import org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw geom geom import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key import org org jhotdraw jhotdraw util util NodeFigure node figure author author Werner wern Randelshofer randelshof version 1 1 0 0 July july 4 4 2006 2006 Created create public class NodeFigure node figure extends TextFigure text figure private LinkedList link list AbstractConnector connector connectors connector private static LocatorConnector locator connector north north private static LocatorConnector locator connector south south private static LocatorConnector locator connector east east private static LocatorConnector locator connector west west Creates create a a new instance instance public NodeFigure node figure RectangleFigure rectangle figure rf rf new RectangleFigure rectangle figure setDecorator set decorator rf rf createConnectors create connector setDrawDecoratorFirst set draw decorator first true DECORATOR d e c o r a t o r INSETS i n s e t s set set this new Insets2DDouble insets2 d 6 6 10 10 6 6 10 10 ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw samples sample net net Labels label setText set text labels label getString get nodeDefaultName node name private void createConnectors create connector connectors connector new LinkedList link list AbstractConnector connector connectors connector add add new LocatorConnector locator connector this new RelativeLocator relative locator 0 0 5 5 0 0 connectors connector add add new LocatorConnector locator connector this new RelativeLocator relative locator 0 0 5 5 1 1 connectors connector add add new LocatorConnector locator connector this new RelativeLocator relative locator 1 1 0 0 5 5 connectors connector add add new LocatorConnector locator connector this new RelativeLocator relative locator 0 0 0 0 5 5 for AbstractConnector connector c c connectors connector c c setVisible set visible true Override override public Collection collection Handle handle createHandles create handle int detailLevel detail level java util util List list Handle handle handles handle new LinkedList link list Handle handle if detailLevel detail level 0 0 handles handle add add new MoveHandle move handle this RelativeLocator relative locator northWest north west handles handle add add new MoveHandle move handle this RelativeLocator relative locator northEast north east handles handle add add new MoveHandle move handle this RelativeLocator relative locator southWest south west handles handle add add new MoveHandle move handle this RelativeLocator relative locator southEast south east handles handle add add new ConnectionHandle connection handle this RelativeLocator relative locator north north new LineConnectionFigure line connection figure handles handle add add new ConnectionHandle connection handle this RelativeLocator relative locator east east new LineConnectionFigure line connection figure handles handle add add new ConnectionHandle connection handle this RelativeLocator relative locator south south new LineConnectionFigure line connection figure handles handle add add new ConnectionHandle connection handle this RelativeLocator relative locator west west new LineConnectionFigure line connection figure return handles handle Override override public Rectangle2D rectangle2 d Double getFigureDrawBounds get figure draw bound Rectangle2D rectangle2 d Double b b super getFigureDrawBounds get figure draw bound Grow grow for connectors connector Geom geom grow grow b b 10d 10d 10d 10d return b b Override override public Connector connector findConnector find connector Point2D point2 d Double p p ConnectionFigure connection figure figure figure return closest close connector connector double min min Double MAX m a x VALUE v a l u e Connector connector closest close null for Connector connector c c connectors connector Point2D point2 d Double p2 p2 Geom geom center center c c getBounds get bound double d d Geom geom length2 length2 p p x x p p y y p2 p2 x x p2 p2 y y if d d min min min min d d closest close c c return closest close Override override public Connector connector findCompatibleConnector find compatible connector Connector connector c c boolean isStart is start return connectors connector getFirst get first public NodeFigure node figure clone clone NodeFigure node figure that that NodeFigure node figure super clone clone that that createConnectors create connector return that that Override override protected void drawConnectors draw connector Graphics2D graphics2 d g g for Connector connector c c connectors connector c c draw draw g g Override override public int getLayer get layer return 1 1 stay stay below below ConnectionFigures connection figure public void setAttribute set attribute AttributeKey attribute key key key Object newValue value super setAttribute set attribute key key newValue value if getDecorator get decorator null getDecorator get decorator setAttribute set attribute key key newValue value 