CompositeModel composite model java 1 1 1 1 2006 2006 06 06 20 20 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw undo undo import javax javax swing swing undo undo import java util util This is is basically basically the the same same like like javax javax swing swing undo undo CompoundEdit compound edit but but it it has ha a a slightly slightly different different behaviour behaviour The the compound compound edit edit ends end when when it it is is added add to to itself itself This way way it it can can be be fired fire two two times time to to an an UndoManager undo manager The the first first time time when when a a sequence sequence of of compuondable compuondable edits edit starts start end end the the last last time time when when the the sequence sequence is is over over p p For example example pre pre fire fire CompositeEdit composite edit at at start start of of sequence sequence CompositeEdit composite edit ce ce new CompositeEdit composite edit fireUndoableEditEvent fire undoable edit event ce ce fire fire edits edit which which shall shall compounded compound here here fire fire CompositeEdit composite edit at at end end of of sequence sequence again again to to end end it it fireUndoableEditEvent fire undoable edit event ce ce pre pre author author Werner wern Randelshofer randelshof version 1 1 1 1 2006 2006 06 06 20 20 Method setSignificant set significant added add br 1 1 0 0 2001 2001 01 01 01 01 Created create public class CompositeEdit composite edit extends CompoundEdit compound edit private String presentationName presentation name private boolean isSignificant is significant private boolean isVerbose is verbose public void setVerbose set verbose boolean b b isVerbose is verbose b b Creates create new CompositeEdit composite edit Which which uses us CompoundEdit compound edit getPresentatioName get presentatio name see see javax javax swing swing undo undo CompoundEdit compound edit getPresentationName get presentation name public CompositeEdit composite edit isSignificant is significant true Creates create new CompositeEdit composite edit Which which uses us CompoundEdit compound edit getPresentatioName get presentatio name see see javax javax swing swing undo undo CompoundEdit compound edit getPresentationName get presentation name public CompositeEdit composite edit boolean isSignificant is significant this isSignificant is significant isSignificant is significant Creates create new CompositeEdit composite edit Which which uses us the the given given presentation presentation name name If the the presentation presentation name name is is null then then CompoundEdit compound edit getPresentatioName get presentatio name is is used use see see javax javax swing swing undo undo CompoundEdit compound edit getPresentationName get presentation name public CompositeEdit composite edit String presentationName presentation name this presentationName presentation name presentationName presentation name isSignificant is significant true Creates create new CompositeEdit composite edit Which which uses us the the given given presentation presentation name name If the the presentation presentation name name is is null then then CompoundEdit compound edit getPresentatioName get presentatio name is is used use see see javax javax swing swing undo undo CompoundEdit compound edit getPresentationName get presentation name public CompositeEdit composite edit String presentationName presentation name boolean isSignificant is significant this presentationName presentation name presentationName presentation name this isSignificant is significant isSignificant is significant Returns the the presentation presentation name name If the the presentation presentation name name is is null then then CompoundEdit compound edit getPresentatioName get presentatio name is is returned see see javax javax swing swing undo undo CompoundEdit compound edit getPresentationName get presentation name public String getPresentationName get presentation name return presentationName presentation name null ? ? presentationName presentation name super getPresentationName get presentation name Returns the the undo undo presentation presentation name name If the the presentation presentation name name is is null then then CompoundEdit compound edit getUndoPresentationName get undo presentation name is is returned see see javax javax swing swing undo undo CompoundEdit compound edit getUndoPresentationName get undo presentation name public String getUndoPresentationName get undo presentation name return presentationName presentation name null ? ? UndoRedoManager undo redo manager getLabels get label getString get undo undo + + +presentationName +presentation name super getUndoPresentationName get undo presentation name Returns the the redo redo presentation presentation name name If the the presentation presentation name name is is null then then CompoundEdit compound edit getRedoPresentationName get redo presentation name is is returned see see javax javax swing swing undo undo CompoundEdit compound edit getRedoPresentationName get redo presentation name public String getRedoPresentationName get redo presentation name return presentationName presentation name null ? ? UndoRedoManager undo redo manager getLabels get label getString get redo redo + + +presentationName +presentation name super getRedoPresentationName get redo presentation name If this edit edit is is inProgress in progress accepts accept anEdit an edit and and returns true p p The the last last edit edit added add to to this CompositeEdit composite edit is is given given a a chance chance to to addEdit add edit anEdit an edit If it it refuses refuse returns false anEdit an edit is is given given a a chance chance to to replaceEdit replace edit the the last last edit edit If anEdit an edit returns false here here it it is is added add to to edits edit p p p p If the the CompositeEdit composite edit is is added add to to itself itself then then method end end is is called call and and true is is returned p p public boolean addEdit add edit UndoableEdit undoable edit anEdit an edit if anEdit an edit this end end return true else if isInProgress is in progress anEdit an edit instanceof CompositeEdit composite edit return true else return super addEdit add edit anEdit an edit Returns false if this edit edit is is insignificant insignificant for example example one one that that maintains maintain the the user user s s selection selection but but does doe not not change change any any model model state state public boolean isSignificant is significant return isSignificant is significant ? ? super isSignificant is significant false return isSignificant is significant public void setSignificant set significant boolean newValue value isSignificant is significant newValue value 