JSheet j sheet java 2 2 0 0 2006 2006 07 07 02 02 Copyright copyright c c 2005 2005 2006 2006 Werner wern Randelshofer randelshof Staldenmattweg staldenmattweg 2 2 Immensee immensee CH c h 6405 6405 Switzerland switzerland All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of Werner wern Randelshofer randelshof Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with Werner wern Randelshofer randelshof package org org jhotdraw jhotdraw gui gui import java awt awt import java awt awt event event import java awt awt peer peer import java beans bean import java lang lang reflect reflect import javax javax swing swing import javax javax swing swing event event import javax javax swing swing plaf plaf import org org jhotdraw jhotdraw gui gui event event import org org jhotdraw jhotdraw util util JSheet j sheet is is a a document document modal modal dialog dialog which which is is displayed display below below the the title title bar bar of of a a JFrame j frame p p A a JSheet j sheet blocks block input input on on its it owner owner window window while it it is is visible visible p p Unlike unlike application application modal modal dialogs dialog the the show show method of of a a JSheet j sheet does doe return immediately immediately when when the the JSheet j sheet has ha become become visible visible Applications application need need to to use use a a SheetListener sheet listener to to get get the the return value value of of a a JSheet j sheet p p Requires require Java 1 1 4 4 p p Caveats caveat We we are are using using an an unsupported unsupport API a p i call call to to make make the the JSheet j sheet translucent translucent This API a p i may may go go away away in in future future versions of of the the Macintosh macintosh Runtime runtime for Java In in such such a a case we we hopefully hopefully just just end end up up with with a a non non opaque opaque sheet sheet author author Werner wern Randelshofer randelshof version 1 1 4 4 2006 2006 07 07 02 02 Rewritten rewrite for independent independent use use of of the the Quaqua quaqua Look look and and Feel feel br 1 1 3 3 2006 2006 04 04 15 15 Request request focus focus Show show window window title title of of parent parent window window when when displaying display sheet sheet as a a a regular regular dialog dialog window window br 1 1 2 2 2006 2006 02 02 18 18 Set set window window decoration decoration style style to to NONE n o n e Get get sheet sheet border border from from UIManager u i manager br 1 1 1 1 2005 2005 10 10 15 15 Bring bring sheet sheet to to front front when when showing showing an an option option pane pane or or a a filechooser filechoos Method showMessageSheet show message sheet with with a a SheetListener sheet listener added add br 1 1 0 0 1 1 2005 2005 10 10 08 08 Clear clear value value br 1 1 0 0 September september 25 25 2005 2005 Created create public class JSheet j sheet extends JDialog j dialog Event event listener listener list list protected EventListenerList event listener list listenerList listener list new EventListenerList event listener list This handler handler is is used use to to handle handle movements movement of of the the owner owner If the the owner owner moves move we we have have to to change change the the location location of of the the sheet sheet as a well well private ComponentListener component listener ownerMovementHandler owner movement handler If this is is non non null we we put put the the owner owner to to the the specified specify location location when when the the sheet sheet is is hidden hide private Point point shiftBackLocation shift back location We we need need to to keep keep track track of of the the old old owner owner position position in in order order to to avoid avoid processing processing duplicate duplicate owner owner moved move events event private Point point oldLocation old location Focus focus owner owner on on the the owner owner window window before before the the sheet sheet is is shown show private Component component oldFocusOwner old focus owner This is is set set to to true when when the the listeners listener for the the JSheet j sheet are are installed instal on on the the parent parent component component private boolean isInstalled is instal If this is is set set to to true the the JSheet j sheet uses us a a transition transition effect effect when when shown show and and when when hidden hide private boolean isAnimated is animate true Creates create a a new JSheet j sheet public JSheet j sheet Frame frame owner owner super owner owner init init Creates create a a new JSheet j sheet public JSheet j sheet Dialog dialog owner owner super owner owner init init private void init init if getOwner get owner null isShowAsSheet is show a sheet setUndecorated set undecorat true getRootPane get root pane setWindowDecorationStyle set window decoration style JRootPane j root pane NONE n o n e getRootPane get root pane setBorder set border UIManager u i manager getBorder get border Sheet sheet border border We we move move the the sheet sheet when when the the user user moves move the the owner owner so so that that it it will will always alway stay stay centered center below below the the title title bar bar of of the the owner owner If the the user user has ha moved move the the owner owner we we forget forget the the shift shift back back location location and and don t t shift shift the the owner owner back back to to the the place place it it was wa when when we we opened open the the sheet sheet ownerMovementHandler owner movement handler new ComponentAdapter component adapter public void componentMoved component move ComponentEvent component event evt evt Window window owner owner getOwner get owner Point point newLocation location owner owner getLocation get location if newLocation location equals equal oldLocation old location setLocation set location newLocation location x x + + owner owner getWidth get width getWidth get width 2 2 newLocation location y y + + owner owner getInsets get inset top top shiftBackLocation shift back location null oldLocation old location newLocation location protected boolean isShowAsSheet is show a sheet return UIManager u i manager getBoolean get Sheet sheet showAsSheet show a sheet Installs install the the sheet sheet on on the the owner owner This method is is invoked just just before before the the JSheet j sheet is is shown show protected void installSheet install sheet if isInstalled is instal Window window owner owner getOwner get owner if owner owner null Determine determine the the location location for the the sheet sheet and and its it owner owner while the the sheet sheet will will be be visible visible In in case we we have have to to shift shift the the owner owner to to fully fully display display the the dialog dialog we we remember remember the the shift shift back back position position Point point ownerLoc owner loc owner owner getLocation get location Point point sheetLoc sheet loc if isShowAsSheet is show a sheet if owner owner instanceof JFrame j frame sheetLoc sheet loc new Point point ownerLoc owner loc x x + + owner owner getWidth get width getWidth get width 2 2 ownerLoc owner loc y y + + owner owner getInsets get inset top top + + JFrame j frame owner owner getRootPane get root pane getContentPane get content pane getY get y else if owner owner instanceof JDialog j dialog sheetLoc sheet loc new Point point ownerLoc owner loc x x + + owner owner getWidth get width getWidth get width 2 2 ownerLoc owner loc y y + + owner owner getInsets get inset top top + + JDialog j dialog owner owner getRootPane get root pane getContentPane get content pane getY get y else sheetLoc sheet loc new Point point ownerLoc owner loc x x + + owner owner getWidth get width getWidth get width 2 2 ownerLoc owner loc y y + + owner owner getInsets get inset top top if sheetLoc sheet loc x x 0 0 owner owner setLocation set location ownerLoc owner loc x x sheetLoc sheet loc x x ownerLoc owner loc y y sheetLoc sheet loc x x 0 0 shiftBackLocation shift back location ownerLoc owner loc oldLocation old location owner owner getLocation get location else shiftBackLocation shift back location null oldLocation old location ownerLoc owner loc else sheetLoc sheet loc new Point point ownerLoc owner loc x x + + owner owner getWidth get width getWidth get width 2 2 ownerLoc owner loc y y + + owner owner getHeight get height getHeight get height 2 2 setLocation set location sheetLoc sheet loc oldFocusOwner old focus owner owner owner getFocusOwner get focus owner owner owner setFocusableWindowState set focusable window state false owner owner setEnabled set enable false JFrame j frame owner owner setResizable set resizable false if UIManager u i manager getBoolean get Sheet sheet showAsSheet show a sheet owner owner addComponentListener add component listener ownerMovementHandler owner movement handler else if owner owner instanceof Frame frame setTitle set title Frame frame owner owner getTitle get title isInstalled is instal true Uninstalls uninstall the the sheet sheet on on the the owner owner This method is is invoked immediately immediately after after the the JSheet j sheet is is hidden hide protected void uninstallSheet uninstall sheet if isInstalled is instal Window window owner owner getOwner get owner if owner owner null owner owner setFocusableWindowState set focusable window state true owner owner setEnabled set enable true JFrame j frame owner owner setResizable set resizable true owner owner removeComponentListener remove component listener ownerMovementHandler owner movement handler if shiftBackLocation shift back location null owner owner setLocation set location shiftBackLocation shift back location if oldFocusOwner old focus owner null owner owner toFront to front oldFocusOwner old focus owner requestFocus request focus isInstalled is instal false public void addNotify add notify super addNotify add notify if UIManager u i manager getBoolean get Sheet sheet showAsSheet show a sheet Methods invokeStatic ch ch randelshofer randelshof quaqua quaqua QuaquaUtilities quaqua utility setWindowAlpha set window alpha new Class Window window class Integer TYPE t y p e new Object this 240 240 null QuaquaUtilities quaqua utility setWindowAlpha set window alpha this 240 240 If this is is set set to to true the the JSheet j sheet uses us a a transition transition effect effect when when shown show and and when when hidden hide public void setAnimated set animate boolean newValue value boolean oldValue old value isAnimated is animate isAnimated is animate newValue value firePropertyChange fire property change animated animate oldValue old value newValue value If this returns true the the JSheet j sheet uses us a a transition transition effect effect when when shown show and and when when hidden hide public boolean isAnimated is animate return isAnimated is animate public void dispose dispose super dispose dispose uninstallSheet uninstall sheet protected void hide0 hide0 super hide hide protected void show0 show0 super show show public void hide hide if isAnimated is animate isShowAsSheet is show a sheet getContentPane get content pane setVisible set visible false final Rectangle rectangle startBounds start bound getBounds get bound int parentWidth parent width getParent get parent getWidth get width final Rectangle rectangle endBounds end bound new Rectangle rectangle parentWidth parent width startBounds start bound width width ? ? startBounds start bound x x + + startBounds start bound width width parentWidth parent width 2 2 startBounds start bound x x startBounds start bound y y Math math min min startBounds start bound width width parentWidth parent width 0 0 final Timer timer timer timer new Timer timer 20 20 null timer timer addActionListener add action listener new ActionListener action listener long startTime start time long endTime end time public void actionPerformed action perform ActionEvent action event evt evt long now now System currentTimeMillis current time milli if startTime start time 0 0 startTime start time now now endTime end time startTime start time + + 200 200 if now now endTime end time timer timer stop stop hide0 hide0 setBounds set bound startBounds start bound getContentPane get content pane setVisible set visible true uninstallSheet uninstall sheet else float ratio ratio now now startTime start time float endTime end time startTime start time setBounds set bound int startBounds start bound x x 1f 1f ratio ratio + + endBounds end bound x x ratio ratio int startBounds start bound y y 1f 1f ratio ratio + + endBounds end bound y y ratio ratio int startBounds start bound width width 1f 1f ratio ratio + + endBounds end bound width width ratio ratio int startBounds start bound height height 1f 1f ratio ratio + + endBounds end bound height height ratio ratio timer timer setRepeats set repeat true timer timer setInitialDelay set initial delay 5 5 timer timer start start else hide0 hide0 uninstallSheet uninstall sheet public void show show if isAnimated is animate isShowAsSheet is show a sheet installSheet install sheet getContentPane get content pane setVisible set visible false final long startTime start time System currentTimeMillis current time milli final long endTime end time startTime start time + + 300 300 final Rectangle rectangle endBounds end bound getBounds get bound int parentWidth parent width getParent get parent getWidth get width final Rectangle rectangle startBounds start bound new Rectangle rectangle parentWidth parent width endBounds end bound width width ? ? endBounds end bound x x + + endBounds end bound width width parentWidth parent width 2 2 endBounds end bound x x endBounds end bound y y Math math min min endBounds end bound width width parentWidth parent width 0 0 setBounds set bound startBounds start bound show0 show0 final Timer timer timer timer new Timer timer 20 20 null timer timer addActionListener add action listener new ActionListener action listener long startTime start time long endTime end time public void actionPerformed action perform ActionEvent action event evt evt long now now System currentTimeMillis current time milli if startTime start time 0 0 startTime start time now now endTime end time startTime start time + + 200 200 if now now endTime end time timer timer stop stop setBounds set bound endBounds end bound getContentPane get content pane setVisible set visible true requestFocus request focus Reinserted reinsert Window window getParent get parent toFront to front else float ratio ratio now now startTime start time float endTime end time startTime start time setBounds set bound int startBounds start bound x x 1f 1f ratio ratio + + endBounds end bound x x ratio ratio int startBounds start bound y y 1f 1f ratio ratio + + endBounds end bound y y ratio ratio int startBounds start bound width width 1f 1f ratio ratio + + endBounds end bound width width ratio ratio int startBounds start bound height height 1f 1f ratio ratio + + endBounds end bound height height ratio ratio timer timer setRepeats set repeat true timer timer setInitialDelay set initial delay 5 5 timer timer start start else installSheet install sheet show0 show0 Adds add a a sheet sheet listener listener public void addSheetListener add sheet listener SheetListener sheet listener l l listenerList listener list add add SheetListener sheet listener class l l Removes remove a a sheet sheet listener listener public void removeSheetListener remove sheet listener SheetListener sheet listener l l listenerList listener list remove remove SheetListener sheet listener class l l Notify notify all all listeners listener that that have have registered register interest interest for notification notification on on this event event type type The the event event instance instance is is lazily lazily created create using using the the parameters passed pass into into the the fire fire method protected void fireOptionSelected fire option select JOptionPane j option pane pane pane Object value value pane pane getValue get value int option option if value value null option option JOptionPane j option pane CLOSED c l o s e d OPTION o p t i o n else if pane pane getOptions get option null if value value instanceof Integer option option Integer value value intValue value else option option JOptionPane j option pane CLOSED c l o s e d OPTION o p t i o n else option option JOptionPane j option pane CLOSED c l o s e d OPTION o p t i o n Object options option pane pane getOptions get option for int i i 0 0 n n options option length length i i n n i++ i++ if options option i i equals equal value value option option i i break if option option JOptionPane j option pane CLOSED c l o s e d OPTION o p t i o n value value null fireOptionSelected fire option select pane pane option option value value pane pane getInputValue get input value Notify notify all all listeners listener that that have have registered register interest interest for notification notification on on this event event type type The the event event instance instance is is lazily lazily created create using using the the parameters passed pass into into the the fire fire method protected void fireOptionSelected fire option select JOptionPane j option pane pane pane int option option Object value value Object inputValue input value SheetEvent sheet event sheetEvent sheet event null Guaranteed guarantee to to return a a non non null array Object listeners listener listenerList listener list getListenerList get listener list Process process the the listeners listener last last to to first first notifying notify those those that that are are interested interest in in this event event for int i i listeners listener length length 2 2 i i 0 0 i i 2 2 if listeners listener i i SheetListener sheet listener class Lazily lazily create create the the event event if sheetEvent sheet event null sheetEvent sheet event new SheetEvent sheet event this pane pane option option value value inputValue input value SheetListener sheet listener listeners listener i+1 i+1 optionSelected option select sheetEvent sheet event Notify notify all all listeners listener that that have have registered register interest interest for notification notification on on this event event type type The the event event instance instance is is lazily lazily created create using using the the parameters passed pass into into the the fire fire method protected void fireOptionSelected fire option select JFileChooser j chooser pane pane int option option SheetEvent sheet event sheetEvent sheet event null Guaranteed guarantee to to return a a non non null array Object listeners listener listenerList listener list getListenerList get listener list Process process the the listeners listener last last to to first first notifying notify those those that that are are interested interest in in this event event for int i i listeners listener length length 2 2 i i 0 0 i i 2 2 if listeners listener i i SheetListener sheet listener class Lazily lazily create create the the event event if sheetEvent sheet event null sheetEvent sheet event new SheetEvent sheet event this pane pane option option null SheetListener sheet listener listeners listener i+1 i+1 optionSelected option select sheetEvent sheet event Displays display an an option option pane pane as a a a sheet sheet on on its it parent parent window window param pane pane The the option option pane pane param parentComponent parent component The the parent parent of of the the option option pane pane param listener listener The the listener listener for SheetEvents sheet event public static void showSheet show sheet JOptionPane j option pane pane pane Component component parentComponent parent component SheetListener sheet listener listener listener final JSheet j sheet sheet sheet createSheet create sheet pane pane parentComponent parent component styleFromMessageType style from message type pane pane getMessageType get message type sheet sheet addSheetListener add sheet listener listener listener sheet sheet show show Brings bring up up a a sheet sheet with with the the options option i i Yes yes i i i i No no i i and and i i Cancel cancel i i param parentComponent parent component determines determine the the code Frame frame code in in which which the the sheet sheet is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showConfirmSheet show confirm sheet Component component parentComponent parent component Object message message SheetListener sheet listener listener listener showConfirmSheet show confirm sheet parentComponent parent component message message JOptionPane j option pane YES y e s NO n o CANCEL c a n c e l OPTION o p t i o n listener listener Brings bring up up a a sheet sheet where where the the number number of of choices choice is is determined determine by by the the code optionType option type code parameter parameter param parentComponent parent component determines determine the the code Frame frame code in in which which the the sheet sheet is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display param optionType option type an an int designating designate the the options option available available on on the the dialog dialog code YES y e s NO n o OPTION o p t i o n code or or code YES y e s NO n o CANCEL c a n c e l OPTION o p t i o n code ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showConfirmSheet show confirm sheet Component component parentComponent parent component Object message message int optionType option type SheetListener sheet listener listener listener showConfirmSheet show confirm sheet parentComponent parent component message message optionType option type JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e listener listener Brings bring up up a a sheet sheet where where the the number number of of choices choice is is determined determine by by the the code optionType option type code parameter parameter where where the the code messageType message type code parameter parameter determines determine the the icon icon to to display display The the code messageType message type code parameter parameter is is primarily primarily used use to to supply supply a a default icon icon from from the the Look look and and Feel feel param parentComponent parent component determines determine the the code Frame frame code in in which which the the dialog dialog is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display param optionType option type an an integer designating designate the the options option available available on on the the dialog dialog code YES y e s NO n o OPTION o p t i o n code or or code YES y e s NO n o CANCEL c a n c e l OPTION o p t i o n code param messageType message type an an integer designating designate the the kind kind of of message message this is is primarily primarily used use to to determine determine the the icon icon from from the the pluggable pluggable Look look and and Feel feel code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showConfirmSheet show confirm sheet Component component parentComponent parent component Object message message int optionType option type int messageType message type SheetListener sheet listener listener listener showConfirmSheet show confirm sheet parentComponent parent component message message optionType option type messageType message type null listener listener Brings bring up up a a sheet sheet with with a a specified specify icon icon where where the the number number of of choices choice is is determined determine by by the the code optionType option type code parameter parameter The the code messageType message type code parameter parameter is is primarily primarily used use to to supply supply a a default icon icon from from the the look look and and feel feel param parentComponent parent component determines determine the the code Frame frame code in in which which the the dialog dialog is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the Object to to display display param optionType option type an an int designating designate the the options option available available on on the the dialog dialog code YES y e s NO n o OPTION o p t i o n code or or code YES y e s NO n o CANCEL c a n c e l OPTION o p t i o n code param messageType message type an an int designating designate the the kind kind of of message message this is is primarily primarily used use to to determine determine the the icon icon from from the the pluggable pluggable Look look and and Feel feel code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code param icon icon the the icon icon to to display display in in the the dialog dialog ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showConfirmSheet show confirm sheet Component component parentComponent parent component Object message message int optionType option type int messageType message type Icon icon icon icon SheetListener sheet listener listener listener showOptionSheet show option sheet parentComponent parent component message message optionType option type messageType message type icon icon null null listener listener Shows show a a question question message message sheet sheet requesting request input input from from the the user user parented parent to to code parentComponent parent component code param parentComponent parent component the the parent parent code Component component code for the the dialog dialog ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showInputSheet show input sheet Component component parentComponent parent component Object message message SheetListener sheet listener listener listener showInputSheet show input sheet parentComponent parent component message message JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e listener listener Shows show a a question question message message sheet sheet requesting request input input from from the the user user and and parented parent to to code parentComponent parent component code The the input input value value will will be be initialized initialize to to code initialSelectionValue initial selection value code param parentComponent parent component the the parent parent code Component component code for the the dialog dialog param message message the the code Object code to to display display param initialSelectionValue initial selection value the the value value used use to to initialize initialize the the input input field field ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showInputSheet show input sheet Component component parentComponent parent component Object message message Object initialSelectionValue initial selection value SheetListener sheet listener listener listener showInputSheet show input sheet parentComponent parent component message message JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e null null initialSelectionValue initial selection value listener listener Shows show a a sheet sheet requesting request input input from from the the user user parented parent to to code parentComponent parent component code and and message message type type code messageType message type code param parentComponent parent component the the parent parent code Component component code for the the dialog dialog param message message the the code Object code to to display display param messageType message type the the type type of of message message that that is is to to be be displayed display code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showInputSheet show input sheet Component component parentComponent parent component Object message message int messageType message type SheetListener sheet listener listener listener showInputSheet show input sheet parentComponent parent component message message messageType message type null null null listener listener Prompts prompt the the user user for input input in in a a sheet sheet where where the the initial initial selection selection possible possible selections selection and and all all other other options option can can be be specified specify The the user user will will able able to to choose choose from from code selectionValues selection value code where where code null code implies implie the the user user can can input input whatever whatever they they wish wish usually usually by by means mean of of a a code JTextField j text field code code initialSelectionValue initial selection value code is is the the initial initial value value to to prompt prompt the the user user with with It it is is up up to to the the UI u i to to decide decide how how best best to to represent represent the the code selectionValues selection value code but but usually usually a a code JComboBox j combo box code code JList j list code or or code JTextField j text field code will will be be used use param parentComponent parent component the the parent parent code Component component code for the the dialog dialog param message message the the code Object code to to display display param messageType message type the the type type of of message message to to be be displayed display code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code param icon icon the the code Icon icon code image image to to display display param selectionValues selection value an an array of of code Object code s s that that gives give the the possible possible selections selection param initialSelectionValue initial selection value the the value value used use to to initialize initialize the the input input field field ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showInputSheet show input sheet Component component parentComponent parent component Object message message int messageType message type Icon icon icon icon Object selectionValues selection value Object initialSelectionValue initial selection value SheetListener sheet listener listener listener JOptionPane j option pane pane pane new JOptionPane j option pane message message messageType message type JOptionPane j option pane OK o k CANCEL c a n c e l OPTION o p t i o n icon icon null null pane pane setWantsInput set want input true pane pane setSelectionValues set selection value selectionValues selection value pane pane setInitialSelectionValue set initial selection value initialSelectionValue initial selection value pane pane setComponentOrientation set component orientation parentComponent parent component null ? ? JOptionPane j option pane getRootFrame get root frame parentComponent parent component getComponentOrientation get component orientation int style style styleFromMessageType style from message type messageType message type JSheet j sheet sheet sheet createSheet create sheet pane pane parentComponent parent component style style pane pane selectInitialValue select initial value sheet sheet addWindowListener add window listener new WindowAdapter window adapter public void windowClosed window close WindowEvent window event evt evt sheet sheet dispose dispose sheet sheet addSheetListener add sheet listener listener listener sheet sheet show show sheet sheet toFront to front Brings bring up up an an information information message message sheet sheet param parentComponent parent component determines determine the the code Frame frame code in in which which the the dialog dialog is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display public static void showMessageSheet show message sheet Component component parentComponent parent component Object message message showMessageSheet show message sheet parentComponent parent component message message JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e Brings bring up up an an information information message message sheet sheet param parentComponent parent component determines determine the the code Frame frame code in in which which the the dialog dialog is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display param listener listener This listener listener is is notified notify when when the the sheet sheet is is dismissed dismiss public static void showMessageSheet show message sheet Component component parentComponent parent component Object message message SheetListener sheet listener listener listener showMessageSheet show message sheet parentComponent parent component message message JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e listener listener Brings bring up up a a sheet sheet that that displays display a a message message using using a a default icon icon determined determine by by the the code messageType message type code parameter parameter param parentComponent parent component determines determine the the code Frame frame code in in which which the the dialog dialog is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display param messageType message type the the type type of of message message to to be be displayed display code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code public static void showMessageSheet show message sheet Component component parentComponent parent component Object message message int messageType message type showMessageSheet show message sheet parentComponent parent component message message messageType message type null null Brings bring up up a a sheet sheet that that displays display a a message message using using a a default icon icon determined determine by by the the code messageType message type code parameter parameter param parentComponent parent component determines determine the the code Frame frame code in in which which the the dialog dialog is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display param messageType message type the the type type of of message message to to be be displayed display code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code param listener listener This listener listener is is notified notify when when the the sheet sheet is is dismissed dismiss public static void showMessageSheet show message sheet Component component parentComponent parent component Object message message int messageType message type SheetListener sheet listener listener listener showMessageSheet show message sheet parentComponent parent component message message messageType message type null listener listener Brings bring up up a a sheet sheet displaying display a a message message specifying specify all all parameters param parentComponent parent component determines determine the the code Frame frame code in in which which the the sheet sheet is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display param messageType message type the the type type of of message message to to be be displayed display code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code param icon icon an an icon icon to to display display in in the the sheet sheet that that helps help the the user user identify identify the the kind kind of of message message that that is is being being displayed display param listener listener This listener listener is is notified notify when when the the sheet sheet is is dismissed dismiss public static void showMessageSheet show message sheet Component component parentComponent parent component Object message message int messageType message type Icon icon icon icon SheetListener sheet listener listener listener showOptionSheet show option sheet parentComponent parent component message message JOptionPane j option pane DEFAULT d e f a u l t OPTION o p t i o n messageType message type icon icon null null listener listener Brings bring up up a a sheet sheet with with a a specified specify icon icon where where the the initial initial choice choice is is determined determine by by the the code initialValue initial value code parameter parameter and and the the number number of of choices choice is is determined determine by by the the code optionType option type code parameter parameter p p If code optionType option type code is is code YES y e s NO n o OPTION o p t i o n code or or code YES y e s NO n o CANCEL c a n c e l OPTION o p t i o n code and and the the code options option code parameter parameter is is code null code then then the the options option are are supplied supply by by the the look look and and feel feel p p The the code messageType message type code parameter parameter is is primarily primarily used use to to supply supply a a default icon icon from from the the look look and and feel feel param parentComponent parent component determines determine the the code Frame frame code in in which which the the dialog dialog is is displayed display if code null code or or if the the code parentComponent parent component code has ha no no code Frame frame code the the sheet sheet is is displayed display as a a a dialog dialog param message message the the code Object code to to display display param optionType option type an an integer designating designate the the options option available available on on the the dialog dialog code YES y e s NO n o OPTION o p t i o n code or or code YES y e s NO n o CANCEL c a n c e l OPTION o p t i o n code param messageType message type an an integer designating designate the the kind kind of of message message this is is primarily primarily used use to to determine determine the the icon icon from from the the pluggable pluggable Look look and and Feel feel code JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e code code JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e code code JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e code code JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e code or or code JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e code param icon icon the the icon icon to to display display in in the the dialog dialog param options option an an array of of objects indicating indicate the the possible possible choices choice the the user user can can make make if the the objects are are components component they they are are rendered render properly properly non non code String code objects are are rendered render using using their their code toString to code methods if this parameter parameter is is code null code the the options option are are determined determine by by the the Look look and and Feel feel param initialValue initial value the the object that that represents represent the the default selection selection for the the dialog dialog only only meaningful meaningful if code options option code is is used use can can be be code null code ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showOptionSheet show option sheet Component component parentComponent parent component Object message message int optionType option type int messageType message type Icon icon icon icon Object options option Object initialValue initial value SheetListener sheet listener listener listener JOptionPane j option pane pane pane new JOptionPane j option pane message message messageType message type optionType option type icon icon options option initialValue initial value pane pane setInitialValue set initial value initialValue initial value pane pane setComponentOrientation set component orientation parentComponent parent component null ? ? JOptionPane j option pane getRootFrame get root frame parentComponent parent component getComponentOrientation get component orientation int style style styleFromMessageType style from message type messageType message type JSheet j sheet sheet sheet createSheet create sheet pane pane parentComponent parent component style style pane pane selectInitialValue select initial value sheet sheet addSheetListener add sheet listener listener listener sheet sheet show show sheet sheet toFront to front private static int styleFromMessageType style from message type int messageType message type switch messageType message type case JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e return JRootPane j root pane ERROR e r r o r DIALOG d i a l o g case JOptionPane j option pane QUESTION q u e s t i o n MESSAGE m e s s a g e return JRootPane j root pane QUESTION q u e s t i o n DIALOG d i a l o g case JOptionPane j option pane WARNING w a r n i n g MESSAGE m e s s a g e return JRootPane j root pane WARNING w a r n i n g DIALOG d i a l o g case JOptionPane j option pane INFORMATION i n f o r m a t i o n MESSAGE m e s s a g e return JRootPane j root pane INFORMATION i n f o r m a t i o n DIALOG d i a l o g case JOptionPane j option pane PLAIN p l a i n MESSAGE m e s s a g e default return JRootPane j root pane PLAIN p l a i n DIALOG d i a l o g private static JSheet j sheet createSheet create sheet final JOptionPane j option pane pane pane Component component parentComponent parent component int style style Window window window window getWindowForComponent get window component parentComponent parent component final JSheet j sheet sheet sheet if window window instanceof Frame frame sheet sheet new JSheet j sheet Frame frame window window else sheet sheet new JSheet j sheet Dialog dialog window window Container container contentPane content pane sheet sheet getContentPane get content pane contentPane content pane setLayout set layout new BorderLayout border layout contentPane content pane add add pane pane BorderLayout border layout CENTER c e n t e r sheet sheet setResizable set resizable false sheet sheet addWindowListener add window listener new WindowAdapter window adapter private boolean gotFocus get focus false int count count public void windowClosing window closing WindowEvent window event we we pane pane setValue set value null public void windowClosed window close WindowEvent window event we we if pane pane getValue get value JOptionPane j option pane UNINITIALIZED u n i n i t i a l i z e d VALUE v a l u e sheet sheet fireOptionSelected fire option select pane pane public void windowGainedFocus window gain focus WindowEvent window event we we Once once window window gets get focus focus set set initial initial focus focus if gotFocus get focus Ugly ugly dirty dirty hack hack JOptionPane j option pane selectInitialValue select initial value is is protected So so we we call call directly directly into into the the UI u i This may may cause cause mayhem mayhem because because we we override override the the encapsulation encapsulation pane pane selectInitialValue select initial value OptionPaneUI option pane u i ui ui pane pane getUI get u i if ui ui null ui ui selectInitialValue select initial value pane pane gotFocus get focus true sheet sheet addComponentListener add component listener new ComponentAdapter component adapter public void componentShown component show ComponentEvent component event ce ce reset reset value value to to ensure ensure closing closing works work properly properly pane pane setValue set value JOptionPane j option pane UNINITIALIZED u n i n i t i a l i z e d VALUE v a l u e pane pane addPropertyChangeListener add property change listener new PropertyChangeListener property change listener public void propertyChange property change PropertyChangeEvent property change event event event Let let the the defaultCloseOperation close operation handle handle the the closing closing if the the user user closed close the the window window without without selecting select a a button button newValue value null in in that that case Otherwise otherwise close close the the sheet sheet if sheet sheet isVisible is visible event event getSource get source pane pane event event getPropertyName get property name equals equal JOptionPane j option pane VALUE v a l u e PROPERTY p r o p e r t y event event getNewValue get value null event event getNewValue get value JOptionPane j option pane UNINITIALIZED u n i n i t i a l i z e d VALUE v a l u e sheet sheet setVisible set visible false sheet sheet fireOptionSelected fire option select pane pane sheet sheet pack pack return sheet sheet Returns the the specified specify component component s s toplevel toplevel code Frame frame code or or code Dialog dialog code param parentComponent parent component the the code Component component code to to check check for a a code Frame frame code or or code Dialog dialog code return the the code Frame frame code or or code Dialog dialog code that that contains contain the the component component or or the the default frame frame if the the component component is is code null code or or does doe not not have have a a valid valid code Frame frame code or or code Dialog dialog code parent parent static Window window getWindowForComponent get window component Component component parentComponent parent component if parentComponent parent component null return JOptionPane j option pane getRootFrame get root frame if parentComponent parent component instanceof Frame frame || || parentComponent parent component instanceof Dialog dialog return Window window parentComponent parent component return getWindowForComponent get window component parentComponent parent component getParent get parent Displays display a a Save save File file chooser chooser sheet sheet Note note that that the the text text that that appears appear in in the the approve approve button button is is determined determine by by the the L l F f param parent parent the the parent parent component component of of the the dialog dialog can can be be code null code ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showSaveSheet show save sheet JFileChooser j chooser chooser chooser Component component parent parent SheetListener sheet listener listener listener chooser chooser setDialogType set dialog type JFileChooser j chooser SAVE s a v e DIALOG d i a l o g showSheet show sheet chooser chooser parent parent null listener listener Displays display an an Open open File file chooser chooser sheet sheet Note note that that the the text text that that appears appear in in the the approve approve button button is is determined determine by by the the L l F f param parent parent the the parent parent component component of of the the dialog dialog can can be be code null code ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showOpenSheet show open sheet JFileChooser j chooser chooser chooser Component component parent parent SheetListener sheet listener listener listener chooser chooser setDialogType set dialog type JFileChooser j chooser OPEN o p e n DIALOG d i a l o g showSheet show sheet chooser chooser parent parent null listener listener Displays display a a custom custom file chooser chooser sheet sheet with with a a custom custom approve approve button button param parent parent the the parent parent component component of of the the dialog dialog can can be be code null code param approveButtonText approve button text the the text text of of the the code ApproveButton approve button code ??? ??? param listener listener The the listener listener for SheetEvents sheet event public static void showSheet show sheet final JFileChooser j chooser chooser chooser Component component parent parent String approveButtonText approve button text SheetListener sheet listener listener listener if approveButtonText approve button text null chooser chooser setApproveButtonText set approve button text approveButtonText approve button text chooser chooser setDialogType set dialog type JFileChooser j chooser CUSTOM c u s t o m DIALOG d i a l o g Begin begin Create create Dialog dialog Frame frame frame frame parent parent instanceof Frame frame ? ? Frame frame parent parent Frame frame SwingUtilities swing utility getAncestorOfClass get ancestor of Frame frame class parent parent String title title chooser chooser getUI get u i getDialogTitle get dialog title chooser chooser chooser chooser getAccessibleContext get accessible context setAccessibleDescription set accessible description title title final JSheet j sheet sheet sheet new JSheet j sheet frame frame sheet sheet addSheetListener add sheet listener listener listener Container container contentPane content pane sheet sheet getContentPane get content pane contentPane content pane setLayout set layout new BorderLayout border layout contentPane content pane add add chooser chooser BorderLayout border layout CENTER c e n t e r End end Create create Dialog dialog final ActionListener action listener actionListener action listener new ActionListener action listener public void actionPerformed action perform ActionEvent action event evt evt int option option if evt evt getActionCommand get action command equals equal ApproveSelection approve selection option option JFileChooser j chooser APPROVE a p p r o v e OPTION o p t i o n else option option JFileChooser j chooser CANCEL c a n c e l OPTION o p t i o n sheet sheet hide hide sheet sheet fireOptionSelected fire option select chooser chooser option option chooser chooser removeActionListener remove action listener this chooser chooser addActionListener add action listener actionListener action listener sheet sheet addWindowListener add window listener new WindowAdapter window adapter public void windowClosing window closing WindowEvent window event e e sheet sheet fireOptionSelected fire option select chooser chooser JFileChooser j chooser CANCEL c a n c e l OPTION o p t i o n chooser chooser removeActionListener remove action listener actionListener action listener chooser chooser rescanCurrentDirectory rescan current directory sheet sheet pack pack sheet sheet show show sheet sheet toFront to front 