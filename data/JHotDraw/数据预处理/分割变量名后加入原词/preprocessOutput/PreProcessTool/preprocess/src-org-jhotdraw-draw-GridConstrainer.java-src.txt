GridConstrainer grid constrain java 2 2 1 1 1 1 2006 2006 07 07 05 05 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw draw draw import java awt awt import java awt awt geom geom Constrains constrain a a point point such such that that it it falls fall on on a a grid grid author author Werner wern Randelshofer randelshof version 2 2 1 1 1 1 2006 2006 07 07 05 05 Fixed fix drawing drawing bug bug br 2 2 1 1 2006 2006 07 07 03 03 Method isVisible is visible added add br 2 2 0 0 2006 2006 01 01 14 14 Changed change to to support support double precision precision coordinates coordinate br 1 1 0 0 2004 2004 03 03 17 17 Created create public class GridConstrainer grid constrain implements Constrainer constrain private double width width height height private static Color color minorColor minor color new Color color 0xebebeb 0xebebeb private static Color color majorColor major color new Color color 0xcacaca 0xcacaca Creates create a a new instance instance param width width The the width width of of a a grid grid cell cell param height height The the height height of of a a grid grid cell cell public GridConstrainer grid constrain double width width double height height if width width 0 0 || || height height 0 0 throw new IllegalArgumentException illegal argument Width width or or height height is is 0 0 this width width width width this height height height height public double getWidth get width return width width public double getHeight get height return height height public Point2D point2 d Double constrainPoint constrain point Point2D point2 d Double p p FIXME f i x m e This works work only only for integer widths width p p x x Math math round round p p x x width width width width p p y y Math math round round p p y y height height height height return p p public String toString to return super toString to + + +width+ +width+ +height+ +height+ public boolean isVisible is visible return width width 1 1 height height 1 1 public void draw draw Graphics2D graphics2 d g g DrawingView drawing view view view if isVisible is visible AffineTransform affine transform t t view view getDrawingToViewTransform get drawing to view transform Rectangle rectangle viewBounds view bound g g getClipBounds get clip bound Rectangle2D rectangle2 d Double bounds bound view view viewToDrawing view to drawing viewBounds view bound Point2D point2 d Double origin origin constrainPoint constrain point new Point2D point2 d Double bounds bound x x bounds bound y y Point2D point2 d Double point point new Point2D point2 d Double Point2D point2 d Double viewPoint view point new Point2D point2 d Double if width width view view getScaleFactor get scale factor 1 1 g g setColor set color minorColor minor color for int i i int origin origin x x width width m m int origin origin x x + + bounds bound width width width width + + 1 1 i i m m i++ i++ g g setColor set color i i % % 5 5 0 0 ? ? majorColor major color minorColor minor color point point x x width width i i t t transform transform point point viewPoint view point g g drawLine draw line int viewPoint view point x x int viewBounds view bound y y int viewPoint view point x x int viewBounds view bound y y + + viewBounds view bound height height if height height view view getScaleFactor get scale factor 1 1 g g setColor set color minorColor minor color for int i i int origin origin y y height height m m int origin origin y y + + bounds bound height height height height + + 1 1 i i m m i++ i++ g g setColor set color i i % % 5 5 0 0 ? ? majorColor major color minorColor minor color point point y y height height i i t t transform transform point point viewPoint view point g g drawLine draw line int viewBounds view bound x x int viewPoint view point y y int viewBounds view bound x x + + viewBounds view bound width width int viewPoint view point y y 