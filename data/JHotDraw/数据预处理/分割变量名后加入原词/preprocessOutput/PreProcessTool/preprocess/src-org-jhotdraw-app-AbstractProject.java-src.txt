AbstractProject project java 1 1 1 1 1 1 2006 2006 04 04 11 11 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw app app import org org jhotdraw jhotdraw app app action action SelectAllAction select all action import java io io import java util util import org org jhotdraw jhotdraw util util import javax javax swing swing import java util util concurrent concurrent import java util util prefs pref AbstractProject project author author Werner wern Randelshofer randelshof version 1 1 1 1 1 1 2006 2006 04 04 11 11 Fixed fix project project file preferences preference br 1 1 1 1 2006 2006 02 02 16 16 Support support for preferences preference added add br 1 1 0 0 January january 3 3 2006 2006 Created create public abstract class AbstractProject project extends JPanel j panel implements Project project private Application application application application protected JFileChooser j chooser saveChooser save chooser protected JFileChooser j chooser openChooser open chooser protected File file protected Executor executor executor executor private HashMap hash map actions action private boolean hasUnsavedChanges ha unsav change private Preferences preference prefs pref private int multipleOpenId multiple open 1 1 private boolean isShowing is showing Creates create a a new instance instance public AbstractProject project public void init init prefs pref Preferences preference userNodeForPackage user node getClass get initComponents init component This method is is called call from from within within the the constructor constructor to to initialize initialize the the form form WARNING w a r n i n g Do NOT n o t modify modify this code The the content content of of this method is is always alway regenerated regenerate by by the the Form form Editor editor private void initComponents init component GEN g e n BEGIN b e g i n initComponents init component setLayout set layout new java awt awt BorderLayout border layout GEN g e n END e n d initComponents init component Variables variable declaration declaration do not not modify modify GEN g e n BEGIN b e g i n variables variable End end of of variables variable declaration declaration GEN g e n END e n d variables variable public void setApplication set application Application application newValue value Application application oldValue old value application application application application newValue value firePropertyChange fire property change application application oldValue old value newValue value public Application application getApplication get application return application application public JComponent j component getComponent get component return this public File getFile get return file public void setFile set File newValue value File oldValue old value file file newValue value if prefs pref null newValue value null prefs pref put put projectFile project newValue value getPath get path firePropertyChange fire property change file oldValue old value newValue value Gets get the the open open file chooser chooser for the the project project public JFileChooser j chooser getOpenChooser get open chooser if openChooser open chooser null openChooser open chooser createOpenChooser create open chooser return openChooser open chooser protected JFileChooser j chooser createOpenChooser create open chooser JFileChooser j chooser c c new JFileChooser j chooser if prefs pref null c c setSelectedFile set select new File prefs pref get get projectFile project System getProperty get property user user home home return c c Gets get the the save save file chooser chooser for the the project project public JFileChooser j chooser getSaveChooser get save chooser if saveChooser save chooser null saveChooser save chooser createSaveChooser create save chooser return saveChooser save chooser protected JFileChooser j chooser createSaveChooser create save chooser JFileChooser j chooser c c new JFileChooser j chooser if prefs pref null c c setCurrentDirectory set current directory new File prefs pref get get projectFile project System getProperty get property user user home home return c c Returns true if the the project project has ha unsaved unsav changes change This is is a a bound bound property property public boolean hasUnsavedChanges ha unsav change return hasUnsavedChanges ha unsav change protected void setHasUnsavedChanges set ha unsav change boolean newValue value boolean oldValue old value hasUnsavedChanges ha unsav change hasUnsavedChanges ha unsav change newValue value firePropertyChange fire property change hasUnsavedChanges ha unsav change oldValue old value newValue value Gets get rid rid of of all all the the resources resource of of the the project project No no other other methods should should be be invoked on on the the project project afterwards afterward public void dispose dispose Returns the the action action with with the the specified specify id public Action action getAction get action String id return actions action null ? ? null Action action actions action get get id Puts put an an action action with with the the specified specify id public void putAction put action String id Action action action action if actions action null actions action new HashMap hash map if action action null actions action remove remove id else actions action put put id action action Executes execute the the specified specify runnable runnable on on the the worker worker thread thread of of the the project project Execution execution is is perfomred perfomr sequentially sequentially in in the the same same sequence sequence as a the the runnables runnable have have been be passed pass to to this method public void execute execute Runnable runnable worker worker if executor executor null executor executor Executors executor newSingleThreadExecutor single thread executor executor executor execute execute worker worker public void setMultipleOpenId set multiple open int newValue value int oldValue old value multipleOpenId multiple open multipleOpenId multiple open newValue value firePropertyChange fire property change multipleOpenId multiple open oldValue old value newValue value public int getMultipleOpenId get multiple open return multipleOpenId multiple open public void setShowing set showing boolean newValue value boolean oldValue old value isShowing is showing isShowing is showing newValue value firePropertyChange fire property change showing showing oldValue old value newValue value public boolean isShowing is showing return isShowing is showing public void markChangesAsSaved mark change a save setHasUnsavedChanges set ha unsav change false 