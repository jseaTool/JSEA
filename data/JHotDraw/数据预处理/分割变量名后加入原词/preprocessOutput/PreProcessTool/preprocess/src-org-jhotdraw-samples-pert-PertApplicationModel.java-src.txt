PertApplicationModel pert application model java 1 1 0 0 2006 2006 06 06 18 18 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw samples sample pert pert import java awt awt import java awt awt event event import java util util import javax javax swing swing import org org jhotdraw jhotdraw app app import org org jhotdraw jhotdraw app app action action import org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw draw draw action action import org org jhotdraw jhotdraw util util import org org jhotdraw jhotdraw samples sample pert pert figures figure PertApplicationModel pert application model author author Werner wern Randelshofer randelshof version 1 1 0 0 2006 2006 06 06 18 18 Created create public class PertApplicationModel pert application model extends DefaultApplicationModel application model private final static double scaleFactors scale factor 5 5 4 4 3 3 2 2 1 1 5 5 1 1 25 25 1 1 0 0 75 75 0 0 5 5 0 0 25 25 0 0 10 10 private static class ToolButtonListener tool button listener implements ItemListener item listener private Tool tool tool tool private DrawingEditor drawing editor editor editor public ToolButtonListener tool button listener Tool tool t t DrawingEditor drawing editor editor editor this tool tool t t this editor editor editor editor public void itemStateChanged item state change ItemEvent item event evt evt if evt evt getStateChange get state change ItemEvent item event SELECTED s e l e c t e d editor editor setTool set tool tool tool This editor editor is is shared share by by all all projects project private DefaultDrawingEditor drawing editor sharedEditor share editor private HashMap hash map String Action action actions action Creates create a a new instance instance public PertApplicationModel pert application model public void initApplication init application Application application a a ResourceBundleUtil resource bundle util drawLabels draw label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw samples sample pert pert Labels label AbstractAction action aa aa putAction put action ExportAction export action ID new ExportAction export action a a putAction put action toggleGrid toggle grid aa aa new ToggleProjectPropertyAction toggle project property action a a gridVisible grid visible drawLabels draw label configureAction configure action aa aa alignGrid align grid for double sf sf scaleFactors scale factor putAction put action int sf sf 100 100 + + % % aa aa new ProjectPropertyAction project property action a a scaleFactor scale factor Double TYPE t y p e new Double sf sf aa aa putValue put value Action action NAME n a m e int sf sf 100 100 + + % % public DefaultDrawingEditor drawing editor getSharedEditor get share editor if sharedEditor share editor null sharedEditor share editor new DefaultDrawingEditor drawing editor return sharedEditor share editor public void initProject init project Application application a a Project project p p if a a isSharingToolsAmongProjects is sharing tool among project PertProject pert project p p setDrawingEditor set drawing editor getSharedEditor get share editor private void addCreationButtonsTo add creation button to JToolBar j tool bar tb tb final DrawingEditor drawing editor editor editor AttributeKeys attribute key for the the entitie entitie sets set HashMap hash map AttributeKey attribute key Object attributes attribute ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw samples sample pert pert Labels label ResourceBundleUtil resource bundle util drawLabels draw label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label ToolBarButtonFactory tool bar button factory addSelectionToolTo add selection tool to tb tb editor editor tb tb addSeparator add separator attributes attribute new HashMap hash map AttributeKey attribute key Object attributes attribute put put AttributeKeys attribute key FILL f i l l COLOR c o l o r Color color white white attributes attribute put put AttributeKeys attribute key STROKE s t r o k e COLOR c o l o r Color color black black attributes attribute put put AttributeKeys attribute key TEXT t e x t COLOR c o l o r Color color black black ToolBarButtonFactory tool bar button factory addToolTo add tool to tb tb editor editor new CreationTool creation tool new TaskFigure task figure attributes attribute createTask create task labels label attributes attribute new HashMap hash map AttributeKey attribute key Object attributes attribute put put AttributeKeys attribute key STROKE s t r o k e COLOR c o l o r new Color color 0x000099 0x000099 ToolBarButtonFactory tool bar button factory addToolTo add tool to tb tb editor editor new ConnectionTool connection tool new DependencyFigure dependency figure attributes attribute createDependency create dependency labels label tb tb addSeparator add separator ToolBarButtonFactory tool bar button factory addToolTo add tool to tb tb editor editor new TextAreaTool text area tool new TextAreaFigure text area figure createTextArea create text area drawLabels draw label Creates create toolbars toolbar for the the application application This class always alway returns an an empty empty list list Subclasses subclass may may return other other values value public java util util List list JToolBar j tool bar createToolBars create tool bar Application application a a Project project pr pr ResourceBundleUtil resource bundle util drawLabels draw label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw samples sample pert pert Labels label PertProject pert project p p PertProject pert project pr pr DrawingEditor drawing editor editor editor if p p null editor editor getSharedEditor get share editor else editor editor p p getDrawingEditor get drawing editor LinkedList link list JToolBar j tool bar list list new LinkedList link list JToolBar j tool bar JToolBar j tool bar tb tb tb tb new JToolBar j tool bar addCreationButtonsTo add creation button to tb tb editor editor tb tb setName set name drawLabels draw label getString get drawToolBarTitle draw tool bar title list list add add tb tb tb tb new JToolBar j tool bar ToolBarButtonFactory tool bar button factory addAttributesButtonsTo add attribute button to tb tb editor editor tb tb setName set name drawLabels draw label getString get attributesToolBarTitle attribute tool bar title list list add add tb tb tb tb new JToolBar j tool bar ToolBarButtonFactory tool bar button factory addAlignmentButtonsTo add alignment button to tb tb editor editor tb tb setName set name drawLabels draw label getString get alignmentToolBarTitle alignment tool bar title list list add add tb tb return list list public java util util List list JMenu j menu createMenus create menu Application application a a Project project pr pr FIXME f i x m e Add add code for unconfiguring unconfigur the the menus menu We we leak leak memory memory PertProject pert project p p PertProject pert project pr pr ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw app app Labels label JMenuBar j menu bar mb mb new JMenuBar j menu bar LinkedList link list JMenu j menu mb mb new LinkedList link list JMenu j menu JMenu j menu m m m2 m2 JMenuItem j menu item mi mi JRadioButtonMenuItem j radio button menu item rbmi rbmi JCheckBoxMenuItem j check box menu item cbmi cbmi ButtonGroup button group group group m m new JMenu j menu labels label configureMenu configure menu m m view view cbmi cbmi new JCheckBoxMenuItem j check box menu item getAction get action toggleGrid toggle grid Actions action configureJCheckBoxMenuItem configure j check box menu item cbmi cbmi getAction get action toggleGrid toggle grid m m add add cbmi cbmi m2 m2 new JMenu j menu Zoom zoom for double sf sf scaleFactors scale factor String id int sf sf 100 100 + + % % cbmi cbmi new JCheckBoxMenuItem j check box menu item getAction get action id Actions action configureJCheckBoxMenuItem configure j check box menu item cbmi cbmi getAction get action id m2 m2 add add cbmi cbmi m m add add m2 m2 mb mb add add m m return mb mb 