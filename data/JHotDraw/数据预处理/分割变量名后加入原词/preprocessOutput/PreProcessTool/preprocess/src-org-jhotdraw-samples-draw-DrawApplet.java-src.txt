DrawApplet draw applet java 2 2 1 1 2006 2006 07 07 15 15 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw samples sample draw draw import org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw draw draw action action import org org jhotdraw jhotdraw util util import java awt awt import java awt awt geom geom import java awt awt event event import java io io import java net net import java util util import javax javax swing swing import javax javax swing swing event event import org org jhotdraw jhotdraw xml xml DrawApplet draw applet author author wrandels wrandel version 2 2 1 1 2006 2006 07 07 15 15 Added add main method br 2 2 0 0 Changed change to to support support double precision precision coordinates coordinate br 1 1 0 0 Created create on on 10 10 Marz marz 2004 2004 13 13 22 22 public class DrawApplet draw applet extends JApplet j applet private final static String VERSION v e r s i o n 0 0 5 5 private final static String NAME n a m e JHotDraw jhotdraw PlasmaDraw plasma draw private DrawingPanel drawing panel drawingPanel drawing panel We we override override getParameter get parameter to to make make it it work work even even if we we have have no no Applet applet context context public String getParameter get parameter String name name try return super getParameter get parameter name name catch NullPointerException pointer e e return null Initializes initializ the the applet applet DrawApplet draw applet public void init init Set set look look and and feel feel try UIManager u i manager setLookAndFeel set look and feel UIManager u i manager getSystemLookAndFeelClassName get look and feel name catch Throwable throwable e e Do nothing nothing If we we can can t t set set the the desired desire look look and and feel feel UIManager u i manager does doe automaticaly automaticaly the the right right thing thing for us u Display display copyright copyright info info while we we are are loading loading the the data data Container container c c getContentPane get content pane c c setLayout set layout new BoxLayout box layout c c BoxLayout box layout Y y AXIS a x i s String labels label getAppletInfo get applet info split split Strings split split getAppletInfo get applet info for int i i 0 0 i i labels label length length i++ i++ c c add add new JLabel j label labels label i i length length 0 0 ? ? labels label i i We we load load the the data data using using a a worker worker thread thread new SwingWorker swing worker public Object construct construct Object result result try System out out println getParameter get parameter datafile datafile +getParameter +get parameter datafile datafile if getParameter get parameter data data null NanoXMLLiteDOMInput nano xml lite dom input domi domi new NanoXMLLiteDOMInput nano xml lite dom input new DrawFigureFactory draw figure factory new StringReader reader getParameter get parameter data data domi domi openElement open element PlasmaDraw plasma draw result result domi domi readObject read 0 0 else if getParameter get parameter datafile datafile null InputStream input stream in in null try URL u r l url url new URL u r l getDocumentBase get document base getParameter get parameter datafile datafile in in url url openConnection open connection getInputStream get input stream NanoXMLLiteDOMInput nano xml lite dom input domi domi new NanoXMLLiteDOMInput nano xml lite dom input new DrawFigureFactory draw figure factory in in domi domi openElement open element PlasmaDraw plasma draw result result domi domi readObject read 0 0 finally if in in null in in close close else result result null catch Throwable throwable t t result result t t return result result public void finished finish if getValue get value instanceof Throwable throwable Throwable throwable getValue get value printStackTrace print stack trace Container container c c getContentPane get content pane c c setLayout set layout new BorderLayout border layout c c removeAll remove all c c add add drawingPanel drawing panel new DrawingPanel drawing panel Object result result getValue get value initComponents init component if result result null if result result instanceof Drawing drawing setDrawing set drawing Drawing drawing result result else if result result instanceof Throwable throwable getDrawing get drawing add add new TextFigure text figure result result toString to Throwable throwable result result printStackTrace print stack trace c c validate validate start start private void setDrawing set drawing Drawing drawing d d drawingPanel drawing panel setDrawing set drawing d d private Drawing drawing getDrawing get drawing return drawingPanel drawing panel getDrawing get drawing public void setData set data String text text if text text null text text length length 0 0 StringReader reader in in new StringReader reader text text try NanoXMLLiteDOMInput nano xml lite dom input domi domi new NanoXMLLiteDOMInput nano xml lite dom input new DrawFigureFactory draw figure factory in in domi domi openElement open element PlasmaDraw plasma draw setDrawing set drawing Drawing drawing domi domi readObject read 0 0 catch Throwable throwable e e getDrawing get drawing clear clear TextFigure text figure tf tf new TextFigure text figure tf tf setText set text e e getMessage get message tf tf setBounds set bound new Point2D point2 d Double 10 10 10 10 new Point2D point2 d Double 100 100 100 100 getDrawing get drawing add add tf tf e e printStackTrace print stack trace finally if in in null in in close close public String getData get data CharArrayWriter writer out out new CharArrayWriter writer try NanoXMLLiteDOMOutput nano xml lite dom output domo domo new NanoXMLLiteDOMOutput nano xml lite dom output new DrawFigureFactory draw figure factory domo domo openElement open element PlasmaDraw plasma draw domo domo writeObject write getDrawing get drawing domo domo closeElement close element domo domo save save out out catch IOException i o e e TextFigure text figure tf tf new TextFigure text figure tf tf setText set text e e getMessage get message tf tf setBounds set bound new Point2D point2 d Double 10 10 10 10 new Point2D point2 d Double 100 100 100 100 getDrawing get drawing add add tf tf e e printStackTrace print stack trace finally if out out null out out close close return out out toString to public String getParameterInfo get parameter info return new String data data String the the data data to to be be displayed display by by this applet applet datafile datafile URL u r l an an URL u r l to to a a file containing contain the the data data to to be be displayed display by by this applet applet public String getAppletInfo get applet info return NAME+ n a m e+ Version +VERSION + v e r s i o n + + Copyright copyright \u00a9 \u00a9 2004 2004 2006 2006 \u00a9 \u00a9 Werner wern Randelshofer randelshof + + Alle alle Rights right Reserved reserve + + This software software is is based base on on + + JHotDraw jhotdraw \u00a9 \u00a9 1996 1996 1997 1997 IFA i f a Informatik informatik und und Erich erich Gamma gamma + + NanoXML nano xml \u00a9 \u00a9 2000 2000 2002 2002 Marc marc De de Scheemaecker scheemaeck + + + + JavaScript script code can can access access the the drawing drawing data data using using the the setData set data and and getData get data methods This method is is called call from from within within the the init init method to to initialize initialize the the form form WARNING w a r n i n g Do NOT n o t modify modify this code The the content content of of this method is is always alway regenerated regenerate by by the the Form form Editor editor editor editor fold fold defaultstate defaultstate collapsed collapse desc desc Generated generate Code GEN g e n BEGIN b e g i n initComponents init component private void initComponents init component toolButtonGroup tool button group new javax javax swing swing ButtonGroup button group editor editor fold fold GEN g e n END e n d initComponents init component public static void main String args SwingUtilities swing utility invokeLater late new Runnable runnable public void run run JFrame j frame f f new JFrame j frame JHotDraw jhotdraw PlasmaDraw plasma draw Applet applet f f setDefaultCloseOperation set close operation JFrame j frame EXIT e x i t ON o n CLOSE c l o s e DrawApplet draw applet a a new DrawApplet draw applet f f getContentPane get content pane add add a a a a init init f f setSize set size 500 500 400 400 f f setVisible set visible true a a start start Variables variable declaration declaration do not not modify modify GEN g e n BEGIN b e g i n variables variable private javax javax swing swing ButtonGroup button group toolButtonGroup tool button group End end of of variables variable declaration declaration GEN g e n END e n d variables variable 