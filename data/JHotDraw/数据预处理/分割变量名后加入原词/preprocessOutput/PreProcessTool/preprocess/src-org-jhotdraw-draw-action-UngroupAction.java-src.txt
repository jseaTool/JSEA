UngroupAction ungroup action java 1 1 1 1 2006 2006 07 07 12 12 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw draw draw action action import org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw undo undo import java util util import javax javax swing swing import javax javax swing swing undo undo UngroupAction ungroup action author author Werner wern Randelshofer randelshof version 1 1 1 1 2006 2006 07 07 12 12 Changed change to to support support any any CompositeFigure composite figure br 1 1 0 0 24 24 November november 2003 2003 Created create public class UngroupAction ungroup action extends AbstractSelectedAction select action public final static String ID selectionUngroup selection ungroup Creates create a a new instance instance private CompositeFigure composite figure prototype prototype Creates create a a new instance instance public UngroupAction ungroup action DrawingEditor drawing editor editor editor this editor editor new GroupFigure group figure public UngroupAction ungroup action DrawingEditor drawing editor editor editor CompositeFigure composite figure prototype prototype super editor editor this prototype prototype prototype prototype labels label configureAction configure action this ID Override override protected void updateEnabledState update enable state if getView get view null setEnabled set enable canUngroup can ungroup else setEnabled set enable false protected boolean canUngroup can ungroup return getView get view getSelectionCount get selection count 1 1 getView get view getSelectedFigures get select figure iterator iterator next next getClass get equals equal prototype prototype getClass get public void actionPerformed action perform java awt awt event event ActionEvent action event e e if canUngroup can ungroup final DrawingView drawing view view view getView get view final CompositeFigure composite figure group group CompositeFigure composite figure getView get view getSelectedFigures get select figure iterator iterator next next final LinkedList link list Figure figure ungroupedFigures ungroup figure new LinkedList link list Figure figure CompositeEdit composite edit edit edit new CompositeEdit composite edit labels label getString get selectionUngroup selection ungroup public void redo redo throws CannotRedoException cannot redo super redo redo ungroupFigures ungroup figure view view group group public void undo undo throws CannotUndoException cannot undo groupFigures group figure view view group group ungroupedFigures ungroup figure super undo undo fireUndoableEditHappened fire undoable edit happen edit edit ungroupedFigures ungroup figure addAll add all ungroupFigures ungroup figure view view group group fireUndoableEditHappened fire undoable edit happen edit edit public Collection collection Figure figure ungroupFigures ungroup figure DrawingView drawing view view view CompositeFigure composite figure group group LinkedList link list Figure figure figures figure new LinkedList link list Figure figure group group getChildren get child view view clearSelection clear selection group group basicRemoveAllChildren basic remove all child view view getDrawing get drawing basicAddAll basic add all figures figure view view getDrawing get drawing remove remove group group view view addToSelection add to selection figures figure return figures figure public void groupFigures group figure DrawingView drawing view view view CompositeFigure composite figure group group Collection collection Figure figure figures figure XXX x x x This code is is redundant redundant with with GroupAction group action Collection collection Figure figure sorted sort view view getDrawing get drawing sort sort figures figure view view getDrawing get drawing basicRemoveAll basic remove all figures figure view view clearSelection clear selection view view getDrawing get drawing add add group group group group willChange will change for Figure figure f f sorted sort group group basicAdd basic add f f group group changed change view view addToSelection add to selection group group 