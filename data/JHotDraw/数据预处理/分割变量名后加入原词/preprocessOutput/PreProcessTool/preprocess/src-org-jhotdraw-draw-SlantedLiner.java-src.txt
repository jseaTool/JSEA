SlantedLiner slant liner java 1 1 0 0 24 24 Januar januar 2006 2006 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw xml xml DOMInput dom input import org org jhotdraw jhotdraw xml xml DOMOutput dom output import org org jhotdraw jhotdraw xml xml DOMStorable dom storable import java util util import java awt awt import java awt awt geom geom import org org jhotdraw jhotdraw geom geom SlantedLiner slant liner author author Werner wern Randelshofer randelshof version 1 1 0 0 24 24 Januar januar 2006 2006 Created create public class SlantedLiner slant liner implements Liner liner DOMStorable dom storable private double slantSize slant size Creates create a a new instance instance public SlantedLiner slant liner this 20 20 public SlantedLiner slant liner double slantSize slant size this slantSize slant size slantSize slant size public Collection collection Handle handle createHandles create handle BezierPath bezi path path path return null public void lineout lineout ConnectionFigure connection figure figure figure BezierPath bezi path path path LineConnectionFigure line connection figure figure figure getBezierPath get bezi path Connector connector start start figure figure getStartConnector get start connector Connector connector end end figure figure getEndConnector get end connector if start start null || || end end null || || path path null return Ensure ensure path path has ha exactly exactly four four nodes node while path path size size 4 4 path path add add 1 1 new BezierPath bezi path Node node 0 0 0 0 while path path size size 4 4 path path remove remove 1 1 Point2D point2 d Double sp sp start start findStart find start figure figure Point2D point2 d Double ep ep end end findEnd find end figure figure sp sp figure figure getStartPoint get start point ep ep figure figure getEndPoint get end point Rectangle2D rectangle2 d Double sb sb start start getBounds get bound Rectangle2D rectangle2 d Double eb eb end end getBounds get bound path path get get 0 0 moveTo move to sp sp path path get get path path size size 1 1 moveTo move to ep ep int outcode outcode sb sb outcode outcode sp sp if outcode outcode 0 0 outcode outcode Geom geom outcode outcode sb sb eb eb if outcode outcode Geom geom OUT o u t RIGHT r i g h t 0 0 path path get get 1 1 moveTo move to sp sp x x + + slantSize slant size sp sp y y else if outcode outcode Geom geom OUT o u t LEFT l e f t 0 0 path path get get 1 1 moveTo move to sp sp x x slantSize slant size sp sp y y else if outcode outcode Geom geom OUT o u t BOTTOM b o t t o m 0 0 path path get get 1 1 moveTo move to sp sp x x sp sp y y + + slantSize slant size else path path get get 1 1 moveTo move to sp sp x x sp sp y y slantSize slant size outcode outcode eb eb outcode outcode ep ep if outcode outcode 0 0 outcode outcode Geom geom outcode outcode eb eb sb sb if outcode outcode Geom geom OUT o u t RIGHT r i g h t 0 0 path path get get 2 2 moveTo move to ep ep x x + + slantSize slant size ep ep y y else if outcode outcode Geom geom OUT o u t LEFT l e f t 0 0 path path get get 2 2 moveTo move to ep ep x x slantSize slant size ep ep y y else if outcode outcode Geom geom OUT o u t BOTTOM b o t t o m 0 0 path path get get 2 2 moveTo move to ep ep x x ep ep y y + + slantSize slant size else path path get get 2 2 moveTo move to ep ep x x ep ep y y slantSize slant size path path invalidatePath invalidate path public void read read DOMInput dom input in in slantSize slant size in in getAttribute get attribute slant slant 20d 20d public void write write DOMOutput dom output out out out out addAttribute add attribute slant slant slantSize slant size public Liner liner clone clone try return Liner liner super clone clone catch CloneNotSupportedException clone not support ex ex InternalError internal error new InternalError internal ex ex getMessage get message error initCause init cause ex ex throw error 