ChopBoxConnector chop box connector java 2 2 1 1 2006 2006 03 03 22 22 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org ??? ??? package org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw util util import java awt awt import java awt awt geom geom import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key import org org jhotdraw jhotdraw geom geom A a ChopBoxConnector chop box connector locates locate connection connection points point by by choping chop the the connection connection between between the the centers center of of the the two two figures figure at at the the display display box box p p XXX x x x Replace replace all all Chop chop Connectors connector by by a a single single ChopToCenterConnector chop to center connector and and move move method chop chop Point2D point2 d Double into into Figure figure interface see see Connector connector author author Werner wern Randelshofer randelshof version 2 2 1 1 2006 2006 03 03 22 22 Support support for total total stroke stroke width width added add br 2 2 0 0 2006 2006 01 01 14 14 Changed change to to support support double precision precision coordinates coordinate br 1 1 0 0 2003 2003 12 12 01 01 Derived derive from from JHotDraw jhotdraw 5 5 4b1 4b1 public class ChopBoxConnector chop box connector extends AbstractConnector connector Creates create a a new instance instance Only only used use for storable storable public ChopBoxConnector chop box connector public ChopBoxConnector chop box connector Figure figure owner owner super owner owner public Point2D point2 d Double findStart find start ConnectionFigure connection figure connection connection Figure figure startFigure start figure connection connection getStartConnector get start connector getOwner get owner Point2D point2 d Double from from if connection connection getPointCount get point count 2 2 || || connection connection getLiner get liner null if connection connection getEndConnector get end connector null from from connection connection getEndPoint get end point else Rectangle2D rectangle2 d Double r1 r1 getConnectorTarget get connector target connection connection getEndConnector get end connector getOwner get owner getBounds get bound from from new Point2D point2 d Double r1 r1 x x + + r1 r1 width width 2 2 r1 r1 y y + + r1 r1 height height 2 2 else from from connection connection getPoint get point 1 1 return chop chop startFigure start figure from from public Point2D point2 d Double findEnd find end ConnectionFigure connection figure connection connection Figure figure endFigure end figure connection connection getEndConnector get end connector getOwner get owner Point2D point2 d Double from from if connection connection getPointCount get point count 2 2 || || connection connection getLiner get liner null if connection connection getStartConnector get start connector null from from connection connection getStartPoint get start point else Rectangle2D rectangle2 d Double r1 r1 getConnectorTarget get connector target connection connection getStartConnector get start connector getOwner get owner getBounds get bound from from new Point2D point2 d Double r1 r1 x x + + r1 r1 width width 2 2 r1 r1 y y + + r1 r1 height height 2 2 else from from connection connection getPoint get point connection connection getPointCount get point count 2 2 return chop chop endFigure end figure from from protected Point2D point2 d Double chop chop Figure figure target target Point2D point2 d Double from from target target getConnectorTarget get connector target target target Rectangle2D rectangle2 d Double r r target target getBounds get bound if STROKE s t r o k e COLOR c o l o r get get target target null double grow grow switch STROKE s t r o k e PLACEMENT p l a c e m e n t get get target target case CENTER c e n t e r default grow grow AttributeKeys attribute key getStrokeTotalWidth get stroke total width target target 2d 2d break case OUTSIDE o u t s e grow grow AttributeKeys attribute key getStrokeTotalWidth get stroke total width target target break case INSIDE i n s e grow grow 0d 0d break Geom geom grow grow r r grow grow grow grow return Geom geom angleToPoint angle to point r r Geom geom pointToAngle point to angle r r from from 