LoadRecentAction load recent action java 1 1 0 0 June june 15 15 2006 2006 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw app app action action import org org jhotdraw jhotdraw util util import org org jhotdraw jhotdraw gui gui import org org jhotdraw jhotdraw gui gui event event import java awt awt import java awt awt event event import java util util import java util util prefs pref import javax javax swing swing import java io io import org org jhotdraw jhotdraw app app Application application import org org jhotdraw jhotdraw app app Project project LoadRecentAction load recent action author author Werner wern Randelshofer randelshof version 1 1 0 0 June june 15 15 2006 2006 Created create public class LoadRecentAction load recent action extends SaveBeforeAction save before action public final static String ID loadRecent load recent private File file Creates create a a new instance instance public LoadRecentAction load recent action Application application app app File file super app app this file file putValue put value Action action NAME n a m e file getName get name public void doIt it final Project project project project final Application application app app getApplication get application app app setEnabled set enable true If there there is is another another project project with with we we set set the the multiple multiple open open id of of our our project project to to max max multiple multiple open open id + + 1 1 int multipleOpenId multiple open 1 1 for Project project aProject a project app app projects project if aProject a project project project aProject a project getFile get null aProject a project getFile get equals equal file multipleOpenId multiple open Math math max max multipleOpenId multiple open aProject a project getMultipleOpenId get multiple open + + 1 1 project project setMultipleOpenId set multiple open multipleOpenId multiple open Open open the the file project project execute execute new Worker worker public Object construct construct try project project read read file return null catch Throwable throwable e e return e e public void finished finish Object value value fileOpened open project project file value value protected void fileOpened open final Project project project project File file Object value value final Application application app app getApplication get application if value value null project project setFile set file project project setEnabled set enable true Frame frame w w Frame frame SwingUtilities swing utility getWindowAncestor get window ancestor project project getComponent get component if w w null w w setExtendedState set extend state w w getExtendedState get extend state Frame frame ICONIFIED i c o n i f i e d w w toFront to front project project getComponent get component requestFocus request focus if app app null app app setEnabled set enable true else if value value instanceof Throwable throwable Throwable throwable value value printStackTrace print stack trace JSheet j sheet showMessageSheet show message sheet project project getComponent get component html html +UIManager + u i manager getString get OptionPane option pane css cs + + b b Couldn couldn t t open open the the file \ \ +file+ +file+ \ \ b b br + + value value JOptionPane j option pane ERROR e r r o r MESSAGE m e s s a g e new SheetListener sheet listener public void optionSelected option select SheetEvent sheet event evt evt app app dispose dispose project project 