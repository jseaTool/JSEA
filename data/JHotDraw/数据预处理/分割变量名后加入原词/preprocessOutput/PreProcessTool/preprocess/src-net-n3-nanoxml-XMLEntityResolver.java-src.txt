XMLEntityResolver xml entity resolv java NanoXML nano xml Java $Revision $ revision 1 1 4 4 $ $ $Date $ date 2002 2002 01 01 04 04 21 21 03 03 29 29 $ $ $Name $ name RELEASE r e l e a s e 2 2 2 2 1 1 $ $ This file is is part part of of NanoXML nano xml 2 2 for Java Copyright copyright C c 2000 2000 2002 2002 Marc marc De de Scheemaecker scheemaeck All all Rights right Reserved reserve This software software is is provided provide as a is is without without any any express express or or implied imply warranty warranty In in no no event event will will the the authors author be be held hold liable liable for any any damages damage arising arise from from the the use use of of this software software Permission permission is is granted grant to to anyone anyone to to use use this software software for any any purpose purpose including include commercial commercial applications application and and to to alter alter it it and and redistribute redistribute it it freely freely subject subject to to the the following following restrictions restriction 1 1 The the origin origin of of this software software must must not not be be misrepresented misrepresent you you must must not not claim claim that that you you wrote write the the original original software software If you you use use this software software in in a a product product an an acknowledgment acknowledgment in in the the product product documentation documentation would would be be appreciated appreciate but but is is not not required require 2 2 Altered alter source source versions must must be be plainly plainly marked mark as a such such and and must must not not be be misrepresented misrepresent as a being being the the original original software software 3 3 This notice notice may may not not be be removed remove or or altered alter from from any any source source distribution distribution package net net n3 n3 nanoxml nanoxml import java util util Hashtable hashtable import java io io Reader reader import java io io StringReader reader An an XMLEntityResolver xml entity resolv resolves resolve entities entity author author Marc marc De de Scheemaecker scheemaeck version $Name $ name RELEASE r e l e a s e 2 2 2 2 1 1 $ $ $Revision $ revision 1 1 4 4 $ $ public class XMLEntityResolver xml entity resolv implements IXMLEntityResolver i xml entity resolv The the entities entity private Hashtable hashtable entities entity Initializes initializ the the resolver resolv public XMLEntityResolver xml entity resolv this entities entity new Hashtable hashtable this entities entity put put amp amp 38 38 this entities entity put put quot 34 34 this entities entity put put apos apo 39 39 this entities entity put put lt lt 60 60 this entities entity put put gt 62 62 Cleans clean up up the the object when when it it s s destroyed destroy protected void finalize finalize throws Throwable throwable this entities entity clear clear this entities entity null super finalize finalize Adds add an an internal internal entity entity param name name the the name name of of the the entity entity param value value the the value value of of the the entity entity public void addInternalEntity add internal entity String name name String value value if this entities entity containsKey contain key name name this entities entity put put name name value value Adds add an an external external entity entity param name name the the name name of of the the entity entity param publicID the the public ID of of the the entity entity which which may may be be null param systemID the the system ID of of the the entity entity public void addExternalEntity add external entity String name name String publicID String systemID if this entities entity containsKey contain key name name this entities entity put put name name new String publicID systemID Returns a a Java reader reader containing contain the the value value of of an an entity entity param xmlReader xml reader the the current current XML xml reader reader param name name the the name name of of the the entity entity return the the reader reader or or null if the the entity entity could could not not be be resolved resolve public Reader reader getEntity get entity IXMLReader i xml reader xmlReader xml reader String name name throws XMLParseException xml parse Object obj obj this entities entity get get name name if obj obj null return null else if obj obj instanceof java lang lang String return new StringReader reader String obj obj else String id String obj obj return this openExternalEntity open external entity xmlReader xml reader id 0 0 id 1 1 Returns true if an an entity entity is is external external param name name the the name name of of the the entity entity public boolean isExternalEntity is external entity String name name Object obj obj this entities entity get get name name return obj obj instanceof java lang lang String Opens open an an external external entity entity param xmlReader xml reader the the current current XML xml reader reader param publicID the the public ID which which may may be be null param systemID the the system ID return the the reader reader or or null if the the reader reader could could not not be be created create opened open protected Reader reader openExternalEntity open external entity IXMLReader i xml reader xmlReader xml reader String publicID String systemID throws XMLParseException xml parse String parentSystemID parent xmlReader xml reader getSystemID get try return xmlReader xml reader openStream open stream publicID systemID catch Exception e e throw new XMLParseException xml parse parentSystemID parent xmlReader xml reader getLineNr get line nr Could could not not open open external external entity entity + + at at system ID + + systemID 