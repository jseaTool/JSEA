TriangleRotationHandler triangle rotation handler java 1 1 0 0 June june 11 11 2006 2006 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org ??? ??? package org org jhotdraw jhotdraw draw draw import java awt awt import java awt awt geom geom import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key import org org jhotdraw jhotdraw geom geom A a Handle handle to to rotate rotate a a TriangleFigure triangle figure Based base on on RadiusHandle radius handle author author Werner wern Randelshofer randelshof Original original code by by Doug doug Lea lea dl at at gee gee Sun sun Mar mar 2 2 19 19 15 15 28 28 1997 1997 version 1 1 0 0 June june 11 11 2006 2006 Created create public class TriangleRotationHandler triangle rotation handler extends AbstractHandle handle private Rectangle rectangle centerBox center box private AttributeKeys attribute key Orientation orientation oldValue old value private AttributeKeys attribute key Orientation orientation newValue value Creates create a a new instance instance public TriangleRotationHandler triangle rotation handler TriangleFigure triangle figure owner owner super owner owner public boolean isCombinableWith is combinable with Handle handle h h return false private Point2D point2 d Double getLocation get location Rectangle2D rectangle2 d Double r r getOwner get owner getBounds get bound Point2D point2 d Double p p double offset offset getHandlesize get handlesize switch ORIENTATION o r i e n t a t i o n get get getOwner get owner case NORTH n o r t h default p p new Point2D point2 d Double r r x x + + r r width width 2d 2d r r y y + + offset offset break case NORTH n o r t h EAST e a s t p p new Point2D point2 d Double r r x x + + r r width width offset offset r r y y + + offset offset break case EAST e a s t p p new Point2D point2 d Double r r x x + + r r width width offset offset r r y y + + r r height height 2d 2d break case SOUTH s o u t h EAST e a s t p p new Point2D point2 d Double r r x x + + r r width width offset offset r r y y + + r r height height offset offset break case SOUTH s o u t h p p new Point2D point2 d Double r r x x + + r r width width 2d 2d r r y y + + r r height height offset offset break case SOUTH s o u t h WEST w e s t p p new Point2D point2 d Double r r x x + + offset offset r r y y + + r r height height offset offset break case WEST w e s t p p new Point2D point2 d Double r r x x + + offset offset r r y y + + r r height height 2d 2d break case NORTH n o r t h WEST w e s t p p new Point2D point2 d Double r r x x + + offset offset r r y y + + offset offset break return p p protected Rectangle rectangle basicGetBounds basic get bound Point point p p view view drawingToView drawing to view getLocation get location Rectangle rectangle r r new Rectangle rectangle p p r r grow grow getHandlesize get handlesize 2 2 getHandlesize get handlesize 2 2 return r r public void trackStart track start Point point anchor anchor int modifiersEx modifier ex oldValue old value ORIENTATION o r i e n t a t i o n get get getOwner get owner centerBox center box view view drawingToView drawing to view getOwner get owner getBounds get bound centerBox center box grow grow centerBox center box width width 3 3 centerBox center box height height 3 3 public void trackStep track step Point point anchor anchor Point point lead int modifiersEx modifier ex Rectangle rectangle leadRect rect new Rectangle rectangle lead switch Geom geom outcode outcode centerBox center box leadRect rect case Geom geom OUT o u t TOP t o p default newValue value AttributeKeys attribute key Orientation orientation NORTH n o r t h break case Geom geom OUT o u t TOP t o p | | Geom geom OUT o u t RIGHT r i g h t newValue value AttributeKeys attribute key Orientation orientation NORTH n o r t h EAST e a s t break case Geom geom OUT o u t RIGHT r i g h t newValue value AttributeKeys attribute key Orientation orientation EAST e a s t break case Geom geom OUT o u t BOTTOM b o t t o m | | Geom geom OUT o u t RIGHT r i g h t newValue value AttributeKeys attribute key Orientation orientation SOUTH s o u t h EAST e a s t break case Geom geom OUT o u t BOTTOM b o t t o m newValue value AttributeKeys attribute key Orientation orientation SOUTH s o u t h break case Geom geom OUT o u t BOTTOM b o t t o m | | Geom geom OUT o u t LEFT l e f t newValue value AttributeKeys attribute key Orientation orientation SOUTH s o u t h WEST w e s t break case Geom geom OUT o u t LEFT l e f t newValue value AttributeKeys attribute key Orientation orientation WEST w e s t break case Geom geom OUT o u t TOP t o p | | Geom geom OUT o u t LEFT l e f t newValue value AttributeKeys attribute key Orientation orientation NORTH n o r t h WEST w e s t break FIXME f i x m e Add add undo undo redo redo support support getOwner get owner willChange will change ORIENTATION o r i e n t a t i o n basicSet basic set getOwner get owner newValue value getOwner get owner changed change updateBounds update bound public void draw draw Graphics2D graphics2 d g g drawDiamond draw diamond g g Color color yellow yellow Color color black black public void trackEnd track end Point point anchor anchor Point point lead int modifiersEx modifier ex if newValue value oldValue old value fireUndoableEditHappened fire undoable edit happen new AttributeChangeEdit attribute change edit getOwner get owner ORIENTATION o r i e n t a t i o n oldValue old value newValue value 