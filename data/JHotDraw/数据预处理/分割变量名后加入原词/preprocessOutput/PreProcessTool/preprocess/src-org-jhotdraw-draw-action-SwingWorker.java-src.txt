package org org jhotdraw jhotdraw draw draw action action import javax javax swing swing SwingUtilities swing utility This is is the the 3rd 3rd version of of SwingWorker swing worker also also known know as a SwingWorker swing worker 3 3 an an abstract class that that you you subclass subclass to to perform perform GUI g u i related relate work work in in a a dedicated dedicate thread thread For instructions instruction on on using using this class see see http http java sun sun com com docs doc books book tutorial tutorial uiswing uisw misc misc threads thread html html Note note that that the the API a p i changed change slightly slightly in in the the 3rd 3rd version You you must must now now invoke start start on on the the SwingWorker swing worker after after creating create it it author author SUN s u n Microsystems microsystem Inc inc public abstract class SwingWorker swing worker private Object value value see see getValue get value setValue set value private Thread thread thread thread Class to to maintain maintain reference reference to to current current worker worker thread thread under under separate separate synchronization synchronization control control private static class ThreadVar thread var private Thread thread thread thread ThreadVar thread var Thread thread t t thread thread t t synchronized Thread thread get get return thread thread synchronized void clear clear thread thread null private ThreadVar thread var threadVar thread var Start start a a thread thread that that will will call call the the code construct construct code method and and then then exit exit public SwingWorker swing worker final Runnable runnable doFinished finish new Runnable runnable public void run run finished finish Runnable runnable doConstruct construct new Runnable runnable public void run run try setValue set value construct construct finally threadVar thread var clear clear SwingUtilities swing utility invokeLater late doFinished finish Thread thread t t new Thread thread doConstruct construct SwingWorker swing worker threadVar thread var new ThreadVar thread var t t Compute compute the the value value to to be be returned by by the the code get get code method public abstract Object construct construct Called call on on the the event event dispatching dispatch thread thread not not on on the the worker worker thread thread after after the the code construct construct code method has ha returned public void finished finish Return the the value value created create by by the the code construct construct code method Returns null if either eith the the constructing construct thread thread or or the the current current thread thread was wa interrupted interrupt before before a a value value was wa produced produce return the the value value created create by by the the code construct construct code method public Object get get while true Thread thread t t threadVar thread var get get if t t null return getValue get value try t t join join catch InterruptedException interrupt e e Thread thread currentThread current thread interrupt interrupt propagate propagate return null Get get the the value value produced produce by by the the worker worker thread thread or or null if it it hasn hasn t t been be constructed construct yet yet protected synchronized Object getValue get value return value value A a new method that that interrupts interrupt the the worker worker thread thread Call call this method to to force force the the worker worker to to stop stop what what it it s s doing public void interrupt interrupt Thread thread t t threadVar thread var get get if t t null t t interrupt interrupt threadVar thread var clear clear Set set the the value value produced produce by by worker worker thread thread private synchronized void setValue set value Object x x value value x x Start start the the worker worker thread thread public void start start Thread thread t t threadVar thread var get get if t t null t t start start 