EllipseFigure ellipse figure java 2 2 3 3 2006 2006 06 06 17 17 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org ??? ??? package org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw geom geom Geom geom import org org jhotdraw jhotdraw util util import java awt awt import java awt awt geom geom import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key EllipseFigure ellipse figure author author Werner wern Randelshofer randelshof version 2 2 3 3 2006 2006 06 06 17 17 Added add method chop chop Point2D point2 d Double br 2 2 2 2 2006 2006 05 05 19 19 Support support for stroke stroke placement placement added add br 2 2 1 1 2006 2006 03 03 22 22 Method getFigureDrawBounds get figure draw bound added add br 2 2 0 0 2006 2006 01 01 14 14 Changed change to to support support double precison coordinates coordinate br 1 1 0 0 2003 2003 12 12 01 01 Derived derive from from JHotDraw jhotdraw 5 5 4b1 4b1 public class EllipseFigure ellipse figure extends AttributedFigure attribute figure private Ellipse2D ellipse2 d Double ellipse ellipse Creates create a a new instance instance public EllipseFigure ellipse figure this 0 0 0 0 0 0 0 0 public EllipseFigure ellipse figure double x x double y y double width width double height height ellipse ellipse new Ellipse2D ellipse2 d Double x x y y width width height height setFillColor set fill color Color color white white setStrokeColor set stroke color Color color black black setAttributeEnabled set attribute enable TEXT t e x t COLOR c o l o r false DRAWING d r a w i n g SHAPE s h a p e AND a n d BOUNDS b o u n d s ATTRIBUTES a t t r i b u t e s EDITING e d i t i n g CONNECTING c o n n e c t i n g public Connector connector findConnector find connector Point2D point2 d Double p p ConnectionFigure connection figure prototype prototype return new ChopEllipseConnector chop ellipse connector this public Connector connector findCompatibleConnector find compatible connector Connector connector c c boolean isStartConnector is start connector return new ChopEllipseConnector chop ellipse connector this COMPOSITE c o m p o s i t e FIGURES f i g u r e s CLONING c l o n i n g EVENT e v e n t HANDLING h a n d l i n g public Rectangle2D rectangle2 d Double getBounds get bound return Rectangle2D rectangle2 d Double ellipse ellipse getBounds2D get bounds2 d public Rectangle2D rectangle2 d Double getFigureDrawBounds get figure draw bound Rectangle2D rectangle2 d Double r r Rectangle2D rectangle2 d Double ellipse ellipse getBounds2D get bounds2 d double grow grow AttributeKeys attribute key getPerpendicularHitGrowth get perpendicular hit growth this Geom geom grow grow r r grow grow grow grow return r r protected void drawFill draw fill Graphics2D graphics2 d g g Ellipse2D ellipse2 d Double r r Ellipse2D ellipse2 d Double ellipse ellipse clone clone double grow grow AttributeKeys attribute key getPerpendicularFillGrowth get perpendicular fill growth this r r x x grow grow r r y y grow grow r r width width + + grow grow 2 2 r r height height + + grow grow 2 2 if r r width width 0 0 r r height height 0 0 g g fill fill r r protected void drawStroke draw stroke Graphics2D graphics2 d g g Ellipse2D ellipse2 d Double r r Ellipse2D ellipse2 d Double ellipse ellipse clone clone double grow grow AttributeKeys attribute key getPerpendicularDrawGrowth get perpendicular draw growth this r r x x grow grow r r y y grow grow r r width width + + grow grow 2 2 r r height height + + grow grow 2 2 if r r width width 0 0 r r height height 0 0 g g draw draw r r Checks check if a a Point2D point2 d Double is is inside inside the the figure figure public boolean contains contain Point2D point2 d Double p p Ellipse2D ellipse2 d Double r r Ellipse2D ellipse2 d Double ellipse ellipse clone clone double grow grow AttributeKeys attribute key getPerpendicularHitGrowth get perpendicular hit growth this r r x x grow grow r r y y grow grow r r width width + + grow grow 2 2 r r height height + + grow grow 2 2 return r r contains contain p p public void basicSetBounds basic set bound Point2D point2 d Double anchor anchor Point2D point2 d Double lead ellipse ellipse x x Math math min min anchor anchor x x lead x x ellipse ellipse y y Math math min min anchor anchor y y lead y y ellipse ellipse width width Math math max max 0 0 1 1 Math math abs ab lead x x anchor anchor x x ellipse ellipse height height Math math max max 0 0 1 1 Math math abs ab lead y y anchor anchor y y Transforms transform the the figure figure param tx tx the the transformation transformation public void basicTransform basic transform AffineTransform affine transform tx tx Point2D point2 d Double anchor anchor getStartPoint get start point Point2D point2 d Double lead getEndPoint get end point basicSetBounds basic set bound Point2D point2 d Double tx tx transform transform anchor anchor anchor anchor Point2D point2 d Double tx tx transform transform lead lead public EllipseFigure ellipse figure clone clone EllipseFigure ellipse figure that that EllipseFigure ellipse figure super clone clone that that ellipse ellipse Ellipse2D ellipse2 d Double this ellipse ellipse clone clone return that that public void restoreTo restore to Object geometry geometry Ellipse2D ellipse2 d Double r r Ellipse2D ellipse2 d Double geometry geometry ellipse ellipse x x r r x x ellipse ellipse y y r r y y ellipse ellipse width width r r width width ellipse ellipse height height r r height height public Object getRestoreData get restore data return ellipse ellipse clone clone 