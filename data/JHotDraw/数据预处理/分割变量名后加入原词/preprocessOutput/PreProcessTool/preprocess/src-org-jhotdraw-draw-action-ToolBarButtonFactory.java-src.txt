ToolBarButtonFactory tool bar button factory java 1 1 2 2 2006 2006 07 07 16 16 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw draw draw action action import org org jhotdraw jhotdraw util util import java awt awt import java awt awt event event import java beans bean import java text text import java util util import javax javax swing swing import javax javax swing swing text text import org org jhotdraw jhotdraw app app action action import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key import org org jhotdraw jhotdraw geom geom import org org jhotdraw jhotdraw draw draw ToolBarButtonFactory tool bar button factory author author Werner wern Randelshofer randelshof version 1 1 2 2 2006 2006 07 07 16 16 Split split some some methods up up for better better reuse reuse br 1 1 1 1 2006 2006 03 03 27 27 Font font exclusion exclusion list list updated update br 1 1 0 0 13 13 Februar februar 2006 2006 Created create public class ToolBarButtonFactory tool bar button factory public final static Map map String Color color DEFAULT d e f a u l t COLORS c o l o r s static LinkedHashMap link hash map String Color color m m new LinkedHashMap link hash map String Color color m m put put Cayenne cayenne new Color color 128 128 0 0 0 0 m m put put Asparagus asparagus new Color color 128 128 128 128 0 0 m m put put Clover clover new Color color 0 0 128 128 0 0 m m put put Teal teal new Color color 0 0 128 128 128 128 m m put put Midnight midnight new Color color 0 0 0 0 128 128 m m put put Plum plum new Color color 128 128 0 0 128 128 m m put put Tin tin new Color color 127 127 127 127 127 127 m m put put Nickel nickel new Color color 128 128 128 128 128 128 m m put put Maraschino maraschino new Color color 255 255 0 0 0 0 m m put put Lemon lemon new Color color 255 255 255 255 0 0 m m put put Spring spring new Color color 0 0 255 255 0 0 m m put put Turquoise turquoise new Color color 0 0 255 255 255 255 m m put put Blueberry blueberry new Color color 0 0 0 0 255 255 m m put put Magenta magenta new Color color 255 255 0 0 255 255 m m put put Steel steel new Color color 102 102 102 102 102 102 m m put put Aluminium aluminium new Color color 153 153 153 153 153 153 m m put put Salmon salmon new Color color 255 255 102 102 102 102 m m put put Banana banana new Color color 255 255 255 255 102 102 m m put put Flora flora new Color color 102 102 255 255 102 102 m m put put Ice ice new Color color 102 102 255 255 255 255 m m put put Orchid orchid new Color color 102 102 102 102 255 255 m m put put Bubblegum bubblegum new Color color 255 255 102 102 255 255 m m put put Iron iron new Color color 76 76 76 76 76 76 m m put put Magnesium magnesium new Color color 179 179 179 179 179 179 m m put put Mocha mocha new Color color 128 128 64 64 0 0 m m put put Fern fern new Color color 64 64 128 128 0 0 m m put put Moss moss new Color color 0 0 128 128 64 64 m m put put Ocean ocean new Color color 0 0 64 64 128 128 m m put put Eggplant eggplant new Color color 64 64 0 0 128 128 m m put put Maroon maroon new Color color 128 128 0 0 64 64 m m put put Tungsten tungsten new Color color 51 51 51 51 51 51 m m put put Silver silver new Color color 204 204 204 204 204 204 m m put put Tangerine tangerine new Color color 255 255 128 128 0 0 m m put put Lime lime new Color color 128 128 255 255 0 0 m m put put Sea sea Foam foam new Color color 0 0 255 255 128 128 m m put put Aqua aqua new Color color 0 0 128 128 255 255 m m put put Grape grape new Color color 128 128 0 0 255 255 m m put put Strawberry strawberry new Color color 255 255 0 0 128 128 m m put put Lead new Color color 25 25 25 25 25 25 m m put put Mercury mercury new Color color 230 230 230 230 230 230 m m put put Cantaloupe cantaloupe new Color color 255 255 204 204 102 102 m m put put Honeydew honeydew new Color color 204 204 255 255 102 102 m m put put Spindrift spindrift new Color color 102 102 255 255 204 204 m m put put Sky sky new Color color 102 102 204 204 255 255 m m put put Lavender lavender new Color color 204 204 102 102 255 255 m m put put Carnation carnation new Color color 255 255 111 111 207 207 m m put put Licorice licorice new Color color 0 0 0 0 0 0 m m put put Snow snow new Color color 255 255 255 255 255 255 m m put put Transparent transparent null DEFAULT d e f a u l t COLORS c o l o r s Collections collection unmodifiableMap unmodifiable map m m private static class ToolButtonListener tool button listener implements ItemListener item listener private Tool tool tool tool private DrawingEditor drawing editor editor editor public ToolButtonListener tool button listener Tool tool t t DrawingEditor drawing editor editor editor this tool tool t t this editor editor editor editor public void itemStateChanged item state change ItemEvent item event evt evt if evt evt getStateChange get state change ItemEvent item event SELECTED s e l e c t e d editor editor setTool set tool tool tool Prevent prevent instance instance creation creation private ToolBarButtonFactory tool bar button factory public static Collection collection Action action createDrawingActions create drawing action DrawingEditor drawing editor editor editor LinkedList link list Action action a a new LinkedList link list Action action a a add add new CutAction cut action a a add add new CopyAction copy action a a add add new PasteAction paste action a a add add new SelectAllAction select all action a a add add new SelectSameAction select same action editor editor return a a public static Collection collection Action action createSelectionActions create selection action DrawingEditor drawing editor editor editor LinkedList link list Action action a a new LinkedList link list Action action a a add add new DuplicateAction duplicate action a a add add null separator separator a a add add new GroupAction group action editor editor a a add add new UngroupAction ungroup action editor editor a a add add null separator separator a a add add new MoveToFrontAction move to front action editor editor a a add add new MoveToBackAction move to back action editor editor return a a public static void addSelectionToolTo add selection tool to JToolBar j tool bar tb tb final DrawingEditor drawing editor editor editor addSelectionToolTo add selection tool to tb tb editor editor createDrawingActions create drawing action editor editor createSelectionActions create selection action editor editor public static void addSelectionToolTo add selection tool to JToolBar j tool bar tb tb final DrawingEditor drawing editor editor editor Collection collection Action action drawingActions drawing action Collection collection Action action selectionActions selection action ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JToggleButton j toggle button t t Tool tool tool tool HashMap hash map String Object attributes attribute ButtonGroup button group group group if tb tb getClientProperty get client property toolButtonGroup tool button group instanceof ButtonGroup button group group group ButtonGroup button group tb tb getClientProperty get client property toolButtonGroup tool button group else group group new ButtonGroup button group tb tb putClientProperty put client property toolButtonGroup tool button group group group Selection selection tool tool Tool tool selectionTool selection tool new DelegationSelectionTool delegation selection tool drawingActions drawing action selectionActions selection action editor editor setTool set tool selectionTool selection tool t t new JToggleButton j toggle button final JToggleButton j toggle button defaultToolButton tool button t t ToolListener tool listener toolHandler tool handler if tb tb getClientProperty get client property toolHandler tool handler instanceof ToolListener tool listener toolHandler tool handler ToolListener tool listener tb tb getClientProperty get client property toolHandler tool handler else toolHandler tool handler new ToolListener tool listener public void toolStarted tool start ToolEvent tool event event event public void toolDone tool ToolEvent tool event event event defaultToolButton tool button setSelected set select true public void areaInvalidated area invalidate ToolEvent tool event e e tb tb putClientProperty put client property toolHandler tool handler toolHandler tool handler labels label configureToolBarButton configure tool bar button t t selectionTool selection tool t t setSelected set select true t t addItemListener add item listener new ToolButtonListener tool button listener selectionTool selection tool editor editor t t setFocusable set focusable false group group add add t t tb tb add add t t Method addSelectionToolTo add selection tool to must must have have been be invoked prior prior to to this on on the the JToolBar j tool bar public static void addToolTo add tool to JToolBar j tool bar tb tb DrawingEditor drawing editor editor editor Tool tool tool tool String labelKey label key ResourceBundleUtil resource bundle util labels label ButtonGroup button group group group ButtonGroup button group tb tb getClientProperty get client property toolButtonGroup tool button group ToolListener tool listener toolHandler tool handler ToolListener tool listener tb tb getClientProperty get client property toolHandler tool handler JToggleButton j toggle button t t new JToggleButton j toggle button labels label configureToolBarButton configure tool bar button t t labelKey label key t t addItemListener add item listener new ToolButtonListener tool button listener tool tool editor editor t t setFocusable set focusable false tool tool addToolListener add tool listener toolHandler tool handler group group add add t t tb tb add add t t public static void addZoomButtonsTo add zoom button to JToolBar j tool bar bar bar final DrawingEditor drawing editor editor editor bar bar add add createZoomButton create zoom button editor editor public static AbstractButton button createZoomButton create zoom button final DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label final JPopupButton j popup button zoomPopupButton zoom popup button new JPopupButton j popup button labels label configureToolBarButton configure tool bar button zoomPopupButton zoom popup button viewZoom view zoom zoomPopupButton zoom popup button setFocusable set focusable false if editor editor getDrawingViews get drawing view size size 0 0 zoomPopupButton zoom popup button setText set text 100 100 % % else zoomPopupButton zoom popup button setText set text int editor editor getDrawingViews get drawing view iterator iterator next next getScaleFactor get scale factor 100 100 + + % % editor editor addPropertyChangeListener add property change listener new PropertyChangeListener property change listener public void propertyChange property change PropertyChangeEvent property change event evt evt String constants constant are are interned intern if evt evt getPropertyName get property name focusedView focus view if evt evt getNewValue get value null zoomPopupButton zoom popup button setText set text 100 100 % % else zoomPopupButton zoom popup button setText set text int editor editor getFocusedView get focus view getScaleFactor get scale factor 100 100 + + % % double factors factor 16 16 8 8 5 5 4 4 3 3 2 2 1 1 5 5 1 1 25 25 1 1 0 0 75 75 0 0 5 5 0 0 25 25 0 0 10 10 for int i i 0 0 i i factors factor length length i++ i++ zoomPopupButton zoom popup button add add new ZoomEditorAction zoom editor action editor editor factors factor i i zoomPopupButton zoom popup button public void actionPerformed action perform java awt awt event event ActionEvent action event e e super actionPerformed action perform e e zoomPopupButton zoom popup button setText set text int editor editor getView get view getScaleFactor get scale factor 100 100 + + % % zoomPopupButton zoom popup button setPreferredSize set prefer size new Dimension dimension 16 16 16 16 zoomPopupButton zoom popup button setFocusable set focusable false return zoomPopupButton zoom popup button public static AbstractButton button createZoomButton create zoom button final DrawingView drawing view view view ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label final JPopupButton j popup button zoomPopupButton zoom popup button new JPopupButton j popup button labels label configureToolBarButton configure tool bar button zoomPopupButton zoom popup button viewZoom view zoom zoomPopupButton zoom popup button setFocusable set focusable false zoomPopupButton zoom popup button setText set text int view view getScaleFactor get scale factor 100 100 + + % % view view addPropertyChangeListener add property change listener new PropertyChangeListener property change listener public void propertyChange property change PropertyChangeEvent property change event evt evt String constants constant are are interned intern if evt evt getPropertyName get property name scaleFactor scale factor zoomPopupButton zoom popup button setText set text int view view getScaleFactor get scale factor 100 100 + + % % double factors factor 5 5 4 4 3 3 2 2 1 1 5 5 1 1 25 25 1 1 0 0 75 75 0 0 5 5 0 0 25 25 0 0 10 10 for int i i 0 0 i i factors factor length length i++ i++ zoomPopupButton zoom popup button add add new ZoomAction zoom action view view factors factor i i zoomPopupButton zoom popup button public void actionPerformed action perform java awt awt event event ActionEvent action event e e super actionPerformed action perform e e zoomPopupButton zoom popup button setText set text int view view getScaleFactor get scale factor 100 100 + + % % zoomPopupButton zoom popup button setPreferredSize set prefer size new Dimension dimension 16 16 16 16 zoomPopupButton zoom popup button setFocusable set focusable false return zoomPopupButton zoom popup button Creates create toolbar toolbar buttons button and and adds add them them to to the the specified specify JToolBar j tool bar public static void addAttributesButtonsTo add attribute button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JButton j button b b b b bar bar add add new PickAttributesAction pick attribute action editor editor b b setFocusable set focusable false b b bar bar add add new ApplyAttributesAction apply attribute action editor editor b b setFocusable set focusable false bar bar addSeparator add separator addColorButtonsTo add color button to bar bar editor editor bar bar addSeparator add separator addStrokeButtonsTo add stroke button to bar bar editor editor bar bar addSeparator add separator addFontButtonsTo add font button to bar bar editor editor public static void addColorButtonsTo add color button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label addColorButtonTo add color button to bar bar editor editor STROKE s t r o k e COLOR c o l o r DEFAULT d e f a u l t COLORS c o l o r s 8 8 attributeStrokeColor attribute stroke color labels label addColorButtonTo add color button to bar bar editor editor FILL f i l l COLOR c o l o r DEFAULT d e f a u l t COLORS c o l o r s 8 8 attributeFillColor attribute fill color labels label addColorButtonTo add color button to bar bar editor editor TEXT t e x t COLOR c o l o r DEFAULT d e f a u l t COLORS c o l o r s 8 8 attributeTextColor attribute text color labels label param colorMap color map a a Map map with with named name colors color This is is usually usually a a LinkedHashMap link hash map so so that that the the colors color are are in in a a specific specific order order public static void addColorButtonTo add color button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor AttributeKey attribute key attributeKey attribute key Map map String Color color colorMap color map int columnCount column count String labelKey label key ResourceBundleUtil resource bundle util labels label final JPopupButton j popup button popupButton popup button new JPopupButton j popup button popupButton popup button setAction set action new DefaultAttributeAction attribute action editor editor attributeKey attribute key new Rectangle rectangle 0 0 0 0 22 22 22 22 popupButton popup button setColumnCount set column count columnCount column count false for Map map Entry entry String Color color entry entry colorMap color map entrySet entry set AttributeAction attribute action a a popupButton popup button add add a a new AttributeAction attribute action editor editor attributeKey attribute key entry entry getValue get value new ColorIcon color icon entry entry getValue get value a a putValue put value Action action SHORT s h o r t DESCRIPTION d e s c r i p t i o n entry entry getKey get key ImageIcon image icon chooserIcon chooser icon new ImageIcon image icon ToolBarButtonFactory tool bar button factory class getResource get resource org org jhotdraw jhotdraw draw draw action action images image showColorChooser show color chooser png png popupButton popup button add add new ColorChooserAction color chooser action editor editor attributeKey attribute key chooserIcon chooser icon labels label configureToolBarButton configure tool bar button popupButton popup button labelKey label key popupButton popup button setIcon set icon new ColorAttributeIcon color attribute icon editor editor attributeKey attribute key labels label getImageIcon get image icon labelKey label key ToolBarButtonFactory tool bar button factory class getImage get image popupButton popup button setFocusable set focusable false editor editor addPropertyChangeListener add property change listener new PropertyChangeListener property change listener public void propertyChange property change PropertyChangeEvent property change event evt evt popupButton popup button repaint repaint bar bar add add popupButton popup button public static void addStrokeButtonsTo add stroke button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor addStrokeDecorationButtonTo add stroke decoration button to bar bar editor editor addStrokeWidthButtonTo add stroke width button to bar bar editor editor addStrokeDashesButtonTo add stroke dash button to bar bar editor editor addStrokeTypeButtonTo add stroke type button to bar bar editor editor addStrokePlacementButtonTo add stroke placement button to bar bar editor editor public static void addStrokeWidthButtonTo add stroke width button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JPopupButton j popup button strokeWidthPopupButton stroke width popup button new JPopupButton j popup button labels label configureToolBarButton configure tool bar button strokeWidthPopupButton stroke width popup button attributeStrokeWidth attribute stroke width strokeWidthPopupButton stroke width popup button setFocusable set focusable false double widths width 0 0 5d 5d 1d 1d 2d 2d 3d 3d 5d 5d 7d 7d 9d 9d 11d 11d NumberFormat number format formatter formatt NumberFormat number format getInstance get instance if formatter formatt instanceof DecimalFormat decimal format DecimalFormat decimal format formatter formatt setMaximumFractionDigits set maximum fraction digit 1 1 DecimalFormat decimal format formatter formatt setMinimumFractionDigits set minimum fraction digit 0 0 for int i i 0 0 i i widths width length length i++ i++ String label label Double toString to widths width i i strokeWidthPopupButton stroke width popup button add add new AttributeAction attribute action editor editor STROKE s t r o k e WIDTH w t h new Double widths width i i label label new StrokeIcon stroke icon new BasicStroke basic stroke float widths width i i BasicStroke basic stroke CAP c a p BUTT b u t t BasicStroke basic stroke JOIN j o i n BEVEL b e v e l bar bar add add strokeWidthPopupButton stroke width popup button public static void addStrokeDecorationButtonTo add stroke decoration button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JPopupButton j popup button strokeDecorationPopupButton stroke decoration popup button new JPopupButton j popup button labels label configureToolBarButton configure tool bar button strokeDecorationPopupButton stroke decoration popup button attributeStrokeDecoration attribute stroke decoration strokeDecorationPopupButton stroke decoration popup button setFocusable set focusable false strokeDecorationPopupButton stroke decoration popup button setColumnCount set column count 2 2 false LineDecoration line decoration decorations decoration new ArrowTip arrow tip 0 0 35 35 12 12 11 11 3 3 new ArrowTip arrow tip 0 0 35 35 13 13 7 7 null for int i i 0 0 i i decorations decoration length length i++ i++ strokeDecorationPopupButton stroke decoration popup button add add new AttributeAction attribute action editor editor START s t a r t DECORATION d e c o r a t i o n decorations decoration i i null new LineDecorationIcon line decoration icon decorations decoration i i true strokeDecorationPopupButton stroke decoration popup button add add new AttributeAction attribute action editor editor END e n d DECORATION d e c o r a t i o n decorations decoration i i null new LineDecorationIcon line decoration icon decorations decoration i i false bar bar add add strokeDecorationPopupButton stroke decoration popup button public static void addStrokeDashesButtonTo add stroke dash button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JPopupButton j popup button strokeDashesPopupButton stroke dash popup button new JPopupButton j popup button labels label configureToolBarButton configure tool bar button strokeDashesPopupButton stroke dash popup button attributeStrokeDashes attribute stroke dash strokeDashesPopupButton stroke dash popup button setFocusable set focusable false double dashes dash null 4d 4d 4d 4d 2d 2d 2d 2d 4d 4d 2d 2d 2d 2d 4d 4d 8d 8d 2d 2d 6d 6d 2d 2d 2d 2d 2d 2d strokeDashesPopupButton stroke dash popup button setColumnCount set column count 2 2 false for int i i 0 0 i i dashes dash length length i++ i++ float fdashes fdash if dashes dash i i null fdashes fdash null else fdashes fdash new float dashes dash i i length length for int j j 0 0 j j dashes dash i i length length j++ j++ fdashes fdash j j float dashes dash i i j j strokeDashesPopupButton stroke dash popup button add add new AttributeAction attribute action editor editor STROKE s t r o k e DASHES d a s h e s dashes dash i i null new StrokeIcon stroke icon new BasicStroke basic stroke 2f 2f BasicStroke basic stroke CAP c a p BUTT b u t t BasicStroke basic stroke JOIN j o i n BEVEL b e v e l 10f 10f fdashes fdash 0 0 bar bar add add strokeDashesPopupButton stroke dash popup button public static void addStrokeTypeButtonTo add stroke type button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JPopupButton j popup button strokeTypePopupButton stroke type popup button new JPopupButton j popup button labels label configureToolBarButton configure tool bar button strokeTypePopupButton stroke type popup button attributeStrokeType attribute stroke type strokeTypePopupButton stroke type popup button setFocusable set focusable false strokeTypePopupButton stroke type popup button add add new AttributeAction attribute action editor editor STROKE s t r o k e TYPE t y p e AttributeKeys attribute key StrokeType stroke type BASIC b a s i c labels label getString get attributeStrokeTypeBasic attribute stroke type basic new StrokeIcon stroke icon new BasicStroke basic stroke 1 1 BasicStroke basic stroke CAP c a p BUTT b u t t BasicStroke basic stroke JOIN j o i n BEVEL b e v e l HashMap hash map AttributeKey attribute key Object attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e TYPE t y p e AttributeKeys attribute key StrokeType stroke type DOUBLE d o u b l e attr attr put put STROKE s t r o k e INNER i n n e r WIDTH w t h FACTOR f a c t o r 2d 2d strokeTypePopupButton stroke type popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokeTypeDouble attribute stroke type new StrokeIcon stroke icon new DoubleStroke stroke 2 2 1 1 attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e TYPE t y p e AttributeKeys attribute key StrokeType stroke type DOUBLE d o u b l e attr attr put put STROKE s t r o k e INNER i n n e r WIDTH w t h FACTOR f a c t o r 3d 3d strokeTypePopupButton stroke type popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokeTypeDouble attribute stroke type new StrokeIcon stroke icon new DoubleStroke stroke 3 3 1 1 attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e TYPE t y p e AttributeKeys attribute key StrokeType stroke type DOUBLE d o u b l e attr attr put put STROKE s t r o k e INNER i n n e r WIDTH w t h FACTOR f a c t o r 4d 4d strokeTypePopupButton stroke type popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokeTypeDouble attribute stroke type new StrokeIcon stroke icon new DoubleStroke stroke 4 4 1 1 bar bar add add strokeTypePopupButton stroke type popup button public static void addStrokePlacementButtonTo add stroke placement button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JPopupButton j popup button strokePlacementPopupButton stroke placement popup button new JPopupButton j popup button labels label configureToolBarButton configure tool bar button strokePlacementPopupButton stroke placement popup button attributeStrokePlacement attribute stroke placement strokePlacementPopupButton stroke placement popup button setFocusable set focusable false HashMap hash map AttributeKey attribute key Object attr attr attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement CENTER c e n t e r attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill CENTER c e n t e r strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementCenter attribute stroke placement center null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement INSIDE i n s e attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill CENTER c e n t e r strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementInside attribute stroke placement inside null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement OUTSIDE o u t s e attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill CENTER c e n t e r strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementOutside attribute stroke placement outside null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement CENTER c e n t e r attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill FULL f u l l strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementCenterFilled attribute stroke placement center fill null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement INSIDE i n s e attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill FULL f u l l strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementInsideFilled attribute stroke placement inside fill null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement OUTSIDE o u t s e attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill FULL f u l l strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementOutsideFilled attribute stroke placement outside fill null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement CENTER c e n t e r attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill NONE n o n e strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementCenterUnfilled attribute stroke placement center unfill null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement INSIDE i n s e attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill NONE n o n e strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementInsideUnfilled attribute stroke placement inside unfill null attr attr new HashMap hash map AttributeKey attribute key Object attr attr put put STROKE s t r o k e PLACEMENT p l a c e m e n t AttributeKeys attribute key StrokePlacement stroke placement OUTSIDE o u t s e attr attr put put FILL f i l l UNDER u n d e r STROKE s t r o k e AttributeKeys attribute key Underfill underfill NONE n o n e strokePlacementPopupButton stroke placement popup button add add new AttributeAction attribute action editor editor attr attr labels label getString get attributeStrokePlacementOutsideUnfilled attribute stroke placement outside unfill null bar bar add add strokePlacementPopupButton stroke placement popup button public static void addFontButtonsTo add font button to JToolBar j tool bar bar bar DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label JPopupButton j popup button fontPopupButton font popup button JButton j button boldToggleButton bold toggle button JButton j button italicToggleButton italic toggle button JButton j button underlineToggleButton underline toggle button fontPopupButton font popup button new JPopupButton j popup button boldToggleButton bold toggle button new JButton j button italicToggleButton italic toggle button new JButton j button underlineToggleButton underline toggle button new JButton j button labels label configureToolBarButton configure tool bar button fontPopupButton font popup button attributeFont attribute font fontPopupButton font popup button setFocusable set focusable false Font font allFonts all font GraphicsEnvironment graphic environment getLocalGraphicsEnvironment get local graphic environment getAllFonts get all font HashSet hash set String fontExclusionList font exclusion list new HashSet hash set String Arrays asList a list new String Mac mac OS o s X x 10 10 3 3 Font font Exclusion exclusion List list GungSeo gung seo HeadLineA head line a PCMyungjo p c myungjo PilGi pil gi Al al Bayan bayan Apple apple LiGothic gothic Apple apple LiSung sung AppleMyungjo apple myungjo Arial arial Hebrew hebrew Ayuthaya ayuthaya Baghdad baghdad BiauKai biau kai Charcoal charcoal CY c y Corsiva corsiva Hebrew hebrew DecoType deco type Naskh naskh Devanagari devanagari MT m t Fang fang Song song GB18030 g b18030 Bitmap bitmap Geeza geeza Pro pro Geezah geezah Geneva geneva CY c y Gujarati gujarati MT m t Gurmukhi gurmukhi MT m t Hei hei Helvetica helvetica CY c y Hiragino hiragino Kaku kaku Gothic gothic Std std Hiragino hiragino Maru maru Gothic gothic Pro pro Hiragino hiragino Mincho mincho Pro pro Hiragino hiragino Kaku kaku Gothic gothic Pro pro InaiMathi inai mathi Kai kai Krungthep krungthep KufiStandardGK kufi standard g k LiHei hei Pro pro LiSong song Pro pro Mshtakan mshtakan Monaco monaco CY c y Nadeem nadeem New Peninim peninim MT m t Osaka osaka Plantagenet plantagenet Cherokee cherokee Raanana raanana STFangsong s t fangsong STHeiti s t heiti STKaiti s t kaiti STSong s t song Sathu sathu Silom silom Thonburi thonburi Times time CY c y Windows window XP x p Professional professional Font font Exclusion exclusion List list Arial arial Unicode unicode MS m s Batang batang Estrangelo estrangelo Edessa edessa Gautami gautami Kartika kartika Latha latha Lucida lucida Sans san Unicode unicode Mangal mangal Marlett marlett MS m s Mincho mincho MS m s Outlook outlook MV m v Boli boli OCR o c r B b 10 10 BT b t Raavi raavi Shruti shruti SimSun sim sun Sylfaen sylfaen Symbol symbol Tunga tunga Vrinda vrinda Wingdings wingding Wingdings wingding 2 2 Wingdings wingding 3 3 ZWAdobeF z w adobe f LinkedList link list Font font fontList font list new LinkedList link list Font font for int i i 0 0 i i allFonts all font length length i++ i++ if fontExclusionList font exclusion list contains contain allFonts all font i i getFamily get family fontList font list add add allFonts all font i i allFonts all font new Font font fontList font list size size allFonts all font Font font fontList font list toArray to allFonts all font Arrays sort sort allFonts all font new Comparator comparator Font font public int compare compare Font font f1 f1 Font font f2 f2 int result result f1 f1 getFamily get family compareTo compare to f2 f2 getFamily get family if result result 0 0 result result f1 f1 getFontName get font name compareTo compare to f2 f2 getFontName get font name return result result LinkedList link list Font font fontFamilies font family new LinkedList link list Font font JMenu j menu submenu submenu null for int i i 0 0 i i allFonts all font length length i++ i++ if submenu submenu null if allFonts all font i i getFamily get family equals equal allFonts all font i i 1 1 getFamily get family submenu submenu null if submenu submenu null if i i allFonts all font length length 2 2 allFonts all font i i getFamily get family equals equal allFonts all font i i + + 1 1 getFamily get family fontFamilies font family add add allFonts all font i i submenu submenu new JMenu j menu allFonts all font i i getFamily get family submenu submenu setFont set font JPopupButton j popup button ITEM i t e m FONT f o n t fontPopupButton font popup button add add submenu submenu Action action action action new AttributeAction attribute action editor editor FONT f o n t FACE f a c e allFonts all font i i submenu submenu null ? ? allFonts all font i i getFamily get family allFonts all font i i getFontName get font name null new StyledEditorKit style editor kit FontFamilyAction font family action allFonts all font i i getFontName get font name allFonts all font i i getFamily get family if submenu submenu null fontFamilies font family add add allFonts all font i i fontPopupButton font popup button add add action action else JMenuItem j menu item item item submenu submenu add add action action item item setFont set font JPopupButton j popup button itemFont item font fontPopupButton font popup button setColumnCount set column count Math math max max 1 1 fontFamilies font family size size 32 32 true labels label configureToolBarButton configure tool bar button boldToggleButton bold toggle button attributeFontBold attribute font bold boldToggleButton bold toggle button setFocusable set focusable false labels label configureToolBarButton configure tool bar button italicToggleButton italic toggle button attributeFontItalic attribute font italic italicToggleButton italic toggle button setFocusable set focusable false labels label configureToolBarButton configure tool bar button underlineToggleButton underline toggle button attributeFontUnderline attribute font underline underlineToggleButton underline toggle button setFocusable set focusable false boldToggleButton bold toggle button addActionListener add action listener new AttributeToggler attribute toggl editor editor FONT f o n t BOLD b o l d Boolean TRUE t r u e Boolean FALSE f a l s e new StyledEditorKit style editor kit BoldAction bold action italicToggleButton italic toggle button addActionListener add action listener new AttributeToggler attribute toggl editor editor FONT f o n t ITALIC i t a l i c Boolean TRUE t r u e Boolean FALSE f a l s e new StyledEditorKit style editor kit ItalicAction italic action underlineToggleButton underline toggle button addActionListener add action listener new AttributeToggler attribute toggl editor editor FONT f o n t UNDERLINED u n d e r l i n e d Boolean TRUE t r u e Boolean FALSE f a l s e new StyledEditorKit style editor kit UnderlineAction underline action bar bar add add fontPopupButton font popup button setFocusable set focusable false bar bar add add boldToggleButton bold toggle button setFocusable set focusable false bar bar add add italicToggleButton italic toggle button setFocusable set focusable false bar bar add add underlineToggleButton underline toggle button setFocusable set focusable false Creates create toolbar toolbar buttons button and and adds add them them to to the the specified specify JToolBar j tool bar public static void addAlignmentButtonsTo add alignment button to JToolBar j tool bar bar bar final DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label bar bar add add new AlignAction align action West west editor editor setFocusable set focusable false bar bar add add new AlignAction align action East east editor editor setFocusable set focusable false bar bar add add new AlignAction align action Horizontal horizontal editor editor setFocusable set focusable false bar bar add add new AlignAction align action North north editor editor setFocusable set focusable false bar bar add add new AlignAction align action South south editor editor setFocusable set focusable false bar bar add add new AlignAction align action Vertical vertical editor editor setFocusable set focusable false bar bar addSeparator add separator bar bar add add new MoveAction move action West west editor editor setFocusable set focusable false bar bar add add new MoveAction move action East east editor editor setFocusable set focusable false bar bar add add new MoveAction move action North north editor editor setFocusable set focusable false bar bar add add new MoveAction move action South south editor editor setFocusable set focusable false bar bar addSeparator add separator bar bar add add new MoveToFrontAction move to front action editor editor setFocusable set focusable false bar bar add add new MoveToBackAction move to back action editor editor setFocusable set focusable false Creates create toolbar toolbar buttons button and and adds add them them to to the the specified specify JToolBar j tool bar public static AbstractButton button createToggleGridButton create toggle grid button final DrawingEditor drawing editor editor editor ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label final JToggleButton j toggle button toggleGridButton toggle grid button toggleGridButton toggle grid button new JToggleButton j toggle button labels label configureToolBarButton configure tool bar button toggleGridButton toggle grid button alignGrid align grid toggleGridButton toggle grid button setFocusable set focusable false toggleGridButton toggle grid button addItemListener add item listener new ItemListener item listener public void itemStateChanged item state change ItemEvent item event event event Constrainer constrain c c if toggleGridButton toggle grid button isSelected is select c c new GridConstrainer grid constrain 10 10 10 10 else c c new GridConstrainer grid constrain 1 1 1 1 for DrawingView drawing view v v editor editor getDrawingViews get drawing view v v setConstrainer set constrain c c v v getContainer get container repaint repaint return toggleGridButton toggle grid button Creates create toolbar toolbar buttons button and and adds add them them to to the the specified specify JToolBar j tool bar public static AbstractButton button createToggleGridButton create toggle grid button final DrawingView drawing view view view ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label final JToggleButton j toggle button toggleGridButton toggle grid button toggleGridButton toggle grid button new JToggleButton j toggle button labels label configureToolBarButton configure tool bar button toggleGridButton toggle grid button alignGrid align grid toggleGridButton toggle grid button setFocusable set focusable false toggleGridButton toggle grid button addItemListener add item listener new ItemListener item listener public void itemStateChanged item state change ItemEvent item event event event Constrainer constrain c c if toggleGridButton toggle grid button isSelected is select c c new GridConstrainer grid constrain 10 10 10 10 else c c new GridConstrainer grid constrain 1 1 1 1 view view setConstrainer set constrain c c view view getContainer get container repaint repaint view view addPropertyChangeListener add property change listener new PropertyChangeListener property change listener public void propertyChange property change PropertyChangeEvent property change event evt evt String constants constant are are interned intern if evt evt getPropertyName get property name gridConstrainer grid constrain Constrainer constrain c c Constrainer constrain evt evt getNewValue get value toggleGridButton toggle grid button setSelected set select c c isVisible is visible return toggleGridButton toggle grid button 