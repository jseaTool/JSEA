FloatingTextArea floating text area java 1 1 0 0 1 1 2006 2006 02 02 27 27 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org Project project JHotdraw j hotdraw a a GUI g u i framework framework for technical technical drawings drawing http http www www jhotdraw jhotdraw org org http http jhotdraw jhotdraw sourceforge sourceforge net net Copyright copyright ??? ??? by by the the original original author author s s and and all all contributors contributor License license Lesser less GNU g n u Public License license LGPL l g p l http http www www opensource opensource org org licenses license lgpl lgpl license license html html package org org jhotdraw jhotdraw draw draw import java awt awt geom geom import java awt awt import javax javax swing swing BorderFactory border factory import javax javax swing swing JTextArea j text area import javax javax swing swing JScrollPane j scroll pane A a FloatingTextArea floating text area overlays overlay an an editor editor on on top top of of an an area area in in a a drawing drawing public class FloatingTextArea floating text area A a scroll scroll pane pane to to allow allow for vertical vertical scrolling scroll while editing editing protected JScrollPane j scroll pane editScrollContainer edit scroll container The the actual actual editor editor protected JTextArea j text area editWidget edit widget The the drawing drawing view view protected DrawingView drawing view view view Constructor constructor for the the FloatingTextArea floating text area object public FloatingTextArea floating text area editWidget edit widget new JTextArea j text area editWidget edit widget setWrapStyleWord set wrap style word true editWidget edit widget setLineWrap set line wrap true editScrollContainer edit scroll container new JScrollPane j scroll pane editWidget edit widget JScrollPane j scroll pane VERTICAL v e r t i c a l SCROLLBAR s c r o l l b a r ALWAYS a l w a y s JScrollPane j scroll pane HORIZONTAL h o r i z o n t a l SCROLLBAR s c r o l l b a r NEVER n e v e r editScrollContainer edit scroll container setCursor set cursor Cursor cursor getPredefinedCursor get predefin cursor Cursor cursor DEFAULT d e f a u l t CURSOR c u r s o r editScrollContainer edit scroll container setBorder set border BorderFactory border factory createLineBorder create line border Color color black black Creates create the the overlay overlay within within the the given given container container param view view the the DrawingView drawing view public void createOverlay create overlay DrawingView drawing view view view createOverlay create overlay view view null public void requestFocus request focus editWidget edit widget requestFocus request focus Creates create the the overlay overlay for the the given given Container container using using a a specific specific font font param view view the the DrawingView drawing view param figure figure the the figure figure holding holding the the text text public void createOverlay create overlay DrawingView drawing view view view TextHolder text holder figure figure view view getContainer get container add add editScrollContainer edit scroll container 0 0 if figure figure null Font font f f figure figure getFont get font FIXME f i x m e Should should scale scale with with fractional fractional value value f f f f deriveFont derive font f f getStyle get style float f f getSize get size view view getScaleFactor get scale factor editWidget edit widget setFont set font f f editWidget edit widget setForeground set foreground figure figure getTextColor get text color editWidget edit widget setBackground set background figure figure getFillColor get fill color editWidget edit widget setTabSize set tab size figure figure getTabSize get tab size this view view view view Positions position and and sizes size the the overlay overlay param r r the the bounding bound Rectangle2D rectangle2 d Double for the the overlay overlay param text text the the text text to to edit edit public void setBounds set bound Rectangle2D rectangle2 d Double r r String text text editWidget edit widget setText set text text text editScrollContainer edit scroll container setBounds set bound view view drawingToView drawing to view r r editScrollContainer edit scroll container setVisible set visible true editWidget edit widget setCaretPosition set caret position 0 0 editWidget edit widget requestFocus request focus Gets get the the text text contents content of of the the overlay overlay return The the text text value value public String getText get text return editWidget edit widget getText get text Gets get the the preferred prefer size size of of the the overlay overlay param cols col Description description of of the the Parameter parameter return The the preferredSize prefer size value value public Dimension dimension getPreferredSize get prefer size int cols col return new Dimension dimension editWidget edit widget getWidth get width editWidget edit widget getHeight get height Removes remove the the overlay overlay public void endOverlay end overlay view view getContainer get container requestFocus request focus if editScrollContainer edit scroll container null editScrollContainer edit scroll container setVisible set visible false view view getContainer get container remove remove editScrollContainer edit scroll container Rectangle rectangle bounds bound editScrollContainer edit scroll container getBounds get bound view view getContainer get container repaint repaint bounds bound x x bounds bound y y bounds bound width width bounds bound height height 