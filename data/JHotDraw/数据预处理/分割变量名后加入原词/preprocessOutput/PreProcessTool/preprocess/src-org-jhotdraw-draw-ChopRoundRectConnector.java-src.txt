ChopRoundRectConnector chop round rect connector java 2 2 0 0 2006 2006 01 01 14 14 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org ??? ??? package org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw util util import java awt awt import java awt awt geom geom import static org org jhotdraw jhotdraw draw draw AttributeKeys attribute key import org org jhotdraw jhotdraw geom geom A a ChopRoundRectConnector chop round rect connector locates locate a a connection connection Point2D point2 d Double by by chopping chop the the connection connection at at the the horizontal horizontal and and vertica vertica lines line defined define by by the the display display box box of of a a RoundRectangleFigure round rectangle figure author author Werner wern Randelshofer randelshof version 2 2 0 0 2006 2006 01 01 14 14 Changed change to to support support double precison coordinates coordinate br 1 1 0 0 2004 2004 03 03 02 02 Derived derive from from class ShortestDistanceConnector distance connector of of JHotDraw jhotdraw 6 6 0b1 0b1 public class ChopRoundRectConnector chop round rect connector extends ChopBoxConnector chop box connector Only only used use for DOMStorable dom storable input input public ChopRoundRectConnector chop round rect connector public ChopRoundRectConnector chop round rect connector Figure figure owner owner super owner owner protected Point2D point2 d Double chop chop Figure figure target target Point2D point2 d Double from from target target getConnectorTarget get connector target target target RoundRectangleFigure round rectangle figure rrf rrf RoundRectangleFigure round rectangle figure target target Rectangle2D rectangle2 d Double outer out rrf rrf getBounds get bound double grow grow switch STROKE s t r o k e PLACEMENT p l a c e m e n t get get target target case CENTER c e n t e r default grow grow AttributeKeys attribute key getStrokeTotalWidth get stroke total width target target 2d 2d break case OUTSIDE o u t s e grow grow AttributeKeys attribute key getStrokeTotalWidth get stroke total width target target break case INSIDE i n s e grow grow 0 0 break Geom geom grow grow outer out grow grow grow grow Rectangle2D rectangle2 d Double inner inner Rectangle2D rectangle2 d Double outer out clone clone double gw gw rrf rrf getArcWidth get arc width + + grow grow 2 2 2 2 double gh gh rrf rrf getArcHeight get arc height + + grow grow 2 2 2 2 inner inner x x gw gw inner inner y y gh gh inner inner width width + + gw gw 2 2 inner inner height height + + gh gh 2 2 double angle angle Geom geom pointToAngle point to angle outer out from from Point2D point2 d Double p p Geom geom angleToPoint angle to point outer out Geom geom pointToAngle point to angle outer out from from if p p x x outer out x x || || p p x x outer out x x + + outer out width width p p y y Math math min min Math math max max p p y y inner inner y y inner inner y y + + inner inner height height else p p x x Math math min min Math math max max p p x x inner inner x x inner inner x x + + inner inner width width return p p 