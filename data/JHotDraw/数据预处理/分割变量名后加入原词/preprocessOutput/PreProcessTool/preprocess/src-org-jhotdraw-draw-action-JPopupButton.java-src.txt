JPopupButton j popup button java 1 1 1 1 2006 2006 06 06 25 25 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw draw draw action action import java awt awt import java beans bean import javax javax swing swing import javax javax swing swing border border import javax javax swing swing event event import java awt awt event event JPopupButton j popup button provides provide a a popup popup menu menu author author wrandels wrandel version 1 1 1 1 2006 2006 06 06 25 25 Added add more more add add methods public class JPopupButton j popup button extends javax javax swing swing JButton j button private JPopupMenu j popup menu popupMenu popup menu private int columnCount column count 1 1 private Action action action action private Rectangle rectangle actionArea action area private Font font itemFont item font public final static Font font ITEM i t e m FONT f o n t new Font font Dialog dialog Font font PLAIN p l a i n 10 10 Creates create new form form JToolBarMenu j tool bar menu public JPopupButton j popup button initComponents init component setFocusable set focusable false itemFont item font ITEM i t e m FONT f o n t public void setItemFont set item font Font font newValue value itemFont item font newValue value if popupMenu popup menu null updateFont update font popupMenu popup menu public void setAction set action Action action action action Rectangle rectangle actionArea action area this action action action action this actionArea action area actionArea action area action action addPropertyChangeListener add property change listener new PropertyChangeListener property change listener public void propertyChange property change PropertyChangeEvent property change event evt evt if evt evt getPropertyName get property name equals equal enabled enable setEnabled set enable Boolean evt evt getNewValue get value booleanValue value else repaint repaint public int getColumnCount get column count return columnCount column count public void setColumnCount set column count int count count boolean isVertical is vertical columnCount column count count count getPopupMenu get popup menu setLayout set layout new VerticalGridLayout vertical grid layout 0 0 getColumnCount get column count isVertical is vertical public void add add Action action action action JMenuItem j menu item item item getPopupMenu get popup menu add add action action if getColumnCount get column count 1 1 item item setUI set u i new PaletteMenuItemUI palette menu item u i item item setFont set font itemFont item font public void add add JMenu j menu submenu submenu JMenuItem j menu item item item getPopupMenu get popup menu add add submenu submenu updateFont update font submenu submenu private void updateFont update font MenuElement menu element menu menu menu menu getComponent get component setFont set font itemFont item font for MenuElement menu element child child menu menu getSubElements get sub element updateFont update font child child public void add add JMenuItem j menu item item item getPopupMenu get popup menu add add item item item item setFont set font itemFont item font public void addSeparator add separator getPopupMenu get popup menu addSeparator add separator public void setPopupMenu set popup menu JPopupMenu j popup menu popupMenu popup menu this popupMenu popup menu popupMenu popup menu public JPopupMenu j popup menu getPopupMenu get popup menu if popupMenu popup menu null popupMenu popup menu new JPopupMenu j popup menu popupMenu popup menu setLayout set layout new VerticalGridLayout vertical grid layout 0 0 getColumnCount get column count return popupMenu popup menu This method is is called call from from within within the the constructor constructor to to initialize initialize the the form form WARNING w a r n i n g Do NOT n o t modify modify this code The the content content of of this method is is always alway regenerated regenerate by by the the Form form Editor editor private void initComponents init component GEN g e n BEGIN b e g i n initComponents init component FormListener form listener formListener form listener new FormListener form listener addMouseListener add mouse listener formListener form listener Code for dispatching dispatch events event from from components component to to event event handlers handler private class FormListener form listener implements java awt awt event event MouseListener mouse listener public void mouseClicked mouse click java awt awt event event MouseEvent mouse event evt evt public void mouseEntered mouse enter java awt awt event event MouseEvent mouse event evt evt public void mouseExited mouse exit java awt awt event event MouseEvent mouse event evt evt public void mousePressed mouse press java awt awt event event MouseEvent mouse event evt evt if evt evt getSource get source JPopupButton j popup button this JPopupButton j popup button this showPopup show popup evt evt public void mouseReleased mouse release java awt awt event event MouseEvent mouse event evt evt if evt evt getSource get source JPopupButton j popup button this JPopupButton j popup button this performAction perform action evt evt GEN g e n END e n d initComponents init component private void performAction perform action java awt awt event event MouseEvent mouse event evt evt GEN g e n FIRST f i r s t event event performAction perform action Add add your your handling handling code here here if actionArea action area null actionArea action area contains contain evt evt getX get x getInsets get inset left left evt evt getY get y getInsets get inset top top action action actionPerformed action perform new ActionEvent action event this ActionEvent action event ACTION a c t i o n PERFORMED p e r f o r m e d null evt evt getWhen get when evt evt getModifiers get modifier GEN g e n LAST l a s t event event performAction perform action private void showPopup show popup java awt awt event event MouseEvent mouse event evt evt GEN g e n FIRST f i r s t event event showPopup show popup Add add your your handling handling code here here if popupMenu popup menu null actionArea action area null || || actionArea action area contains contain evt evt getX get x getInsets get inset left left evt evt getY get y getInsets get inset top top int x x y y x x 0 0 y y getHeight get height if getParent get parent instanceof JToolBar j tool bar JToolBar j tool bar toolbar toolbar JToolBar j tool bar getParent get parent if toolbar toolbar getOrientation get orientation JToolBar j tool bar VERTICAL v e r t i c a l y y 0 0 if toolbar toolbar getX get x toolbar toolbar getParent get parent getInsets get inset left left x x popupMenu popup menu getPreferredSize get prefer size width width else x x getWidth get width else if toolbar toolbar getY get y toolbar toolbar getParent get parent getInsets get inset top top y y popupMenu popup menu getPreferredSize get prefer size height height popupMenu popup menu show show this x x y y GEN g e n LAST l a s t event event showPopup show popup Variables variable declaration declaration do not not modify modify GEN g e n BEGIN b e g i n variables variable End end of of variables variable declaration declaration GEN g e n END e n d variables variable 