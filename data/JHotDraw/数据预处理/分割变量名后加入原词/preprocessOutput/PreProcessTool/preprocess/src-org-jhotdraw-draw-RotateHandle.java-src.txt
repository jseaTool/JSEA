RotateHandle rotate handle java 1 1 0 0 12 12 July july 2006 2006 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw draw draw import org org jhotdraw jhotdraw util util import org org jhotdraw jhotdraw undo undo import java awt awt import java awt awt event event import java awt awt geom geom import java util util import org org jhotdraw jhotdraw geom geom A a Handle handle to to rotate rotate a a Figure figure author author Werner wern Randelshofer randelshof version 1 1 0 0 12 12 July july 2006 2006 Created create public class RotateHandle rotate handle extends AbstractHandle handle private Point point location location private Object restoreData restore data private AffineTransform affine transform transform transform private Point2D point2 d Double center center private double startTheta start theta private double startLength start length Creates create a a new instance instance public RotateHandle rotate handle Figure figure owner owner super owner owner public boolean isCombinableWith is combinable with Handle handle h h return false Draws draw this handle handle public void draw draw Graphics2D graphics2 d g g drawDiamond draw diamond g g Color color green green Color color black black protected Rectangle rectangle basicGetBounds basic get bound Rectangle rectangle r r new Rectangle rectangle getLocation get location r r grow grow getHandlesize get handlesize 2 2 getHandlesize get handlesize 2 2 return r r public Point point getLocation get location if location location null return location location view view drawingToView drawing to view getOrigin get origin return location location private Point2D point2 d Double getOrigin get origin This handle handle is is placed place above above the the figure figure We we move move it it up up by by a a handlesizes handlesiz so so that that it it won won t t overlap overlap with with the the handles handle from from BoxHandleKit box handle kit Rectangle2D rectangle2 d Double bounds bound getOwner get owner getBounds get bound return new Point2D point2 d Double bounds bound getCenterX get center x bounds bound y y getHandlesize get handlesize public void trackStart track start Point point anchor anchor int modifiersEx modifier ex location location new Point point anchor anchor x x anchor anchor y y restoreData restore data getOwner get owner getRestoreData get restore data Rectangle2D rectangle2 d Double bounds bound getOwner get owner getBounds get bound transform transform new AffineTransform affine transform center center new Point2D point2 d Double bounds bound getCenterX get center x bounds bound getCenterY get center y Point2D point2 d Double anchorPoint anchor point view view viewToDrawing view to drawing anchor anchor startTheta start theta Geom geom angle angle center center x x center center y y anchorPoint anchor point x x anchorPoint anchor point y y startLength start length Geom geom length length center center x x center center y y anchorPoint anchor point x x anchorPoint anchor point y y public void trackStep track step Point point anchor anchor Point point lead int modifiersEx modifier ex location location new Point point lead x x lead y y Point2D point2 d Double leadPoint point view view viewToDrawing view to drawing lead double stepTheta step theta Geom geom angle angle center center x x center center y y leadPoint point x x leadPoint point y y double stepLength step length Geom geom length length center center x x center center y y leadPoint point x x leadPoint point y y transform transform setToIdentity set to identity transform transform translate translate center center x x center center y y transform transform rotate rotate stepTheta step theta startTheta start theta transform transform translate translate center center x x center center y y getOwner get owner willChange will change getOwner get owner restoreTo restore to restoreData restore data getOwner get owner basicTransform basic transform transform transform getOwner get owner changed change public void trackEnd track end Point point anchor anchor Point point lead int modifiersEx modifier ex view view getDrawing get drawing fireUndoableEditHappened fire undoable edit happen new RestoreDataEdit restore data edit getOwner get owner restoreData restore data location location null 