PreferencesUtil preference util java 1 1 0 0 October october 13 13 2005 2005 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw util util prefs pref import java awt awt import java awt awt event event import java util util prefs pref import javax javax swing swing PreferencesUtil preference util author author Werner wern Randelshofer randelshof version 1 1 0 0 October october 13 13 2005 2005 Created create public class PreferencesUtil preference util Creates create a a new instance instance private PreferencesUtil preference util Installs install a a frame frame preferences preference handler handler On on first first run run sets set the the window window to to its it preferred prefer size size at at the the top top left left corner corner of of the the screen screen On on subsequent subsequent runs run sets set the the window window the the last last size size and and location location where where the the user user had have placed place it it before before param prefs pref Preferences preference for storing store retrieving retrieve preferences preference values value param name name Base base name name of of the the preference preference param window window The the window window for which which to to track track preferences preference public static void installFramePrefsHandler install frame pref handler final Preferences preference prefs pref final String name name Window window window window GraphicsConfiguration graphic configuration conf conf window window getGraphicsConfiguration get graphic configuration Rectangle rectangle screenBounds screen bound conf conf getBounds get bound Insets inset screenInsets screen inset window window getToolkit get toolkit getScreenInsets get screen inset conf conf screenBounds screen bound x x + + screenInsets screen inset left left screenBounds screen bound y y + + screenInsets screen inset top top screenBounds screen bound width width screenInsets screen inset left left + + screenInsets screen inset right right screenBounds screen bound height height screenInsets screen inset top top + + screenInsets screen inset bottom bottom Dimension dimension preferredSize prefer size window window getPreferredSize get prefer size Dimension dimension minSize min size window window getMinimumSize get minimum size Rectangle rectangle bounds bound new Rectangle rectangle prefs pref getInt get name+ name+ x x 0 0 prefs pref getInt get name+ name+ y y 0 0 Math math max max minSize min size width width prefs pref getInt get name+ name+ width width preferredSize prefer size width width Math math max max minSize min size height height prefs pref getInt get name+ name+ height height preferredSize prefer size height height if screenBounds screen bound contains contain bounds bound bounds bound x x screenBounds screen bound x x + + screenBounds screen bound width width bounds bound width width 2 2 bounds bound y y screenBounds screen bound y y + + screenBounds screen bound height height bounds bound height height 2 2 Rectangle rectangle intersect intersect screenBounds screen bound bounds bound bounds bound window window setBounds set bound bounds bound window window addComponentListener add component listener new ComponentAdapter component adapter public void componentMoved component move ComponentEvent component event evt evt prefs pref putInt put name+ name+ x x evt evt getComponent get component getX get x prefs pref putInt put name+ name+ y y evt evt getComponent get component getY get y public void componentResized component resize ComponentEvent component event evt evt prefs pref putInt put name+ name+ width width evt evt getComponent get component getWidth get width prefs pref putInt put name+ name+ height height evt evt getComponent get component getHeight get height Installs install a a palette palette preferences preference handler handler On on first first run run sets set the the palette palette to to its it preferred prefer location location at at the the top top left left corner corner of of the the screen screen On on subsequent subsequent runs run sets set the the palette palette the the last last location location where where the the user user had have placed place it it before before param prefs pref Preferences preference for storing store retrieving retrieve preferences preference values value param name name Base base name name of of the the preference preference param window window The the window window for which which to to track track preferences preference public static void installPalettePrefsHandler install palette pref handler final Preferences preference prefs pref final String name name Window window window window installPalettePrefsHandler install palette pref handler prefs pref name name window window 0 0 public static void installPalettePrefsHandler install palette pref handler final Preferences preference prefs pref final String name name Window window window window int x x GraphicsConfiguration graphic configuration conf conf window window getGraphicsConfiguration get graphic configuration Rectangle rectangle screenBounds screen bound conf conf getBounds get bound Insets inset screenInsets screen inset window window getToolkit get toolkit getScreenInsets get screen inset conf conf screenBounds screen bound x x + + screenInsets screen inset left left screenBounds screen bound y y + + screenInsets screen inset top top screenBounds screen bound width width screenInsets screen inset left left + + screenInsets screen inset right right screenBounds screen bound height height screenInsets screen inset top top + + screenInsets screen inset bottom bottom Dimension dimension preferredSize prefer size window window getPreferredSize get prefer size Rectangle rectangle bounds bound new Rectangle rectangle prefs pref getInt get name+ name+ x x x x + + screenBounds screen bound x x prefs pref getInt get name+ name+ y y 0 0 + + screenBounds screen bound y y preferredSize prefer size width width preferredSize prefer size height height if screenBounds screen bound contains contain bounds bound bounds bound x x screenBounds screen bound x x bounds bound y y screenBounds screen bound y y window window setBounds set bound bounds bound window window addComponentListener add component listener new ComponentAdapter component adapter public void componentMoved component move ComponentEvent component event evt evt prefs pref putInt put name+ name+ x x evt evt getComponent get component getX get x prefs pref putInt put name+ name+ y y evt evt getComponent get component getY get y public void componentResized component resize ComponentEvent component event evt evt prefs pref putInt put name+ name+ width width evt evt getComponent get component getWidth get width prefs pref putInt put name+ name+ height height evt evt getComponent get component getHeight get height Installs install an an intenal intenal frame frame preferences preference handler handler On on first first run run sets set the the frame frame to to its it preferred prefer size size at at the the top top left left corner corner of of the the desktop desktop pane pane On on subsequent subsequent runs run sets set the the frame frame the the last last size size and and location location where where the the user user had have placed place it it before before param prefs pref Preferences preference for storing store retrieving retrieve preferences preference values value param name name Base base name name of of the the preference preference param window window The the window window for which which to to track track preferences preference public static void installInternalFramePrefsHandler install internal frame pref handler final Preferences preference prefs pref final String name name JInternalFrame j internal frame window window JDesktopPane j desktop pane desktop desktop Rectangle rectangle screenBounds screen bound desktop desktop getBounds get bound screenBounds screen bound setLocation set location 0 0 0 0 Insets inset screenInsets screen inset desktop desktop getInsets get inset screenBounds screen bound x x + + screenInsets screen inset left left screenBounds screen bound y y + + screenInsets screen inset top top screenBounds screen bound width width screenInsets screen inset left left + + screenInsets screen inset right right screenBounds screen bound height height screenInsets screen inset top top + + screenInsets screen inset bottom bottom Dimension dimension preferredSize prefer size window window getPreferredSize get prefer size Dimension dimension minSize min size window window getMinimumSize get minimum size Rectangle rectangle bounds bound new Rectangle rectangle prefs pref getInt get name+ name+ x x 0 0 prefs pref getInt get name+ name+ y y 0 0 Math math max max minSize min size width width prefs pref getInt get name+ name+ width width preferredSize prefer size width width Math math max max minSize min size height height prefs pref getInt get name+ name+ height height preferredSize prefer size height height if screenBounds screen bound contains contain bounds bound bounds bound x x screenBounds screen bound x x + + screenBounds screen bound width width bounds bound width width 2 2 bounds bound y y screenBounds screen bound y y + + screenBounds screen bound height height bounds bound height height 2 2 Rectangle rectangle intersect intersect screenBounds screen bound bounds bound bounds bound window window setBounds set bound bounds bound window window addComponentListener add component listener new ComponentAdapter component adapter public void componentMoved component move ComponentEvent component event evt evt prefs pref putInt put name+ name+ x x evt evt getComponent get component getX get x prefs pref putInt put name+ name+ y y evt evt getComponent get component getY get y public void componentResized component resize ComponentEvent component event evt evt prefs pref putInt put name+ name+ width width evt evt getComponent get component getWidth get width prefs pref putInt put name+ name+ height height evt evt getComponent get component getHeight get height Installs install a a toolbar toolbar preferences preference handler handler On on first first run run sets set the the toolbar toolbar to to BorderLayout border layout TOP t o p On on subsequent subsequent runs run set set the the toolbar toolbar to to the the last last BorderLayout border layout location location param prefs pref Preferences preference for storing store retrieving retrieve preferences preference values value param name name Base base name name of of the the preference preference param toolbar toolbar The the JToolBar j tool bar for which which to to track track preferences preference public static void installToolBarPrefsHandler install tool bar pref handler final Preferences preference prefs pref final String name name JToolBar j tool bar toolbar toolbar new ToolBarPrefsHandler tool bar pref handler toolbar toolbar name name prefs pref 