SelectionTool selection tool java 1 1 0 0 2003 2003 12 12 01 01 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org ??? ??? package org org jhotdraw jhotdraw draw draw import java awt awt import java awt awt event event Tool tool to to select select and and manipulate manipulate figures figure A a selection selection tool tool is is in in one one of of three three states state e e g g background background selection selection figure figure selection selection handle handle manipulation manipulation The the different different states state are are handled handle by by different different tracker tracker objects author author Werner wern Randelshofer randelshof version 1 1 0 0 2003 2003 12 12 01 01 Derived derive from from JHotDraw jhotdraw 5 5 4b1 4b1 public class SelectionTool selection tool extends AbstractTool tool implements ToolListener tool listener The the tracker tracker encapsulates encapsulate the the current current state state of of the the SelectionTool selection tool private Tool tool tracker tracker Creates create a a new instance instance public SelectionTool selection tool tracker tracker createAreaTracker create area tracker tracker tracker addToolListener add tool listener this public void activate activate DrawingEditor drawing editor editor editor super activate activate editor editor tracker tracker activate activate editor editor public void deactivate deactivate DrawingEditor drawing editor editor editor super deactivate deactivate editor editor tracker tracker deactivate deactivate editor editor public void keyPressed key press KeyEvent key event e e tracker tracker keyPressed key press e e public void keyReleased key release KeyEvent key event evt evt tracker tracker keyReleased key release evt evt public void keyTyped key type KeyEvent key event evt evt tracker tracker keyTyped key type evt evt public void mouseClicked mouse click MouseEvent mouse event evt evt tracker tracker mouseClicked mouse click evt evt public void mouseDragged mouse drag MouseEvent mouse event evt evt tracker tracker mouseDragged mouse drag evt evt public void mouseEntered mouse enter MouseEvent mouse event evt evt super mouseEntered mouse enter evt evt tracker tracker mouseEntered mouse enter evt evt public void mouseExited mouse exit MouseEvent mouse event evt evt super mouseExited mouse exit evt evt tracker tracker mouseExited mouse exit evt evt public void mouseMoved mouse move MouseEvent mouse event evt evt tracker tracker mouseMoved mouse move evt evt public void mouseReleased mouse release MouseEvent mouse event evt evt tracker tracker mouseReleased mouse release evt evt public void draw draw Graphics2D graphics2 d g g tracker tracker draw draw g g public void mousePressed mouse press MouseEvent mouse event evt evt super mousePressed mouse press evt evt DrawingView drawing view view view getView get view Handle handle handle handle view view findHandle find handle anchor anchor Tool tool newTracker tracker null if handle handle null newTracker tracker createHandleTracker create handle tracker handle handle else Figure figure figure figure view view findFigure find figure anchor anchor if figure figure null newTracker tracker createDragTracker create drag tracker figure figure else if evt evt isShiftDown is shift down view view clearSelection clear selection view view setHandleDetailLevel set handle detail level 0 0 newTracker tracker createAreaTracker create area tracker if newTracker tracker null setTracker set tracker newTracker tracker tracker tracker mousePressed mouse press evt evt protected void setTracker set tracker Tool tool newTracker tracker if tracker tracker null tracker tracker deactivate deactivate getEditor get editor tracker tracker removeToolListener remove tool listener this tracker tracker newTracker tracker if tracker tracker null tracker tracker activate activate getEditor get editor tracker tracker addToolListener add tool listener this Factory factory method to to create create a a Handle handle tracker tracker It it is is used use to to track track a a handle handle protected Tool tool createHandleTracker create handle tracker Handle handle handle handle return new HandleTracker handle tracker handle handle getView get view getCompatibleHandles get compatible handle handle handle Factory factory method to to create create a a Drag drag tracker tracker It it is is used use to to drag drag a a figure figure protected Tool tool createDragTracker create drag tracker Figure figure f f return new DragTracker drag tracker f f Factory factory method to to create create an an area area tracker tracker It it is is used use to to select select an an area area protected Tool tool createAreaTracker create area tracker return new SelectAreaTracker select area tracker public void toolStarted tool start ToolEvent tool event event event public void toolDone tool ToolEvent tool event event event Empty empty Tool tool newTracker tracker createAreaTracker create area tracker if newTracker tracker null if tracker tracker null tracker tracker deactivate deactivate getEditor get editor tracker tracker removeToolListener remove tool listener this tracker tracker newTracker tracker tracker tracker activate activate getEditor get editor tracker tracker addToolListener add tool listener this fireToolDone fire tool Sent sent when when an an area area of of the the drawing drawing view view needs need to to be be repainted repaint public void areaInvalidated area invalidate ToolEvent tool event e e fireAreaInvalidated fire area invalidate e e getInvalidatedArea get invalidate area 