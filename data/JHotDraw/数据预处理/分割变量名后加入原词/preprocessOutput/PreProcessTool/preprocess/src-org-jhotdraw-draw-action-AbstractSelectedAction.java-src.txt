AbstractSelectedAction select action java 3 3 1 1 1 1 2006 2006 07 07 09 09 Copyright copyright c c 1996 1996 2006 2006 by by the the original original authors author of of JHotDraw jhotdraw and and all all its it contributors contributor JHotDraw jhotdraw org org All all rights right reserved reserve This software software is is the the confidential confidential and and proprietary proprietary information information of of JHotDraw jhotdraw org org Confidential confidential Information information You you shall shall not not disclose disclose such such Confidential confidential Information information and and shall shall use use it it only only in in accordance accordance with with the the terms term of of the the license license agreement agreement you you entered enter into into with with JHotDraw jhotdraw org org package org org jhotdraw jhotdraw draw draw action action import org org jhotdraw jhotdraw draw draw Drawing drawing import org org jhotdraw jhotdraw draw draw DrawingEditor drawing editor import org org jhotdraw jhotdraw draw draw DrawingView drawing view import org org jhotdraw jhotdraw draw draw FigureSelectionEvent figure selection event import org org jhotdraw jhotdraw draw draw FigureSelectionListener figure selection listener import javax javax swing swing import java beans bean import javax javax swing swing undo undo import org org jhotdraw jhotdraw util util import java util util Abstract super class for actions action which which act act on on the the selected select figures figure of of a a drawing drawing editor editor If no no figures figure are are selected select the the action action is is disabled disabled author author Werner wern Randelshofer randelshof version 3 3 1 1 1 1 2006 2006 07 07 09 09 Fixed fix enabled enable state state br 3 3 1 1 2006 2006 03 03 15 15 Support support for enabled enable state state of of view view added add br 3 3 0 0 2006 2006 02 02 24 24 Changed change to to support support multiple multiple views view br 2 2 0 0 2006 2006 02 02 14 14 Updated update to to work work with with multiple multiple views view br 1 1 0 0 2003 2003 12 12 01 01 Created create public abstract class AbstractSelectedAction select action extends AbstractAction action private DrawingEditor drawing editor editor editor protected ResourceBundleUtil resource bundle util labels label ResourceBundleUtil resource bundle util getLAFBundle get l a f bundle org org jhotdraw jhotdraw draw draw Labels label Locale locale getDefault get private PropertyChangeListener property change listener propertyChangeHandler property change handler new PropertyChangeListener property change listener public void propertyChange property change PropertyChangeEvent property change event evt evt if evt evt getPropertyName get property name equals equal enabled enable updateEnabledState update enable state private class EventHandler event handler implements PropertyChangeListener property change listener FigureSelectionListener figure selection listener public void propertyChange property change PropertyChangeEvent property change event evt evt if evt evt getPropertyName get property name equals equal focusedView focus view if evt evt getOldValue get old value null DrawingView drawing view view view DrawingView drawing view evt evt getOldValue get old value view view removeFigureSelectionListener remove figure selection listener this view view removePropertyChangeListener remove property change listener propertyChangeHandler property change handler if evt evt getNewValue get value null DrawingView drawing view view view DrawingView drawing view evt evt getNewValue get value view view addFigureSelectionListener add figure selection listener this view view addPropertyChangeListener add property change listener propertyChangeHandler property change handler updateEnabledState update enable state public void selectionChanged selection change FigureSelectionEvent figure selection event evt evt updateEnabledState update enable state private EventHandler event handler eventHandler event handler new EventHandler event handler Creates create an an action action which which acts act on on the the selected select figures figure on on the the current current view view of of the the specified specify editor editor public AbstractSelectedAction select action DrawingEditor drawing editor editor editor setEditor set editor editor editor updateEnabledState update enable state protected void updateEnabledState update enable state if getView get view null setEnabled set enable getView get view isEnabled is enable getView get view getSelectionCount get selection count 0 0 else setEnabled set enable false public void dispose dispose if this editor editor null this editor editor removePropertyChangeListener remove property change listener eventHandler event handler if this editor editor getView get view null this editor editor getView get view removeFigureSelectionListener remove figure selection listener eventHandler event handler this editor editor null public void setEditor set editor DrawingEditor drawing editor editor editor if this editor editor null this editor editor removePropertyChangeListener remove property change listener eventHandler event handler if getView get view null getView get view removeFigureSelectionListener remove figure selection listener eventHandler event handler this editor editor editor editor if this editor editor null this editor editor addPropertyChangeListener add property change listener eventHandler event handler public DrawingEditor drawing editor getEditor get editor return editor editor protected DrawingView drawing view getView get view return editor editor null ? ? null editor editor getFocusedView get focus view protected Drawing drawing getDrawing get drawing return getView get view null ? ? null getView get view getDrawing get drawing protected void fireUndoableEditHappened fire undoable edit happen UndoableEdit undoable edit edit edit getDrawing get drawing fireUndoableEditHappened fire undoable edit happen edit edit 