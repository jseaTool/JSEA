std xml parser nano xml $ revision 1 5 $ $ date 2002 03 24 11 37 00 $ $ r e l e s e 2 2 1 $ nano xml 2 2000 2002 purpose 1 2 3 net n3 io i o io reader io reader util enumeration util property util vector std xml parser core parser nano xml $ r e l e s e 2 2 1 $ $ revision 1 5 $ std xml parser i xml parser builder which create logical structure xml data i xml builder builder reader which parser retrieve it data i xml reader reader entity resolv i xml entity resolv entity resolv validator process entity reference validate xml data i xml validator validator create parser std xml parser builder validator reader entity resolv xml entity resolv clean up when s destroy finalize throwable builder reader entity resolv validator finalize set builder which create logical structure xml data builder non builder set builder i xml builder builder builder builder builder which create logical structure xml data builder i xml builder get builder builder set validator validate xml data validator non validator set validator i xml validator validator validator validator validator validate xml data validator i xml validator get validator validator set entity resolv resolv non resolv set resolv i xml entity resolv resolv entity resolv resolv entity resolv non resolv i xml entity resolv get resolv entity resolv set reader which parser retrieve it data reader reader set reader i xml reader reader reader reader reader which parser retrieve it data reader i xml reader get reader reader pars data let builder create logical data structure logical structure build builder net n3 xml occur reading parse data parse xml builder start building reader get reader get line nr scan data builder get result xml e e e xml xml e init cause e xml e scan xml data element lang someth go wrong scan data reader at e o f builder get result str xml util read reader ch str at 0 ch xml util process entity str reader entity resolv ch scan some tag t allow d t namespace property \r skip whitespace xml util invalid input reader get reader get line nr ` + ch + 0x + hex ch + scan xml tag allow d t d t section are allow at point namespace namespace u r i namespace list define namespace lang someth go wrong scan some tag allow d t namespace property namespace str xml util read reader ch str at 0 ch xml util unexpect entity reader get reader get line nr str ch ? process p i process special tag allow d t reader unread ch process element namespace namespace process processing instruction lang someth go wrong process p i xml util skip whitespace reader target xml util scan identifier reader xml util skip whitespace reader reader reader p i reader reader target equal ignore xml builder processing instruction target reader reader close process tag start bang lt allow d t d t section are allow at point lang someth go wrong process special tag allow d t str xml util read reader ch str at 0 ch xml util unexpect entity reader get reader get line nr str ch allow d t process d t xml util unexpect d t reader get reader get line nr d process doc type xml util skip comment reader process d t section lang someth go wrong process d t xml util check literal reader d t xml util expect input reader get reader get line nr d t validator p data reader get reader get line nr reader reader d t reader reader builder add p data reader reader get reader get line nr reader close process document type declaration lang occur reading parse data process doc type xml util check literal reader o t y p e xml util expect input reader get reader get line nr d o t y p e xml util skip whitespace reader buffer buffer root element xml util scan identifier reader xml util skip whitespace reader ch reader read ch p xml util scan reader xml util skip whitespace reader ch reader read ch s xml util scan reader xml util skip whitespace reader ch reader read ch validator parse d t d reader entity resolv xml util skip whitespace reader ch reader read ch xml util expect input reader get reader get line nr ` b e g i n p t h t read d t d reader reader reader open stream reader start stream reader reader set reader set validator parse d t d reader entity resolv e n d p t h t read d t d process regular element namespace namespace u r i namespace list define namespace lang someth go wrong process element namespace property namespace full xml util scan identifier reader full xml util skip whitespace reader prefix colon index index colon index 0 prefix substring 0 colon index substring colon index + 1 vector attr name vector vector attr value vector vector attr type vector validator element start full reader get reader get line nr ch ch reader read ch || ch reader unread ch process attribute attr name attr value attr type xml util skip whitespace reader property extra attribute property validator element attribute process full extra attribute reader get reader get line nr enumeration enm extra attribute key enm ha more element key enm next element value extra attribute get property key attr name add element key attr value add element value attr type add element d t i 0 i attr name size i++ key attr name element at i value attr value element at i type attr type element at i key equal xmln namespace value key start xmln namespace put key substring 6 value prefix builder start element prefix namespace reader get reader get line nr builder start element prefix namespace get property prefix reader get reader get line nr i 0 i attr name size i++ key attr name element at i key start xmln value attr value element at i type attr type element at i colon index key index colon index 0 att prefix key substring 0 colon index key key substring colon index + 1 builder add attribute key att prefix namespace get property att prefix value type builder add attribute key value type prefix builder element attribute process prefix namespace builder element attribute process prefix namespace get property prefix ch reader read xml util expect input reader get reader get line nr ` validator element end reader get reader get line nr prefix builder end element prefix namespace builder end element prefix namespace get property prefix buffer buffer buffer 16 buffer set length 0 str xml util skip whitespace reader buffer str xml util read reader str at 0 str at 1 xml util process entity str reader entity resolv str at 0 str xml util read reader \0 str at 0 xml util skip whitespace reader str xml util scan identifier reader str equal full xml util wrong closing tag reader get reader get line nr str xml util skip whitespace reader reader read xml util closing tag empty reader get reader get line nr validator element end full reader get reader get line nr prefix builder end element prefix namespace builder end element prefix namespace get property prefix ^ reader unread str at 0 scan some tag d t allow namespace property namespace clone ^ str at 0 ch xml util process literal str buffer append ch reader unread str at 0 validator p data reader get reader get line nr reader r content reader reader entity resolv buffer builder add p data r reader get reader get line nr r close process attribute element attr name contain name attribute attr value contain value attribute attr type contain type attribute lang someth go wrong process attribute vector attr name vector attr value vector attr type key xml util scan identifier reader xml util skip whitespace reader xml util read reader equal xml util expect input reader get reader get line nr ` xml util skip whitespace reader value xml util scan reader entity resolv attr name add element key attr value add element value attr type add element d t validator attribute key value reader get reader get line nr 