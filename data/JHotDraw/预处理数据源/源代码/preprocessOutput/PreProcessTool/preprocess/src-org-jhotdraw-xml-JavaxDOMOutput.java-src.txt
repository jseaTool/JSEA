org jhotdraw xml java awt java util javax xml parser javax xml transform javax xml transform dom javax xml transform stream org w3c dom java io javax dom output dom output string doctype hash map object string objectid hash map string object prototype document document node current dom factory factory javax dom output dom factory factory i o exception factory factory objectid hash map object string document document builder factory instance document builder document current document parser configuration exception e i o exception error i o exception e get message error init cause e error save output stream out i o exception doctype null output stream writer w output stream writer out u t f8 w write d o c t y p e w write doctype w write w flush transformer t transformer factory instance transformer t transform dom source document stream result out transformer exception e i o exception error i o exception e get message error init cause e error save writer out i o exception doctype null out write d o c t y p e out write doctype out write transformer t transformer factory instance transformer t transform dom source document stream result out transformer exception e i o exception error i o exception e get message error init cause e error open element string tag name element element document create element tag name current append child element current element close element current current get parent node add comment string comment current append child document create comment comment add text string text current append child document create text node text add attribute string name string value value null element current set attribute name value add attribute string name value element current set attribute name integer to string value add attribute string name value element current set attribute name to string value add attribute string name value 