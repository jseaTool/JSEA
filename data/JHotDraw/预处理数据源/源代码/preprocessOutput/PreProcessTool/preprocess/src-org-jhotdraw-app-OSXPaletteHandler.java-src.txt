org jhotdraw app java awt java awt event java util pref javax swing java util o s x palette handler hash set window palette hash set window hash map window project window hash map window project o s x palette handler instance javax swing timer timer o s x application app window focus listener focus handler window focus listener window gain focus window event e timer stop window contain key e get window app set current project project window get e get window show palette window lost focus window event e timer restart o s x palette handler o s x application app app app timer javax swing timer 60 action listener action perform action event evt maybe hide palette timer set repeat false add window window project project window add window focus listener focus handler window put window project remove window window project project window remove window window remove window focus listener focus handler add palette window palette palette add window focus listener focus handler palette add palette remove palette window palette palette remove palette palette remove window focus listener focus handler set window get palette collection unmodifiable set palette show palette window palette palette palette is visible palette set visible true is focus window w w is focus true window own window w get own window i 0 i own window length i++ is focus own window i true false maybe hide palette ha focus false window window window key set is focus window ha focus true ha focus window size 0 window palette palette is focus palette ha focus true ha focus window palette palette palette set visible false 