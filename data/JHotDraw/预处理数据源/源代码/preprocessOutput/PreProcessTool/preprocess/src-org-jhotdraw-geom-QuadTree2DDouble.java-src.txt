org jhotdraw geom java awt geom java util java awt quad tree2 d t hash map t rectangle2 d outside hash map t rectangle2 d quad node root max capacity 32 min size 32 max outside 32 quad tree2 d root quad node rectangle2 d 0 0 800 600 quad tree2 d rectangle2 d bound root quad node bound add t o rectangle2 d bound root bound contain bound root add o rectangle2 d bound clone outside put o rectangle2 d bound clone outside size max outside reorganize reorganize root join outside put all root object root object clear iterator map entry t rectangle2 d i outside entry set iterator map entry t rectangle2 d entry i next rectangle2 d tree bound rectangle2 d entry get value clone i ha next entry i next rectangle2 d bound entry get value tree bound add bound root bound tree bound i outside entry set iterator i ha next entry i next root add entry get key entry get value outside clear remove t o outside remove o root remove o collection t find contain point2 d p hash set t result hash set t root find contain p result map entry t rectangle2 d entry outside entry set entry get value contain p result add entry get key result collection t find intersect rectangle2 d r find intersect rectangle2 d r get x r get y r get width r get height collection t find intersect rectangle2 d r hash set t result hash set t root find intersect r result map entry t rectangle2 d entry outside entry set entry get value intersect r result add entry get key result collection t find inside rectangle2 d r hash set t result hash set t root find inside r result map entry t rectangle2 d entry outside entry set r contain entry get value result add entry get key result quad node rectangle2 d bound hash map t rectangle2 d object quad node north east quad node north west quad node south east quad node south west quad node rectangle2 d bound bound bound object hash map t rectangle2 d is leaf north east null remove t o object remove o null is leaf north east remove o north west remove o south east remove o south west remove o add t o rectangle2 d o bound 