org jhotdraw draw java awt java awt geom java io java util javax swing undo org jhotdraw draw attribute key org jhotdraw geom org jhotdraw xml dom input org jhotdraw xml dom output round rectangle figure attribute figure round rectangle2 d roundrect d e f a u l t a r c 20 round rectangle figure 0 0 0 0 round rectangle figure x y width height roundrect round rectangle2 d x y width height d e f a u l t a r c d e f a u l t a r c rectangle2 d get bound rectangle2 d roundrect get bounds2 d rectangle2 d get figure draw bound rectangle2 d r rectangle2 d roundrect get bounds2 d grow attribute key get perpendicular hit growth geom grow r grow grow r get arc width roundrect arcwidth get arc height roundrect archeight set arc w h old width roundrect get arc width old height roundrect get arc height roundrect arcwidth w roundrect archeight h fire figure change get draw bound fire undoable edit happen undoable edit string get presentation name rundung undo cannot undo exception super undo will change roundrect arcwidth old width roundrect archeight old height change redo cannot redo exception super redo will change roundrect arcwidth w roundrect archeight h change draw fill graphics2 d g round rectangle2 d r round rectangle2 d roundrect clone grow attribute key get perpendicular fill growth r x grow r y grow r width+ grow 2 r height+ grow 2 r arcwidth+ grow 2 r archeight+ grow 2 r width 0 r height 0 g fill r draw stroke graphics2 d g round rectangle2 d r round rectangle2 d roundrect clone grow attribute key get perpendicular draw growth r x grow r y grow r width+ grow 2 r height+ grow 2 r arcwidth+ grow 2 r archeight+ grow 2 r width 0 r height 0 g draw r contain point2 d p round rectangle2 d r round rectangle2 d roundrect clone grow attribute key get perpendicular hit growth r x grow r y grow r width+ grow 2 r height+ grow 2 r arcwidth+ grow 2 r archeight+ grow 2 r contain p basic set bound point2 d anchor point2 d lead roundrect x math min anchor x lead x roundrect y math min anchor y lead y roundrect width math max 0 1 math ab lead x anchor x roundrect height math max 0 1 math ab lead y anchor y basic transform affine transform tx point2 d anchor get start point point2 d lead get end point basic set bound point2 d tx transform anchor anchor point2 d tx transform lead lead collection handle create handle detail level link list handle handle link list handle super create handle detail level handle add round rect radius handle handle connector find connector point2 d p connection figure prototype chop round rect connector connector find compatible connector connector c is start connector chop round rect connector round rectangle figure clone round rectangle figure that round rectangle figure super clone that roundrect round rectangle2 d roundrect clone that override read dom input in i o exception super read in roundrect arcwidth in get attribute arc width d e f a u l t a r c roundrect archeight in get attribute arc height d e f a u l t a r c override write dom output out i o exception super write out out add attribute arc width roundrect arcwidth out add attribute arc height roundrect archeight restore to object geometry round rectangle2 d r round rectangle2 d geometry roundrect x r x roundrect y r y roundrect width r width roundrect height r height object get restore data roundrect clone point2 d chop point2 d from rectangle2 d out get bound grow s t r o k e p l a c e m e n t get c e n t e r grow attribute key get stroke total width 2 o u t s id e grow attribute key get stroke total width i n s id e grow 0 out x grow out y grow out width+ grow 2 out height+ grow 2 rectangle2 d inner rectangle2 d out clone gw get arc width + grow 2 2 gh get arc height + grow 2 2 inner x gw inner y gh inner width+ gw 2 inner height+ gh 2 angle geom point to angle out from point2 d p geom angle to point out geom point to angle out from p x out x || p x out x + out width p y math min math max p y inner y inner y + inner height p x math min math max p x inner x inner x + inner width p 