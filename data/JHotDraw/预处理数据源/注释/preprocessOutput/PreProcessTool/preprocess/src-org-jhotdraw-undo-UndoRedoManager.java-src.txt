undo redo manager java 1 3 1 2006 04 12 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org same a javax swing undo manager but provide action undo and redo operation author wern randelshof version 1 3 1 2006 04 12 method set locale add br 1 3 2006 02 28 support property change listener add br 1 2 2 2006 02 25 configure action from resource bundle br 1 2 1 2003 11 02 adapt to change in resource bundle util br 1 2 2003 03 16 text and accelerator key are now read from a resource bundle br 1 1 2 2003 03 12 action use now key stroke object instead of string object a accelerator key br 1 1 1 2002 05 10 method add edit is now smart when determine wheth an edit is significant br 1 1 2002 04 08 method ha significant edit clear change add br 1 0 2001 10 09 javax swing undo undo manager property change support property support property change support d e b u g false the resource bundle use internationalisation resource bundle util label flag is set to true when at least one significant undoable edit ha be add to the manager since the last call to discard all edit ha significant edit false flag is set to true when an undo or redo operation is in progress the undo redo manager ignore all incoming undoable edit event flag is true undo or redo in progress sending undoable edit event to the undo redo manager disable the undo and redo function of the manager undoable edit d i s c a r d a l l e d i t s undoable edit can undo false can redo false undo action use in a menu bar undo action action undo action label configure action undo set enable false invoke when an action occur action perform action event evt undo cannot undo exception e system err println cannot undo +e e print stack trace redo action use in a menu bar redo action action redo action label configure action redo set enable false invoke when an action occur action perform action event evt redo cannot redo exception e system out println cannot redo +e the undo action instance undo action undo action the redo action instance redo action redo action resource bundle util get label label null label resource bundle util get l a f bundle org jhotdraw undo label label create undo redo manager undo redo manager get label undo action undo action redo action redo action set locale locale l label resource bundle util get l a f bundle org jhotdraw undo label l discard all edit discard all edit super discard all edit update action set ha significant edit false set ha significant edit value old value ha significant edit ha significant edit value fire property change ha significant edit old value value true at least one significant undoable edit ha be add since the last call to discard all edit ha significant edit ha significant edit in progress insert an edit at index of next add and remove any old edit that be at index of next add or late the die method is call on each edit that is remove is sent in the reverse of the order the edit be add update index of next add p not in progress act a a compound edit p p regardles of in progress undo or redo in progress call die on each edit that is sent p see compound edit end see compound edit add edit add edit undoable edit an edit d e b u g system out println undo redo manager add +an edit undo or redo in progress an edit die true success super add edit an edit update action success an edit is significant edit to be undo an edit set ha significant edit true success get the undo action use a an undo menu item action get undo action undo action get the redo action use a a redo menu item action get redo action redo action update the property of the undo action and of the redo action update action string label d e b u g system out println undo manager update action + edit to be undo + can undo +can undo + can redo +can redo can undo undo action set enable true label get undo presentation name undo action set enable false label label get string undo undo action put value action n a m e label undo action put value action s h o r t d e s c r i p t i o n label can redo redo action set enable true label get redo presentation name redo action set enable false label label get string redo redo action put value action n a m e label redo action put value action s h o r t d e s c r i p t i o n label undoe the last edit event the undo redo manager ignore all incoming undoable edit event undo is in progress undo cannot undo exception undo or redo in progress true super undo undo or redo in progress false update action redoe the last undo edit event the undo redo manager ignore all incoming undoable edit event redo is in progress redo cannot undo exception undo or redo in progress true super redo undo or redo in progress false update action undoe or redoe the last edit event the undo redo manager ignore all incoming undoable edit event undo or redo is in progress undo or redo cannot undo exception cannot redo exception undo or redo in progress true super undo or redo undo or redo in progress false update action add property change listener property change listener listener property support add property change listener listener add property change listener string property name property change listener listener property support add property change listener property name listener remove property change listener property change listener listener property support remove property change listener listener remove property change listener string property name property change listener listener property support remove property change listener property name listener fire property change string property name old value value property support fire property change property name old value value fire property change string property name old value value property support fire property change property name old value value fire property change string property name object old value object value property support fire property change property name old value value 