text tool java 2 0 2006 01 14 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org ??? tool to create or edit exist text figure the editing behavior is implement by overlay the figure provide the text with a floating text area p a tool interaction is once a figure that is not a text holder is click see text holder see floating text area author wern randelshof version 2 0 2006 01 14 change to support precison coordinate br 1 0 2003 12 01 derive from jhotdraw 5 4b1 create a instance the press figure is a text holder it can be edit otherwise a text figure is create update view so the create figure is draw before the floating text figure is overlay note f damage should be null in standard drawing view when the overlay figure is draw because a j text field cannot be scroll view check damage text holder text holder get create figure begin edit text holder mouse drag java awt event mouse event e begin edit text holder text holder text area null text area floating text area text area add action listener text holder typing target typing target null end edit text area create overlay get view text holder text area set bound get field bound text holder text holder get text text area request focus typing target text holder rectangle2 d get field bound text holder figure rectangle2 d r figure get bound insets2 d inset figure get inset r rectangle2 d r x + inset left r y + inset top r width inset left inset right r height inset top inset bottom f i x m e find a way to determine the parameter grow r grow 1 2 r width + 16 r x 1 r y 2 r width + 18 r height + 4 r mouse release mouse event evt create figure null text holder text holder text holder create figure rectangle2 d bound create figure get bound bound width 0 bound height 0 get drawing remove create figure bound width 5 bound height 5 create figure will change create figure basic set bound point2 d bound x bound y point2 d bound x + 100 bound y + 100 create figure change get view add to selection create figure create figure composite figure composite figure create figure layout create figure null get drawing fire undoable edit happen creation edit begin edit text holder end edit typing target null text area get text length 0 typing target set text text area get text create figure null get drawing fire undoable edit happen creation edit create figure null create figure null get drawing remove figure get add figure typing target set text nothing to undo set undo activity null typing target null text area end overlay view check damage action perform action event event end edit fire tool 