text tool java 1 0 19 november 2003 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org ??? tool to create or edit exist text figure the editing behavior is implement by overlay the figure provide the text with a floating text field p a tool interaction is once a figure that is not a text holder is click see text holder see floating text field author wern randelshof version 2 0 2006 01 14 change to support precison coordinate br 1 0 2003 12 01 derive from jhotdraw 5 4b1 create a instance create a instance the press figure is a text holder it can be edit otherwise a text figure is create update view so the create figure is draw before the floating text figure is overlay note f damage should be null in standard drawing view when the overlay figure is draw because a j text field cannot be scroll view check damage text holder text holder get create figure begin edit text holder mouse drag java awt event mouse event e begin edit text holder text holder text field null text field floating text field text field add action listener text holder typing target typing target null end edit text field create overlay get view text holder text field set bound get field bound text holder text holder get text text field request focus typing target text holder rectangle get field bound text holder figure rectangle box get view drawing to view figure get bound n figure get text column dimension d text field get prefer size n d width math max box width d width rectangle box x 6 box y 4 d width d height rectangle box get view drawing to view figure get bound dimension d text field get prefer size 3 d width math max box width d width inset inset text field get inset rectangle box x inset left box y inset top box width + inset left + inset right box height + inset top + inset bottom mouse release mouse event evt create figure null rectangle bound create figure get bound bound width 0 bound height 0 get drawing remove create figure get view add to selection create figure create figure null get drawing fire undoable edit happen creation edit fire tool end edit typing target null typing target will change text field get text length 0 typing target set text text field get text create figure null get drawing fire undoable edit happen creation edit create figure null create figure null get drawing remove figure get add figure typing target set text nothing to undo set undo activity null typing target change typing target null text field end overlay view check damage action perform action event event end edit fire tool 