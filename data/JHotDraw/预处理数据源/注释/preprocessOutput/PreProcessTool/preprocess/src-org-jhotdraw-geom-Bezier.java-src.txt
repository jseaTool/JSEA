bezi java 2 0 1 2006 06 14 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org provide algorithm fitting bezi curve to a set of digitize point p source br an algorithm automatically fitting digitize curve by philip j schneid br from graphic gem academic press 1990 version 2 0 1 2006 06 14 fit bezi curve must preserve close state of fit bezi path object br 2 0 2006 01 14 change to support precision coordinate br 1 0 march 14 2004 author wern randelshof the most point you can have prevent instance creation example of how to use the curve fitting code given an array of point and a tolerance square error between point and fit curve the algorithm will generate a piecewise cubic bezi representation that approximate the point when a cubic is generate the routine draw bezi curve is call which output the bezi curve just create argument are the degree and the control point respectively user will have to implement function themselve ascii output etc digitize point square error fit the bezi curve fit a bezi curve to a set of digitize point param p polygon with a set of digitize point param error user define error square a general path contain the bezi curve fit a bezi curve to a set of digitize point param d array of digitize point param error user define error square a general path contain the bezi curve unit tangent vector at endpoint fit a bezi curve to a set of digitize point param path the path onto which to fit a bezi curve param error user define error square a bezi path contain the bezi curve unit tangent vector at endpoint fit a bezi curve to a sub set of digitize point param d array of digitize point param first indice of first point in d param last indice of last point in d param t hat1 unit tangent vector at start point param t hat2 unit tanget vector at end point param error user define error square param bezi path path to which the bezi curve segment are add control point of fit bezi curve parameter value point improve parameter value maximum fitting error point to split point set at is an array of size one because we need it a an input output parameter number of point in subset error below which you iterate max time to iterate unit tangent vector at split point use heuristic region only ha two point in it parameterize point and attempt to fit curve find max deviation of point to fit curve error not too large some reparameterization and iteration fitting fail split at max error point and fit recursively fit a bezi curve to a sub set of digitize point param d array of digitize point param first indice of first point in d param last indice of last point in d param t hat1 unit tangent vector at start point param t hat2 unit tanget vector at end point param error user define error square param bezi path path to which the bezi curve segment are add control point of fit bezi curve parameter value point improve parameter value maximum fitting error point to split point set at is an array of size one because we need it a an input output parameter number of point in subset error below which you iterate max time to iterate unit tangent vector at split point use heuristic region only ha two point in it parameterize point and attempt to fit curve find max deviation of point to fit curve error not too large some reparameterization and iteration fitting fail split at max error point and fit recursively use least square method to find bezi control point region param d array of digitize point param first indice of first point in d param last indice of last point in d param u prime parameter value region param t hat1 unit tangent vector at start point param t hat2 unit tanget vector at end point precomput rh eqn number of pt in sub curve matrix c matrix x determinant of matrix alpha value left and right utility variable r e t u r n bezi curve ctl pt compute the a s create the c and x matrix c 1 0 + v2 dot a i 0 a i 1 compute the determinant of c and x derive alpha value alpha negative use the wu barsky heuristic see text alpha is 0 you get coincident control point that lead to divide by zero in any subsequent newton raphson root find call first and last control point of the bezi curve are position exactly at the first and last data point control point 1 and 2 are position an alpha distance out on the tangent vector left and right respectively given set of point and their parameterization to find a better parameterization param d array of digitize point param first indice of first point of region in d param last indice of last point of region in d param u current parameter value param bez curve current fit curve parameter value use newton raphson iteration to find better root param q current fit bezi curve param p digitize point param u parameter value vor p q and q u evaluate at q q q improve u compute q u generate control vertex q generate control vertex q compute q u and q u compute f u f u u u f u f u evaluate a bezi curve at a particular parameter value param degree the degree of the bezi curve param v array of control point param t parametric value to find point point on curve at parameter t local copy of control point copy array triangle computation b0 b1 b2 b3 bezi multiplier approximate unit tangent at left endpoint of digitize curve param d digitize point param end index to left end of region approximate unit tangent at right endpoint of digitize curve param d digitize point param end index to right end of region approximate unit tangent at center of digitize curve param d digitize point param center index to center end of region assign parameter value to digitize point using relative distance between point param d digitize point param first indice of first point of region in d param last indice of last point of region in d parameterization find the maximum square distance of digitize point to fit curve param d digitize point param first indice of first point of region in d param last indice of last point of region in d param bez curve fit bezi curve param u parameterization of point param split point point of maximum error input output parameter must be an array of 1 maximum error current error point on curve vector from point to curve graphic gem c 2d and 3d vector c library by andrew glassn from graphic gem academic press 1990 the distance between two point scale the input vector to the length and it length of input vector square length of input vector vector sum c a+b negate the input vector and it the dot product of vector a and b normaliz the input vector and it 