nano xml dom output java 2 1 2006 08 26 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org dom output using nano xml author wern randelshof version 2 1 2006 08 26 method set doctype add br 2 0 1 2006 08 21 method save and print write an empty file br 2 0 2006 06 10 support prototype object add support and array object add br 1 2 2006 03 20 add support value br 1 1 2006 01 18 remove 0 at the end of and number br 1 0 february 17 2004 create the doctype of the xml document map is use to marshall reference to object to the xml dom a key in map is a java object a value in map is string represent a marshal reference to that object map is use to cache prototype object the document use output the current node use output the factory use to create object the stack create a instance hash map false false current document stack stack xml element stack push current write the content of the dom output into the specify output stream save output stream out i o exception writer w output stream writer out u t f8 save w w flush write the content of the dom output into the specify writer save writer out i o exception doctype null out write d o c t y p e out write doctype out write xml writer writer xml writer out writer write xml element document get child get 0 print the content of the dom output into the specify print writer print print writer out xml writer writer xml writer out writer write document writer write xml element document get child get 0 true i o exception e internal error error internal error error init cause e error xml element document get child get 0 print out put a element into the dom document the element is add a a child to the current element in the dom document then it become the current element the element must be close using close element open element string tag name xml element element xml element hash map false false element set name tag name current add child element stack push current current element close the current element of the dom document the parent of the current element become the current element exception illegal argument exception the provide tag name doe not match the tag name of the element close element current xml element stack pop add a comment to the current element of the dom document add comment string comment nano xml doe not support comment add a text to current element of the dom document note multiple consecutive text will be merge add text string text string old current get content old null current set content text current set content old+text add an attribute to current element of the dom document add attribute string name string value value null current set attribute name value add an attribute to current element of the dom document add attribute string name value current set attribute name integer to string value add an attribute to current element of the dom document add attribute string name value current set attribute name value to string add an attribute to current element of the dom document add attribute string name value remove the awkard 0 at the end of each number string str to string value str end with 0 str str substring 0 str length 2 current set attribute name str add an attribute to current element of the dom document add attribute string name value remove the awkard 0 at the end of each number string str to string value str end with 0 str str substring 0 str length 2 current set attribute name str write object object o i o exception o null open element null close element o dom storable write storable dom storable o o string open element string add text string o close element o integer open element add text o to string close element o open element add text o to string close element o open element remove the awkard 0 at the end of each number string str o to string str end with 0 str str substring 0 str length 2 add text str close element o open element remove the awkard 0 at the end of each number string str o to string str end with 0 str str substring 0 str length 2 add text str close element o open element add text o to string close element o color color c color o open element color add attribute rgba + integer to hex string c get r g b close element o open element array a o i 0 i a length i++ write object integer a i close element o open element array a o i 0 i a length i++ write object a i close element o open element array a o i 0 i a length i++ write object a i close element o font font f font o open element font add attribute name f get name add attribute style f get style add attribute size f get size close element o open element e o add attribute type factory get name e add text factory get value e close element illegal argument exception unable to store +o+ +o get xml element write storable dom storable o i o exception string tag name factory get name o tag name null illegal argument exception no tag name +o open element tag name xml element element current objectid contain key o add attribute ref string objectid get o string id integer to string objectid size 16 objectid put o id add attribute id id o write close element element add attribute string name value value value value add attribute name value add attribute string name value value value value add attribute name value add attribute string name value value value value add attribute name value add attribute string name value value value value add attribute name value add attribute string name string value string value value null value equal value add attribute name value object get prototype prototype null prototype hash map string object prototype contain key current get name prototype put current get name factory create current get name prototype get current get name set doctype string doctype doctype doctype 