m d i application java 1 0 june 5 2006 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw app org jhotdraw gui org jhotdraw util org jhotdraw util pref java awt java awt event java bean java io java util java util pref javax swing javax swing event org jhotdraw app action a m d i application can handle the life cycle of multiple document window each being present in a j internal frame of it own a parent j frame provide all the functionality need to work with document such a a menu bar tool bar and palette window author wern randelshof version 1 0 june 5 2006 create m d i application application j frame parent frame j scroll pane scroll pane m d idesktop pane desktop pane preference pref project current project link list action tool bar action create a instance m d i application init application action application model mo get model mo put action about action id about action mo put action exit action id exit action mo put action o s x drop on dock action id o s x drop on dock action mo put action action id action mo put action open action id open action mo put action clear recent file action id clear recent file action mo put action save action id save action mo put action save a action id save a action mo put action close action id close action mo put action undo action id undo action mo put action redo action id redo action mo put action cut action id cut action mo put action copy action id copy action mo put action paste action id paste action mo put action delete action id delete action mo put action duplicate action id duplicate action mo put action select all action id select all action mo put action maximize action id maximize action mo put action minimize action id minimize action mo put action arrange action v e r t i c a l id arrange action desktop pane arrangeable arrangement v e r t i c a l mo put action arrange action h o r i z o n t a l id arrange action desktop pane arrangeable arrangement h o r i z o n t a l mo put action arrange action c a s c a d e id arrange action desktop pane arrangeable arrangement c a s c a d e init project action project p p put action focus action id focus action p launch string arg system set property apple awt graphic use quartz false super launch arg init super init pref preference user node get model null ? get get model get init look and feel init label parent frame j frame get name parent frame set close operation j frame d o n o t h i n g o n c l o s e desktop pane m d idesktop pane scroll pane j scroll pane scroll pane set viewport view desktop pane tool bar action link list action init application action parent frame get content pane add wrap desktop pane scroll pane tool bar action parent frame add window listener window adapter window closing window event evt get model get action exit action id action perform action event parent frame action event a c t i o n p e r f o r m e d window closing parent frame set j menu bar create menu bar preference util install frame pref handler pref parent frame parent frame parent frame set visible true init look and feel true system set property apple laf use screen menu bar false system set property com apple maco use screen menu bar false system set property apple awt graphic use quartz false string laf name u i manager get system look and feel name u i manager set look and feel laf name exception e e print stack trace u i manager get string option pane cs null u i manager put option pane cs show project p p is showing p set showing true file file p get file j internal frame f j internal frame string title file null title label get string unnam file title file get name f set title label get format internal frame title title get name p get multiple open id f set close operation j internal frame d o n o t h i n g o n c l o s e f set closable true f set maximizable true f set resizable true f set iconifiable false preference util install internal frame pref handler pref project f desktop pane point loc f get location move move false iterator i project iterator i ha next project a project project i next a project p a project is showing swing utility get root pane a project get component get parent get location equal loc loc x + 22 loc y + 22 move true move f set location loc palette handler add f p f add internal frame listener internal frame adapter override internal frame closing internal frame event evt set current project p get model get action close action id action perform action event f action event a c t i o n p e r f o r m e d window closing p add property change listener property change listener property change property change event evt string name evt get property name name equal ha unsav change j internal frame f get root pane get parent put client property window modify p ha unsav change name equal file f set title p get file null ? unnam p get file get name f add property change listener property change listener property change property change event evt string name evt get property name name equal select evt get value equal t r u e set current project p f set j menu bar create menu bar p f get content pane add p get component f set visible true desktop pane add f f to front f set select true property veto exception e don t care p get component request focus in window hide project p p is showing j internal frame f j internal frame swing utility get root pane p get component get parent f set visible false f remove p get component desktop pane remove f f dispose project get current project current project set current project project value project old value current project current project value fire property change current project old value value is sharing tool among project true component get component parent frame the wrap desktop pane component wrap desktop pane component c link list action tool bar action get model null id 0 j tool bar tb reverse list j tool bar get model create tool bar null id++ j panel panel j panel border layout panel add tb border layout n o r t h panel add c border layout c e n t e r c panel preference util install tool bar pref handler pref toolbar +id tb tool bar action add first toggle tool bar action tb tb get name j tool bar tb j tool bar tb set name label get string standard tool bar title add standard action to tb id++ j panel panel j panel border layout panel add tb border layout n o r t h panel add c border layout c e n t e r c panel preference util install tool bar pref handler pref toolbar +id tb tool bar action add first toggle tool bar action tb tb get name panel put client property tool bar action tool bar action c add standard action to j tool bar tb j button b application model mo get model b tb add mo get action action id b set focusable false b tb add mo get action open action id b set focusable false b tb add mo get action save action id tb add separator b tb add mo get action undo action id b set focusable false b tb add mo get action redo action id b set focusable false tb add separator b tb add mo get action cut action id b set focusable false b tb add mo get action copy action id b set focusable false b tb add mo get action paste action id b set focusable false create a menu bar j menu bar create menu bar resource bundle util label resource bundle util get l a f bundle org jhotdraw app label application model mo get model j menu bar mb j menu bar j menu m j menu item mi j menu open recent menu m j menu label configure menu m file m add mo get action action id m add mo get action open action id open recent menu j menu label configure menu open recent menu open recent open recent menu add mo get action clear recent file action id update open recent menu open recent menu m add open recent menu m add separator m add mo get action close action id m add mo get action save action id m add mo get action save a action id mo get action export action id null mi m add mo get action export action id m add separator m add mo get action exit action id mb add m m j menu label configure menu m edit m add mo get action undo action id m add mo get action redo action id m add separator m add mo get action cut action id m add mo get action copy action id m add mo get action paste action id m add mo get action duplicate action id m add mo get action delete action id m add separator m add mo get action select all action id mb add m j menu mm mo create menu null mb add mm m j menu j menu window menu m label configure menu m window m add mo get action arrange action c a s c a d e id m add mo get action arrange action v e r t i c a l id m add mo get action arrange action h o r i z o n t a l id m add separator project pr project pr get action focus action id null window menu add pr get action focus action id tool bar action size 0 m add separator action a tool bar action j check box menu item cbmi j check box menu item a action configure j check box menu item cbmi a m add cbmi mb add m m j menu label configure menu m label get string help m add mo get action about action id mb add m add property change listener property change listener property change property change event evt string name evt get property name application model mo get model name project count j menu m window menu m remove all m add mo get action arrange action c a s c a d e id m add mo get action arrange action v e r t i c a l id m add mo get action arrange action h o r i z o n t a l id m add separator iterator i project iterator i ha next project pr project i next pr get action focus action id null m add pr get action focus action id tool bar action size 0 m add separator action a tool bar action j check box menu item cbmi j check box menu item a action configure j check box menu item cbmi a m add cbmi name recent file update open recent menu open recent menu mb update open recent menu j menu open recent menu open recent menu get item count 0 j menu item clear recent file item j menu item open recent menu get item open recent menu get item count 1 open recent menu remove all file f recent file open recent menu add open recent action m d i application f recent file size 0 open recent menu add separator open recent menu add clear recent file item 