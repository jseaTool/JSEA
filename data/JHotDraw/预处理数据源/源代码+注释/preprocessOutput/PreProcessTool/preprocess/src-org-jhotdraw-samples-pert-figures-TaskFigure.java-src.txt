task figure java 1 0 18 juni 2006 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw sample pert figure java io i o exception org jhotdraw sample java awt geom java bean org jhotdraw draw attribute key java util org jhotdraw draw org jhotdraw geom org jhotdraw util org jhotdraw xml task figure author wern randelshof version 1 0 18 juni 2006 create task figure graphical composite figure hash set dependency figure dependency derive attribute we cache it here efficiency reason start time adapter is use to connect a text figure with the name of the task figure model name adapter figure listener task figure target name adapter task figure target target target figure attribute change figure event e we could fire a property change event here in some other object would like to observe u target fire property change name e get old value e get value duration adapter figure listener task figure target duration adapter task figure target target target figure attribute change figure event evt we could fire a property change event here in some other object would like to observe u target fire property change duration e get old value e get value task figure succ target get successor succ update start time create a instance task figure super rectangle figure set layout vertical layout rectangle figure name compartment p f rectangle figure s t r o k e c o l o r set name compartment p f null name compartment p f set attribute enable s t r o k e c o l o r false f i l l c o l o r set name compartment p f null name compartment p f set attribute enable f i l l c o l o r false list figure name compartment list figure name compartment p f list figure attribute compartment list figure separator line figure separator1 separator line figure apply attribute get presentation figure add name compartment add separator1 add attribute compartment insets2 d inset insets2 d 4 8 4 8 l a y o u t i n s e t s set name compartment inset l a y o u t i n s e t s set attribute compartment inset text figure name figure name compartment add name figure text figure f o n t b o l d set name figure true name figure set attribute enable f o n t b o l d false text figure duration figure attribute compartment add duration figure text figure f o n t b o l d set duration figure true duration figure set text 0 duration figure set attribute enable f o n t b o l d false text figure start time figure attribute compartment add start time figure text figure start time figure set editable false start time figure set text 0 start time figure set attribute enable f o n t b o l d false apply attribute set attribute enable s t r o k e d a s h e s false resource bundle util label resource bundle util get l a f bundle org jhotdraw sample pert label set name label get string task name set duration 0 start time 0 dependency hash set dependency figure name figure add figure listener name adapter duration figure add figure listener duration adapter collection handle create handle detail level list handle handle link list handle detail level 0 handle add move handle relative locator north west handle add move handle relative locator north east handle add move handle relative locator south west handle add move handle relative locator south east handle add connection handle relative locator east dependency figure handle set name string value get name figure set text value string get name get name figure get text set duration value old value get duration get duration figure set text integer to string value old value value task figure succ get successor succ update start time get duration integer value of get duration figure get text number format exception e 0 update start time old value get start time value 0 task figure pre get predecessor value math max value pre get start time + pre get duration get start time figure set text integer to string value value old value task figure succ get successor the statement here guard against cyclic task dependency is dependent of succ succ update start time old value value fire area invalidate get start time integer value of get start time figure get text number format exception e 0 text figure get name figure text figure list figure get child 0 get child 0 text figure get duration figure text figure list figure get child 2 get child 0 text figure get start time figure text figure list figure get child 2 get child 1 apply attribute figure f map attribute key object attr attribute figure get presentation figure get attribute map entry attribute key object entry attr entry set f set attribute entry get key entry get value task figure clone task figure that task figure super clone that dependency hash set dependency figure that get name figure add figure listener name adapter that that get duration figure add figure listener duration adapter that that update start time that read dom input in i o exception x in get attribute x 0d y in get attribute y 0d w in get attribute w 0d h in get attribute h 0d set bound point2 d x y point2 d x+w y+h read attribute in in open element model in open element name set name string in read object in close element in open element duration set duration integer in read object in close element in close element write dom output out i o exception rectangle2 d r get bound out add attribute x r x out add attribute y r y write attribute out out open element model out open element name out write object get name out close element out open element duration out write object get duration out close element out close element get layer 0 set dependency figure get dependency collection unmodifiable set dependency add dependency dependency figure f dependency add f update start time remove dependency dependency figure f dependency remove f update start time dependent pert task which are directly connect via a pert dependency to task figure list task figure get successor link list task figure list link list task figure dependency figure c get dependency c get start figure list add task figure c get end figure list predecessor pert task which are directly connect via a pert dependency to task figure list task figure get predecessor link list task figure list link list task figure dependency figure c get dependency c get end figure list add task figure c get start figure list true the current task is a direct or indirect dependent of the specify task the dependency is cyclic then method true code code is pass a a parameter and every other task in the cycle is dependent of task figure t t true task figure pre get predecessor pre is dependent of t true false string to string task figure +hash code + +get name + +get duration + +get start time 