content reader java nano xml java $ revision 1 4 $ $ date 2002 01 04 21 03 28 $ $ name r e l e a s e 2 2 1 $ file is part of nano xml 2 java copyright c 2000 2002 marc de scheemaeck all right reserve software is provide a is without any express or imply warranty in no event will the author be hold liable any damage arise from the use of software permission is grant to anyone to use software any purpose include commercial application and to alter it and redistribute it freely subject to the following restriction 1 the origin of software must not be misrepresent you must not claim that you write the original software you use software in a product an acknowledgment in the product documentation would be appreciate but is not require 2 alter source version must be plainly mark a such and must not be misrepresent a being the original software 3 notice may not be remove or alter from any source distribution net n3 nanoxml java io reader java io i o exception reader read data from another reader until a element ha be encounter author marc de scheemaeck version $ name r e l e a s e 2 2 1 $ $ revision 1 4 $ content reader reader the encapsulate reader i xml reader reader buffer string buffer pointer into the buffer buffer index the entity resolv i xml entity resolv resolv create the reader param reader the encapsulate reader param resolv the entity resolv param buffer data that ha already be read from code reader code content reader i xml reader reader i xml entity resolv resolv string buffer reader reader resolv resolv buffer buffer buffer index 0 clean up the object when it s destroy finalize throwable reader null resolv null buffer null super finalize read a block of data param output buffer where to put the read data param offset first position in buffer to put the data param size maximum number of to read the number of read or 1 at e o f java io i o exception an error occur reading the data read output buffer offset size i o exception read 0 buffer length buffer length offset + size output buffer length size output buffer length offset read size string str ch buffer index buffer length str xml util read reader ch str at 0 ch buffer at buffer index buffer index++ output buffer read ch read++ don t interprete in the buffer ch reader unread ch ch str length 1 str at 1 ch xml util process literal str xml util process entity str reader resolv output buffer read ch read++ read 0 read 1 read xml parse exception e i o exception e get message skip remain data and close the stream java io i o exception an error occur reading the data close i o exception buffer length buffer length string str ch buffer index buffer length str xml util read reader ch str at 0 ch buffer at buffer index buffer index++ don t interprete in the buffer ch reader unread ch ch str length 1 str at 1 xml util process entity str reader resolv xml parse exception e i o exception e get message 