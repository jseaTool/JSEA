s v g live connect applet java 2 0 2006 01 15 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw sample svg org jhotdraw draw org jhotdraw draw action org jhotdraw util java awt java awt geom java awt event java io java net java util javax swing javax swing event netscape javascript org jhotdraw xml s v g live connect applet support loading and saving of image to java script author wrandel version 2 0 change to support precision coordinate br 1 0 create on 10 m???rz 2004 13 22 s v g live connect applet j applet string v e r s i o n 0 44 string n a m e s v g draw initializ the applet draw applet init set look and feel u i manager set look and feel u i manager get system look and feel name throwable e nothing we can t set the desire look and feel u i manager doe automaticaly the right thing u display copyright info we are loading the data container c get content pane c set layout box layout c box layout y a x i s string line get applet info split string split get applet info i 0 i line length i++ c add j label line i we load the data using a worker thread swing worker object construct object result get parameter data null get parameter data length 0 nano xml dom input domi nano xml dom input s v g figure factory string reader get parameter data result domi read object 0 get parameter datafile null input stream in null u r l url u r l get document base get parameter datafile in url open connection get input stream nano xml dom input domi nano xml dom input s v g figure factory in result domi read object 0 in null in close result null throwable t result t result finish container c get content pane c set layout border layout c remove all object result get value init component result null result drawing set drawing drawing result result throwable get drawing add text figure result to string throwable result print stack trace is live connect name netscape javascript j s object is live connect true throwable t is live connect false load button set enable is live connect get parameter dataread null save button set enable is live connect get parameter datawrite null is live connect string method name get parameter dataread method name index of 0 method name method name substring 0 method name index of 1 j s object win j s object get window s v g live connect applet object data win call method name object 0 data string set data string data c validate start set drawing drawing d drawing panel set drawing d drawing get drawing drawing panel get drawing set data string text text null text length 0 string reader in string reader text nano xml dom input domi nano xml dom input s v g figure factory in domi open element s v g draw set drawing drawing domi read object 0 throwable e get drawing clear text figure tf text figure tf set text e get message tf set bound point2 d 10 10 point2 d 100 100 get drawing add tf e print stack trace in null in close string get data array writer out array writer nano xml dom output domo nano xml dom output s v g figure factory domo open element s v g draw domo write object get drawing domo close element domo save out i o exception e text figure tf text figure tf set text e get message tf set bound point2 d 10 10 point2 d 100 100 get drawing add tf e print stack trace out null out close out to string string get parameter info string data string the data to be display by applet datafile u r l an u r l to a file contain the data to be display by applet dataread function the name of a java script function which can be use to read the data datawrite function the name of a java script function which can be use to write the data string get applet info n a m e+ version + v e r s i o n + copyright 2004 \u00a9 wern randelshof + alle rechte vorbehalten + diese software basiert auf + jhotdraw \u00a9 1996 1997 i f a informatik und erich gamma method is call from within the init method to initialize the form w a r n i n g n o t modify code the content of method is alway regenerate by the form editor editor fold defaultstate collapse desc generate code g e n b e g i n init component init component tool button group javax swing button group drawing panel org jhotdraw sample draw drawing panel j tool bar1 javax swing j tool bar load button javax swing j button save button javax swing j button get content pane add drawing panel java awt border layout c e n t e r j tool bar1 set floatable false load button set text lade load button add action listener java awt event action listener action perform java awt event action event evt load evt j tool bar1 add load button save button set text speichern save button add action listener java awt event action listener action perform java awt event action event evt save evt j tool bar1 add save button get content pane add j tool bar1 java awt border layout s o u t h editor fold g e n e n d init component save java awt event action event evt g e n f i r s t event save string method name get parameter datawrite method name index of 0 method name method name substring 0 method name index of 1 j s object win j s object get window object result win call method name object get data throwable t text figure tf text figure fehl +t affine transform tx affine transform tx translate 10 20 tf transform tx get drawing add tf g e n l a s t event save load java awt event action event evt g e n f i r s t event load string method name get parameter dataread method name index of 0 method name method name substring 0 method name index of 1 j s object win j s object get window object result win call method name object 0 result string set data string result throwable t text figure tf text figure fehl +t affine transform tx affine transform tx translate 10 20 tf transform tx get drawing add tf g e n l a s t event load variable declaration not modify g e n b e g i n variable org jhotdraw sample draw drawing panel drawing panel javax swing j tool bar j tool bar1 javax swing j button load button javax swing j button save button javax swing button group tool button group end of variable declaration g e n e n d variable 