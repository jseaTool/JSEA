connection tool java 3 1 2006 07 15 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org ??? org jhotdraw draw org jhotdraw undo org jhotdraw util java awt java awt geom java awt event java util java awt dnd a tool that can be use to connect figure to split connection and to join two segment of a connection connection tool turn the visibility of the connector on when it enter a figure the connection object to be create is specify by a prototype p f i x m e use a tracker instance each state of tool author wern randelshof version 3 1 2006 07 15 add support prototype name br 3 0 2006 06 07 rework br 2 1 2006 03 15 when user is not pressing the mouse button we use the mouse over view a the current view br 2 0 1 2006 02 14 fix drawing code br 2 0 2006 01 14 change to support precision coordinate br 1 0 2003 12 01 derive from jhotdraw 5 4b1 connection tool tool figure listener map attribute key object attribute the anchor point of the interaction connector start connector connector end connector connector target connector figure target the currently create figure connection figure connection the currently manipulate connection point split point the currently edit connection connection figure edit connection the figure that wa actually add note can be a different figure from the one which ha be create figure create figure the prototypical figure that is use to create connection connection figure prototype is press create a instance connection tool connection figure prototype prototype prototype connection tool connection figure prototype map attribute prototype prototype attribute attribute connection tool string prototype name prototype name null connection tool string prototype name map attribute key object attribute prototype connection figure name prototype name instance exception e internal error error internal error unable to create connection figure from +prototype name error init cause e error attribute attribute connection figure get prototype prototype mouse move mouse event evt track connector evt manipulate connection in a context dependent way the mouse down hit a figure start a connection the mousedown hit a connection split a segment or join two segment mouse press mouse event evt super mouse press evt is press true get view clear selection point2 d ap view to drawing anchor get target figure null get target figure set connector visible false null set target figure find connection start ap get drawing get target figure null set start connector find connector ap target prototype get start connector null can connect get target figure point2 d p get start connector get anchor set connection create figure get connection basic set bound p p get connection add figure listener set create figure get connection adjust the create connection or split segment mouse drag java awt event mouse event e point2 d p view to drawing point e get x e get y get connection null track connector e get target connector null p get target connector get anchor connection figure f get connection fire area invalidate f get draw bound f will change f basic set bound f get start point p f change fire area invalidate f get draw bound rectangle2 d view to drawing anchor p edit connection null edit connection will change edit connection set point split point p edit connection change can connect figure start prototype can connect start can connect figure start figure end prototype can connect start end connect the figure the mouse is release over another figure mouse release mouse event e is press false is working false figure c null point2 d p view to drawing point e get x e get y get start connector null c find target p get drawing c null set end connector find connector p c prototype get end connector null composite edit creation edit composite edit verbindung erstellen get drawing fire undoable edit happen creation edit connection figure f get connection f will change f set start connector get start connector f set end connector get end connector f basic set bound f get start point p f update connection f change f remove figure listener get drawing add f get drawing fire undoable edit happen creation edit get connection null get drawing remove get connection set connection null set start connector null set end connector null set create figure null fire tool activate drawing editor editor super activate editor get view clear selection deactivate drawing editor editor super deactivate editor get target figure null get target figure set connector visible false null create the connection figure by the figure prototype is clone connection figure create figure connection figure f connection figure prototype clone get editor apply attribute to f attribute null map entry attribute key object entry attribute entry set f set attribute attribute key entry get key entry get value f find a connectable figure target figure find source point2 d p drawing drawing find connectable figure p drawing find a connectable figure target figure find target point2 d p drawing drawing figure target find connectable figure p drawing figure start get start connector get owner target null get connection null can connect target target include start can connect start target target null find an exist connection figure connection figure find connection point2 d p drawing drawing figure f drawing get figure front to back f null f connection figure connection figure f null set connection connection figure connection connection connection get the connection which is create by tool connection figure get connection connection track connector mouse event e point2 d p view to drawing point e get x e get y figure c null get start connector null c find source p get drawing c find target p get drawing track the figure contain the mouse c get target figure get target figure null get target figure set connector visible false null set target figure c get start connector null get target figure null can connect get start connector get owner get target figure get target figure set connector visible true get connection get target figure null can connect get target figure get target figure set connector visible true get connection connector cc null c null cc find connector p c prototype cc get target connector set target connector cc view check damage draw graphics2 d g create figure null graphics2 d gg graphics2 d g create gg transform get view get drawing to view transform create figure draw gg gg dispose connector find connector point2 d p figure target connection figure f target find connector p f find a connection start figure figure find connection start point2 d p drawing drawing figure target find connectable figure p drawing target null target can connect target null figure find connectable figure point2 d p drawing drawing drawing find figure except p create figure set start connector connector start connector start connector start connector connector get start connector start connector set end connector connector end connector end connector end connector connector get end connector end connector set target connector connector target connector target connector target connector connector get target connector target connector set target figure figure target target target figure get target figure target get the figure that wa actually add note can be a different figure from the one which ha be create figure get create figure create figure set create figure figure create figure create figure create figure figure area invalidate figure event evt fire area invalidate evt get invalidate area figure add figure event e figure change figure event e figure remove figure event e figure request remove figure event e figure attribute change figure event e 