o s x application java 1 0 october 4 2005 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw app org jhotdraw app action o s x drop on dock action ch randelshof quaqua org jhotdraw util org jhotdraw util pref java util java util pref java awt event java bean java awt javax swing java io org jhotdraw app action about action org jhotdraw app action action org jhotdraw app action clear recent file action org jhotdraw app action close action org jhotdraw app action copy action org jhotdraw app action cut action org jhotdraw app action delete action org jhotdraw app action duplicate action org jhotdraw app action exit action org jhotdraw app action export action org jhotdraw app action focus action org jhotdraw app action maximize action org jhotdraw app action minimize action org jhotdraw app action action org jhotdraw app action o s x toggle palette action org jhotdraw app action open action org jhotdraw app action open recent action org jhotdraw app action paste action org jhotdraw app action redo action org jhotdraw app action save action org jhotdraw app action save a action org jhotdraw app action select all action org jhotdraw app action undo action a o s x application can handle the life cycle of multiple document window each being present in a j frame of it own the application provide all the functionality need to work with the document such a a menu bar tool bar and palette window p o s x stand mac o s x application document an o s x application can handle multiple project s at the same time each project get a j frame of it own an o s x application ha one menu bar attach to the top of the screen screen menu bar is share by all project s p o s x application is design mac o s x it will not work on other platform p the screen menu bar ha the following standard menu pre application name file edit window help pre the first menu is the b application menu b it ha the following standard menu item o s x application wire the menu item to the action object specify in bracket the preference menu item is only display the application ha an action with preference action id the other menu item are alway display menu item without action wiring are generate by mac o s x and can not be change pre about application name about action id preference preference action id service hide application name hide other show all quit application name exit action id pre the b file menu b ha the following standard menu item o s x application wire the menu item to the action object specify in bracket the application hasn t an action with the specify id the menu item is not display menu item without action wiring are generate by and can be change by subclass pre action id open open action id open recent close close action id save save action id save a save a action id save all revert to save revert to save action id page setup print page setup action id print print action id pre the b edit menu b ha the following standard menu item o s x application wire the menu item to the action object specify in bracket the application hasn t an action with the specify id the menu item is not display menu item without action wiring are generate by and can be change by subclass pre undo undo action id redo redo action id cut cut action id copy copy action id paste paste action id delete delete action id select all select all action id pre author wern randelshof version 1 0 october 4 2005 create o s x application application o s x palette handler palette handler project current project preference pref link list action palette action create a instance o s x application init super init pref preference user node get model null ? get get model get init look and feel palette handler o s x palette handler init label init application action palette action link list action init palette palette action init screen menu bar launch string arg system set property apple awt graphic use quartz false super launch arg init look and feel system set property apple laf use screen menu bar true system set property com apple maco use screen menu bar true u i manager set look and feel quaqua manager get look and feel name exception e e print stack trace init application action application model mo get model mo put action about action id about action mo put action exit action id exit action mo put action o s x drop on dock action id o s x drop on dock action mo put action action id action mo put action open action id open action mo put action clear recent file action id clear recent file action mo put action save action id save action mo put action save a action id save a action mo put action close action id close action mo put action undo action id undo action mo put action redo action id redo action mo put action cut action id cut action mo put action copy action id copy action mo put action paste action id paste action mo put action delete action id delete action mo put action duplicate action id duplicate action mo put action select all action id select all action mo put action maximize action id maximize action mo put action minimize action id minimize action init project action project p p put action focus action id focus action p add palette window palette palette handler add palette palette remove palette window palette palette handler remove palette palette show project p p is showing p set showing true file file p get file j frame f j frame string title file null title label get string unnam file title file get name f set title label get format frame title title get name p get multiple open id f set close operation j frame d o n o t h i n g o n c l o s e f set prefer size dimension 400 400 preference util install frame pref handler pref project f point loc f get location move move false iterator i project iterator i ha next project a project project i next a project p a project is showing swing utility get window ancestor a project get component get location equal loc loc x + 22 loc y + 22 move true move f set location loc palette handler add f p f add window listener window adapter window closing window event evt set current project p get model get action close action id action perform action event f action event a c t i o n p e r f o r m e d window closing p add property change listener property change listener property change property change event evt string name evt get property name name equal ha unsav change f get root pane put client property window modify p ha unsav change name equal file f set title p get file null ? unnam p get file get name f set j menu bar create menu bar p f get content pane add p get component f set visible true hide project p p is showing j frame f j frame swing utility get window ancestor p get component f set visible false f remove p get component palette handler remove f p f dispose create a menu bar param p the project which the menu bar is create may be code null code the menu bar is attach to an application component such a the screen menu bar or a floating palette window j menu bar create menu bar project p resource bundle util label resource bundle util get l a f bundle org jhotdraw app label application model model get model j menu bar mb j menu bar j menu m j menu item mi j menu open recent menu m j menu label configure menu m file mi m add model get action action id mi set icon null mi m add model get action open action id mi set icon null open recent menu j menu label configure menu open recent menu open recent open recent menu add model get action clear recent file action id update open recent menu open recent menu m add open recent menu m add separator mi m add model get action close action id mi set icon null mi m add model get action save action id mi set icon null mi m add model get action save a action id mi set icon null model get action export action id null mi m add model get action export action id mi set icon null mb add m m j menu label configure menu m edit mi m add model get action undo action id mi set icon null mi m add model get action redo action id mi set icon null m add separator mi m add model get action cut action id mi set icon null mi m add model get action copy action id mi set icon null mi m add model get action paste action id mi set icon null mi m add model get action duplicate action id mi set icon null mi m add model get action delete action id mi set icon null m add separator mi m add model get action select all action id mi set icon null mb add m j menu mm model create menu p mb add mm m j menu j menu window menu m label configure menu m window mi m add model get action minimize action id mi set icon null mi m add model get action maximize action id mi set icon null m add separator project pr project pr get action focus action id null window menu add pr get action focus action id palette action size 0 m add separator action a palette action j check box menu item cbmi j check box menu item a action configure j check box menu item cbmi a cbmi set icon null m add cbmi mb add m add property change listener property change listener property change property change event evt string name evt get property name name project count p null || project contain p j menu m window menu m remove all m add get model get action minimize action id m add get model get action maximize action id m add separator iterator i project iterator i ha next project pr project i next pr get action focus action id null m add pr get action focus action id palette action size 0 m add separator action a palette action j check box menu item cbmi j check box menu item a action configure j check box menu item cbmi a cbmi set icon null m add cbmi remove property change listener name recent file update open recent menu open recent menu mb update open recent menu j menu open recent menu open recent menu get item count 0 j menu item clear recent file item j menu item open recent menu get item open recent menu get item count 1 open recent menu remove all file f recent file open recent menu add open recent action o s x application f recent file size 0 open recent menu add separator open recent menu add clear recent file item project get current project current project set current project project value project old value current project current project value fire property change current project old value value init screen menu bar application model model get model net roydesign app application mrjapp net roydesign app application get instance mrjapp set frameles j menu bar create menu bar null mrjapp get about j menu item set action model get action about action id mrjapp get quit j menu item set action model get action exit action id mrjapp add open document listener model get action o s x drop on dock action id init palette link list action palette action link list j tool bar tool bar link list j tool bar get model create tool bar null j tool bar stb j tool bar stb set name label get string standard tool bar title add standard action to stb tool bar add first stb i 0 x 0 j tool bar tb tool bar i++ tb set floatable false tb set orientation j tool bar v e r t i c a l tb set focusable false j frame d j frame j dialog d j dialog palette add d d set focusable false d set resizable false d get content pane set layout border layout d get content pane add tb border layout c e n t e r d set title tb get name d set alway on top true d set undecorat true d get root pane set window decoration style j root pane f r a m e d get root pane set font font lucida grande font p l a i n 11 d get root pane put client property quaqua root pane is vertical f a l s e d get root pane put client property quaqua root pane is palette t r u e d set j menu bar create menu bar null d pack d set focusable window state false preference util install palette pref handler pref toolbar +i d x x + d get width palette action add o s x toggle palette action d tb get name add palette d add standard action to j tool bar tb j button b application model mo get model b tb add mo get action action id b set focusable false b tb add mo get action open action id b set focusable false b tb add mo get action save action id tb add separator b tb add mo get action undo action id b set focusable false b tb add mo get action redo action id b set focusable false tb add separator b tb add mo get action cut action id b set focusable false b tb add mo get action copy action id b set focusable false b tb add mo get action paste action id b set focusable false is sharing tool among project true component get component null 