xml util java nano xml java $ revision 1 5 $ $ date 2002 02 03 21 19 38 $ $ name r e l e a s e 2 2 1 $ file is part of nano xml 2 java copyright c 2000 2002 marc de scheemaeck all right reserve software is provide a is without any express or imply warranty in no event will the author be hold liable any damage arise from the use of software permission is grant to anyone to use software any purpose include commercial application and to alter it and redistribute it freely subject to the following restriction 1 the origin of software must not be misrepresent you must not claim that you write the original software you use software in a product an acknowledgment in the product documentation would be appreciate but is not require 2 alter source version must be plainly mark a such and must not be misrepresent a being the original software 3 notice may not be remove or alter from any source distribution net n3 nanoxml java io i o exception java io reader java io array reader utility method nano xml author marc de scheemaeck version $ name r e l e a s e 2 2 1 $ $ revision 1 5 $ xml util skip the remainder of a comment it is assume that lt is already read param reader the reader java io i o exception an error occur reading the data skip comment i xml reader reader i o exception xml parse exception reader read xml util error expect input reader get system id reader get line nr dash read 0 ch reader read ch dash read++ dash read 2 dash read 0 skip the remainder of the current xml tag param reader the reader java io i o exception an error occur reading the data skip tag i xml reader reader i o exception xml parse exception level 1 level 0 ch reader read ch ++level level scan a id param id will contain the id param reader the reader the system id java io i o exception an error occur reading the data string scan id string buffer id i xml reader reader i o exception xml parse exception xml util check literal reader u b l i c null xml util skip whitespace reader null id append xml util scan string reader \0 null xml util skip whitespace reader null xml util scan string reader \0 null scan a system id param reader the reader the system id java io i o exception an error occur reading the data string scan system id i xml reader reader i o exception xml parse exception xml util check literal reader y s t e m null xml util skip whitespace reader null xml util scan string reader \0 null retrieve an identifier from the data param reader the reader java io i o exception an error occur reading the data string scan identifier i xml reader reader i o exception xml parse exception string buffer result string buffer ch reader read ch || ch || ch || ch || ch a ch z || ch a ch z || ch 0 ch 9 || ch \u007 e result append ch reader unread ch result to string retrieve a delimit string from the data param reader the reader param entity the escape character amp or % param entity resolv the entity resolv java io i o exception an error occur reading the data string scan string i xml reader reader entity i xml entity resolv entity resolv i o exception xml parse exception string buffer result string buffer starting level reader get stream level delim reader read delim \ delim xml util error expect input reader get system id reader get line nr delimit string string str xml util read reader entity ch str at 0 ch entity str at 1 result append xml util process literal str xml util process entity str reader entity resolv ch reader unread ch str xml util read reader str at 1 result append xml util process literal str result append str reader get stream level starting level ch delim ch 9 || ch 10 || ch 13 result append result append ch result append ch result to string process an entity param entity the entity param reader the reader param entity resolv the entity resolv java io i o exception an error occur reading the data process entity string entity i xml reader reader i xml entity resolv entity resolv i o exception xml parse exception entity entity substring 1 entity length 1 reader entity reader entity resolv get entity reader entity entity reader null xml util error invalid entity reader get system id reader get line nr entity external entity entity resolv is external entity entity reader start stream entity reader external entity process a character literal param entity the entity java io i o exception an error occur reading the data process literal string entity i o exception xml parse exception entity at 2 x entity entity substring 3 entity length 1 integer parse entity 16 entity entity substring 2 entity length 1 integer parse entity 10 skip whitespace from the reader param reader the reader param buffer where to put the whitespace null the whitespace doe not have to be store java io i o exception an error occur reading the data skip whitespace i xml reader reader string buffer buffer i o exception ch buffer null ch reader read ch || ch || ch ch reader read ch ch ch ch buffer append buffer append reader unread ch read a character from the reader param reader the reader param entity the escape character amp or % use to indicate an entity the character or an entity expression like e g amp lt java io i o exception an error occur reading the data string read i xml reader reader entity i o exception xml parse exception ch reader read string buffer buf string buffer buf append ch ch entity ch ch reader read buf append ch buf to string read a character from the reader disallow entity param reader the reader param entity the escape character amp or % use to indicate an entity read i xml reader reader entity i o exception xml parse exception string str xml util read reader entity ch str at 0 ch entity xml util error unexpect entity reader get system id reader get line nr str ch true the data start with i literal i enough are read to determine result param reader the reader param literal the literal to check java io i o exception an error occur reading the data check literal i xml reader reader string literal i o exception xml parse exception i 0 i literal length i++ reader read literal at i false true an xml parse exception to indicate that an expect string is not encounter param system id the system id of the data source param line nr the line number in the data source param expect string the string that is expect error expect input string system id line nr string expect string xml parse exception xml parse exception system id line nr expect + expect string an xml parse exception to indicate that an entity could not be resolve param system id the system id of the data source param line nr the line number in the data source param entity the name of the entity error invalid entity string system id line nr string entity xml parse exception xml parse exception system id line nr invalid entity ` + entity + an xml parse exception to indicate that an entity reference is unexpect at point param system id the system id of the data source param line nr the line number in the data source param entity the name of the entity error unexpect entity string system id line nr string entity xml parse exception xml parse exception system id line nr no entity reference is expect here + entity + an xml parse exception to indicate that a c d a t a section is unexpect at point param system id the system id of the data source param line nr the line number in the data source error unexpect c d a t a string system id line nr xml parse exception xml parse exception system id line nr no c d a t a section is expect here an xml parse exception to indicate that a string is not expect at point param system id the system id of the data source param line nr the line number in the data source param unexpect string the string that is unexpect error invalid input string system id line nr string unexpect string xml parse exception xml parse exception system id line nr invalid input + unexpect string an xml parse exception to indicate that the closing tag of an element doe not match the opening tag param system id the system id of the data source param line nr the line number in the data source param expect name the name of the opening tag param wrong name the name of the closing tag error wrong closing tag string system id line nr string expect name string wrong name xml parse exception xml parse exception system id line nr closing tag doe not match opening tag ` + wrong name + ` + expect name + an xml parse exception to indicate that extra data is encounter in a closing tag param system id the system id of the data source param line nr the line number in the data source error closing tag not empty string system id line nr xml parse exception xml parse exception system id line nr closing tag must be empty an xml validation exception to indicate that an element is miss param system id the system id of the data source param line nr the line number in the data source param parent element name the name of the parent element param miss element name the name of the miss element error miss element string system id line nr string parent element name string miss element name xml validation exception xml validation exception xml validation exception m i s s i n g e l e m e n t system id line nr miss element name attribute name null attribute value null element + parent element name + expect to have a + miss element name an xml validation exception to indicate that an element is unexpect param system id the system id of the data source param line nr the line number in the data source param parent element name the name of the parent element param unexpect element name the name of the unexpect element error unexpect element string system id line nr string parent element name string unexpect element name xml validation exception xml validation exception xml validation exception u n e x p e c t e d e l e m e n t system id line nr unexpect element name attribute name null attribute value null unexpect + unexpect element name + in a + parent element name an xml validation exception to indicate that an attribute is miss param system id the system id of the data source param line nr the line number in the data source param element name the name of the element param attribute name the name of the miss attribute error miss attribute string system id line nr string element name string attribute name xml validation exception xml validation exception xml validation exception m i s s i n g a t t r i b u t e system id line nr element name attribute name attribute value null element + element name + expect an attribute name + attribute name an xml validation exception to indicate that an attribute is unexpect param system id the system id of the data source param line nr the line number in the data source param element name the name of the element param attribute name the name of the unexpect attribute error unexpect attribute string system id line nr string element name string attribute name xml validation exception xml validation exception xml validation exception u n e x p e c t e d a t t r i b u t e system id line nr element name attribute name attribute value null element + element name + not expect an attribute + name + attribute name an xml validation exception to indicate that an attribute ha an invalid value param system id the system id of the data source param line nr the line number in the data source param element name the name of the element param attribute name the name of the attribute param attribute value the value of that attribute error invalid attribute value string system id line nr string element name string attribute name string attribute value xml validation exception xml validation exception xml validation exception a t t r i b u t e w i t h i n v a l id v a l u e system id line nr element name attribute name attribute value invalid value attribute + attribute name an xml validation exception to indicate that a p c d a t a element wa miss param system id the system id of the data source param line nr the line number in the data source param parent element name the name of the parent element error miss p c data string system id line nr string parent element name xml validation exception xml validation exception xml validation exception m i s s i n g p c d a t a system id line nr element name null attribute name null attribute value null miss p c d a t a in element + parent element name an xml validation exception to indicate that a p c d a t a element wa unexpect param system id the system id of the data source param line nr the line number in the data source param parent element name the name of the parent element error unexpect p c data string system id line nr string parent element name xml validation exception xml validation exception xml validation exception u n e x p e c t e d p c d a t a system id line nr element name null attribute name null attribute value null unexpect p c d a t a in element + parent element name an xml validation exception param system id the system id of the data source param line nr the line number in the data source param message the error message param element name the name of the element param attribute name the name of the attribute param attribute value the value of that attribute validation error string system id line nr string message string element name string attribute name string attribute value xml validation exception xml validation exception xml validation exception m i s c e r r o r system id line nr element name attribute name attribute value message 