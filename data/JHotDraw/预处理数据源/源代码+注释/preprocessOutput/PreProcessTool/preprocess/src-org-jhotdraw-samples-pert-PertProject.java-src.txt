draw project java 1 1 2006 06 10 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw sample pert java util pref org jhotdraw gui org jhotdraw io org jhotdraw undo org jhotdraw util java awt java bean java io java lang reflect javax swing javax swing border org jhotdraw app org jhotdraw app action org jhotdraw draw org jhotdraw draw action org jhotdraw xml org jhotdraw sample pert figure a pert drawing project author wern randelshof version 1 1 2006 06 10 extend to support draw application model br 1 0 2006 02 07 create pert project project each draw project us it own undo redo manager allow undoing and redo action p project undo redo manager undo depend on the type of an application there may be one editor p project or a single share editor all project drawing editor editor grid constrain visible constrain grid constrain 10 10 grid constrain invisible constrain grid constrain 1 1 preference pref create a project pert project initializ the project init super init init component j panel zoom button panel j panel border layout scroll pane set layout placard scroll pane layout scroll pane set border empty border 0 0 0 0 set editor drawing editor view set dom factory pert factory undo undo redo manager view set drawing drawing view get drawing add undoable edit listener undo init action undo add property change listener property change listener property change property change event evt set ha unsav change undo ha significant edit resource bundle util label resource bundle util get l a f bundle org jhotdraw draw label j panel placard panel j panel border layout javax swing button p button p button tool bar button factory create zoom button view p button put client property quaqua button style placard p button put client property quaqua component visual margin inset 0 0 0 0 p button set font u i manager get font small system font placard panel add p button border layout w e s t p button tool bar button factory create toggle grid button view p button put client property quaqua button style placard p button put client property quaqua component visual margin inset 0 0 0 0 p button set font u i manager get font small system font label configure tool bar button p button align grid small placard panel add p button border layout e a s t scroll pane add placard panel j scroll pane l o w e r l e f t c o r n e r pref preference user node get set grid visible pref get project grid visible false set scale factor pref get project scale factor 1d drawing editor get editor editor set editor drawing editor value drawing editor old value editor old value null old value remove view editor value value null value add view set grid visible value old value is grid visible constrain c value ? visible constrain invisible constrain view set constrain c fire property change grid visible old value value pref put project grid visible value is grid visible view get constrain visible constrain get scale factor view get scale factor set scale factor value old value get scale factor view set scale factor value fire property change scale factor old value value pref put project scale factor value initializ project specific action init action put action undo action id undo get undo action put action redo action id undo get redo action set ha unsav change value super set ha unsav change value undo set ha significant edit value write the project to the specify file write file f i o exception output stream out null out buffer output stream file output stream f nano xml lite dom output domo nano xml lite dom output view get dom factory domo open element pert diagram domo write object view get drawing domo close element domo save out out null out close i o exception e out null out close read the project from the specify file read file f i o exception input stream in null in buffer input stream file input stream f nano xml lite dom input domi nano xml lite dom input view get dom factory in domi open element pert diagram drawing drawing drawing domi read object domi close element swing utility invoke and wait runnable run view get drawing remove undoable edit listener undo view set drawing drawing view get drawing add undoable edit listener undo undo discard all edit interrupt exception e internal error error internal error e init cause e error invocation target exception e internal error error internal error e init cause e error in null in close i o exception e set a drawing editor the project set drawing editor drawing editor value editor null editor remove view editor value editor null editor add view get the drawing editor of the project drawing editor get drawing editor editor clear the project clear view set drawing drawing undo discard all edit override j file chooser create open chooser j file chooser c super create open chooser c add choosable file filter extension file filter pert diagram xml c override j file chooser create save chooser j file chooser c super create save chooser c add choosable file filter extension file filter pert diagram xml c method is call from within the constructor to initialize the form w a r n i n g n o t modify code the content of method is alway regenerate by the form editor editor fold defaultstate collapse desc generate code g e n b e g i n init component init component scroll pane javax swing j scroll pane view org jhotdraw draw drawing view set layout java awt border layout scroll pane set horizontal scroll bar policy javax swing scroll pane constant h o r i z o n t a l s c r o l l b a r a l w a y s scroll pane set vertical scroll bar policy javax swing scroll pane constant v e r t i c a l s c r o l l b a r a l w a y s scroll pane set viewport view view add scroll pane java awt border layout c e n t e r editor fold g e n e n d init component variable declaration not modify g e n b e g i n variable javax swing j scroll pane scroll pane org jhotdraw draw drawing view view end of variable declaration g e n e n d variable 