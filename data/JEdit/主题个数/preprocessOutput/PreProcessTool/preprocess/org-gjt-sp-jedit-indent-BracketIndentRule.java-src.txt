bracket indent rule tab size 4 indent size 4 no tab collapse fold 1 2005 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s indent text segment buffer j edit buffer syntax token syntax token handler syntax token marker bracket indent rule 24413 2016 06 19 11 07 31 kerik sf bracket indent rule indent rule bracket indent rule constructor bracket indent rule open bracket close bracket open bracket open bracket close bracket close bracket bracket bracket open count close count get bracket bracket get bracket j edit buffer buffer line index get bracket buffer line index 0 buffer get line length line index get bracket bracket get bracket j edit buffer buffer line index begin end line scanner scanner line scanner begin end buffer mark token line index scanner scanner result get get name + + open bracket + + close bracket + open bracket close bracket line scanner line scanner token handler bracket result scan index begin index end index line scanner begin end result bracket scan index 0 begin index begin end index end scan segment seg offset length index scan index index end index index begin index num skip begin index index num skip length offset + num skip length num skip index begin index index + length end index length end index index i 0 i length ++i seg seg offset + offset + i open bracket result open count++ close bracket result open count 0 result open count result close count++ handle token segment seg offset length token marker line context context reject comment literal accept all other token comment literal scan seg offset length scan index + length set line context token marker line context line context 