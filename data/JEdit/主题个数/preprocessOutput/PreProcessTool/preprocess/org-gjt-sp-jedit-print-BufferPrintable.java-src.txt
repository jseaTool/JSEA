buffer printable printable tab size 4 indent size 4 no tab collapse fold 1 2001 2003 2002 thomas dilt g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s print importsimport text tab expand utility font geom print reflect list syntax deprecate buffer printable 24592 2017 01 20 02 34 44 vampire0 deprecate replace buffer printer1 7 all workaround 1 3 1 4 t matter since j edit require 1 8 at minimum leaving rath than remove since might need stand alone text area buffer printable printable buffer printable constructor buffer printable printer job job format view view buffer buffer font font header footer line number color job job format format view view buffer buffer font font header header footer footer line number line number style syntax utility load style j edit get property print font j edit get property print fontsize 10 color style token n u l l syntax style text color font change white text black i 0 i style length i++ syntax style s style i s get foreground color equal color w h i t e s get background color style i syntax style color b l k style i get background color style i get font line list list chunk token handler display token handler print print buffer read lock format job print printer job get print name print attribute print request attribute set job format printer abort ae log log log d e b u g ae e log log log e r r o r e e utility runnable run g u i utility view print print print graphic gfx page format page format page index printer we keep first non frc we get since sometime we get invalid one on subsequent page on window frc frc graphics2 d gfx get font render context log log log d e b u g font render context + frc log log log d e b u g ask print page + page index log log log d e b u g current page + current page page index current page i current page i page index i++ log log log d e b u g current physical line now + current page start current physical line current page start print page gfx page format i current page page index 1 log log log d e b u g current page now + current page page index current page + 1 end log log log d e b u g end n o s u h p g e current page start current physical line log log log d e b u g 2 current physical line now + current page start current page page index log log log d e b u g 2 current page now + current page page index current page current physical line current page start log log log d e b u g 3 current physical line now + current page start print page gfx page format page index p g e e x i s t s member variable color header color color light gray color header text color color black color footer color color light gray color footer text color color black color line number color color gray color text color color black instance variable printer job job format view view buffer buffer font font syntax style style header footer line number current page current page start current physical line end line metric lm list chunk line list font render context frc display token handler token handler print page print page graphic gfx page format page format page index actually paint log log log d e b u g print page + page index + + actually paint + graphics2 d gfx graphics2 d gfx gfx set font font page x page format get imageable x page y page format get imageable y page width page format get imageable width page height page format get imageable height log log log d e b u g 1 page dimension + page width + x + page height header header height paint header gfx page x page y page width actually paint page y + header height page height header height footer footer height paint footer gfx page x page y page width page height page index actually paint page height footer height glyph vector j edit get property print glyph vector line number width determine line number width line number +1 s ensure 99 get 3 digit 103 get 4 digit so on line number digit math ceil math log buffer get line count + 1 math log 10 + 1 now we know how many there are get width line number digit i 0 i length i++ i line number width font get bound 0 line number digit frc get width line number width 0 0 log log log d e b u g 2 page dimension + page width line number width + x + page height calculate tab size tab size j edit get property print tab size 8 tab size i 0 i length i++ i tab width font get bound 0 tab size frc get width print tab expand e print tab expand tab width lm font get line metric g gy y x frc log log log d e b u g line height + lm get height y 0 0 print loop current physical line buffer get line count log log log d e b u g finish buffer end print loop j edit get property print fold view get text area get display line visible current physical line log log log d e b u g skip invisible line current physical line++ line list clear token handler init style frc e line list page width line number width 1 buffer mark token current physical line token handler line list empty line list add y + lm get height line list size page height log log log d e b u g finish page before line + current physical line print loop line number actually paint gfx set font font gfx set color line number color gfx draw value current physical line + 1 page x page y + y + lm get height chunk chunk line list y + lm get height chunk chunk chunk chunk actually paint font metric metric gfx get font metric chunk paint chunk background chunk gfx page x + line number width page y + y metric get height chunk paint chunk list chunk gfx page x + line number width page y + y glyph vector current physical line++ paint header paint header graphics2 d gfx page x page y page width actually paint header text j edit get property print header text buffer get name font render context frc gfx get font render context lm font get line metric header text frc rectangle2 d bound font get bound header text frc rectangle2 d header bound rectangle2 d page x page y page width bound get height actually paint gfx set color header color gfx fill header bound gfx set color header text color gfx draw header text page x + page width bound get width 2 page y + lm get ascent header bound get height paint footer paint footer graphics2 d gfx page x page y page width page height page index actually paint footer text j edit get property print footer text date value page index + 1 font render context frc gfx get font render context lm font get line metric footer text frc rectangle2 d bound font get bound footer text frc rectangle2 d footer bound rectangle2 d page x page y + page height bound get height page width bound get height actually paint gfx set color footer color gfx fill footer bound gfx set color footer text color gfx draw footer text page x + page width bound get width 2 page y + page height bound get height + lm get ascent footer bound get height print tab expand print tab expand tab expand tab width print tab expand constructor print tab expand tab width tab width tab width next tab stop next tab stop x tab offset ntab x + 1 tab width ntab + 1 tab width 