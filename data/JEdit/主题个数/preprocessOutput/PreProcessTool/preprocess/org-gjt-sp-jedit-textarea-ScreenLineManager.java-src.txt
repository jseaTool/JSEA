screen line manage screen line count tab size 4 indent size 4 no tab collapse fold 1 2004 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s textarea importsimport buffer debug log perform mapping between physical line screen line since j edit 4 3pre1 screen line 24252 2015 12 23 01 06 15 screen line screen line constructor screen line j edit buffer buffer buffer buffer buffer loading reset screen line count valid screen line count valid line screen line || line 0 || line screen line length screen line line 0 get screen line count how many screen line contain given physical line great than 1 when using soft wrap line physical line screen line count get screen line count line screen line count valid line screen line line set screen line count set number screen line specify physical line split into line physical line number count line count 1 no wrap set screen line count line count count 0 line count bogu count m x v l u e limitation count m x v l u e log log log e r r o r max screen line count hit debug s r e e n l i n e s d e b u g log log log d e b u g set screen line count + line + + count + screen line reset screen line line count invalidate screen line count invalidate screen line count i 0 line count buffer get line count i line count i++ invalidate screen line count i invalidate screen line count invalidate screen line count physical line no screen line physical line no 0 reset reset screen line buffer get line count content insert content insert start line num line end line start line + num line invalidate screen line count start line line count buffer get line count num line 0 screen line length line count screen line n line count + 1 1 arraycopy screen line 0 screen line n 0 screen line length screen line screen line n arraycopy screen line start line screen line end line line count end line i 0 i num line i++ screen line start line + i 0 content remove content remove start line num line end line start line + num line invalidate screen line count start line num line 0 end line screen line length arraycopy screen line end line + 1 screen line start line + 1 screen line length end line 1 member j edit buffer buffer contain screen line count each physical line screen line physical line no 0 invalid entry no screen line calculate yet screen line physical line no 0 valid entry no screen line already calculate screen line 