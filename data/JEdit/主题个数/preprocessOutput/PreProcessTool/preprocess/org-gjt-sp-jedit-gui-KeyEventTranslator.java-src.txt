key event translator hide some wart w t event p i tab size 4 indent size 4 no tab collapse fold 1 2003 2005 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s gui importsimport event key stroke hash map map debug operate log conjunction key event workaround hide some wart w t key event p i key event translator 23981 2015 08 10 14 56 24 key event translator add translation add keyboard translation key1 translate key key2 into key since j edit 4 2pre3 add translation key key1 key key2 tran map put key1 key2 translate key event key event last key press event last key press accept pas an event from link key event workaround process key event event key event evt key event translate since j edit 4 2pre3 key translate key event key event evt modifier evt get modifier key value evt get key event k e y p r e s s e d key evt get key key key event v k 0 key key event v k 9 || key key event v k key key event v k value key modifier modifier \0 character lower key key key event v k t b evt consume value key modifier modifier key \0 key key event v k s p e s p e s+ s p e we pas key type since international keyboard sometime produce k e y p r e s s e d s p e k e y t y p e d s p e eg space insert modifier input event s h i f t m s k 0 value value key modifier modifier 0 value key modifier modifier key \0 key event k e y t y p e d ch evt get key ch \b modifier input event s h i f t m s k 0 ignore mod debug l t k e y p r e s s e d d i s b l e d on mac o s a+ user input ignore mod input event s h i f t m s k | input event l t g r p h m s k | input event l t m s k on mac o s a+ user input ignore mod input event s h i f t m s k | input event l t g r p h m s k modifier input event l t g r p h m s k 0 modifier ignore mod 0 ch value key modifier modifier 0 ch value key 0 ch i guess translate event evt field set so consume won t work i t think problem nothing us translation anyway key tran tran map get value tran value tran parse key convert keystroke form i modifier i + i shortcut i where i modifier i combination alt control s shift m meta i shortcut i single character keycode name from key event v k prefix key stroke description key stroke since j edit 4 2pre3 key parse key key stroke key stroke key modifier 0 piece key stroke split \\+ 2 piece length 1 key piece 0 modifier parse modifier piece 0 key piece 1 key length 1 key modifier modifier 0 key at 0 key length 0 log log log e r r o r key event translator invalid key stroke + key stroke key equal s p e key modifier modifier 0 parse key key key event v k u n d e f i n e d key modifier modifier \0 parse key stroke convert key stroke form i modifier i + i shortcut i where i modifier i combination alt control s shift m meta i shortcut i single character keycode name from key event v k prefix correspond multiple key stroke e g c+e c+ o m m shortcut description key stroke since j edit 5 0 key stroke parse key stroke shortcut shortcut || shortcut index 1 key modifier 0 piece shortcut split \\+ 2 piece length 1 key piece 0 modifier parse modifier piece 0 key piece 1 key length 1 key stroke get key stroke character key at 0 modifier key length 0 log log log e r r o r key event translator invalid key stroke + shortcut key parse key key key key event v k u n d e f i n e d key stroke get key stroke key modifier set modifier mapping change mapping between symbolic modifier key name m s modifier flag map than one modifier symobolic modifier example p set modifier mapping input event t r l m s k input event l t m s k | input event m e t m s k 0 input event s h i f t m s k p cannot map modif than one symbolic modifier modifier s map modifier modifier s map modifier m modifier s map m modifier s modifier s map s modifier since j edit 4 2pre3 set modifier mapping m s duplicate mapping | m | s | m | s | m s duplicate mapping input event t r l m s k 0 illegal argument t r l map than one modifier duplicate mapping input event l t m s k 0 illegal argument l t map than one modifier duplicate mapping input event m e t m s k 0 illegal argument m e t map than one modifier duplicate mapping input event s h i f t m s k 0 illegal argument s h i f t map than one modifier key event translator key event translator key event translator m m key event translator s s get symbolic modifier name symbolic modifier name specify modifier flag mod modifier constant from input event since j edit 4 2pre3 get symbolic modifier name mod mod 0 mod 0 mod m 0 m mod s 0 s \0 modifier m o d s input event t r l m s k input event l t m s k input event m e t m s k input event s h i f t m s k modifier mod builder buf modifier m o d s mod modifier 0 buf lazy append buf get symbolic modifier name modifier buf buf get modifier contain symbolic modifier name set specify event evt event since j edit 4 2pre3 get modifier input event evt builder buf builder evt control down buf append get symbolic modifier name input event t r l m s k evt alt down buf append get symbolic modifier name input event l t m s k evt meta down buf append get symbolic modifier name input event m e t m s k evt shift down buf append get symbolic modifier name input event s h i f t m s k buf length 0 ? buf m s member map pool key map key key tran map hash map key key builder lazy append builder buf ch buf buf builder buf index value ch 1 buf append ch buf operate mac o s set modifier mapping input event m e t m s k c+ input event t r l m s k a+ m+ discard key event workaround input event l t m s k m+ input event s h i f t m s k s+ set modifier mapping input event t r l m s k input event l t m s k input event m e t m s k input event s h i f t m s k parse modifier parse modifier modifier modifier 0 ch modifier character upper ch modifier | modifier | m modifier | m s modifier | s modifier parse key pars name keycode from key event actual member e g v k o m m become key event v k o m m key event v k u n d e f i n e d no such member found parse key key event get field v k concat get e log log log e r r o r key event translator invalid key + key event v k u n d e f i n e d key key modifier key input hash wheth key event applie all j edit window only specific j edit g u i component from global context key modifier key input modifier modifier key key input input hash key + input override hash hash override equal o o key key k key o equal modifier k modifier key k key input k input override modifier ? modifier + + key 16 + + input 16 + set from global context from global context from global context from global context 