v f s directory entry table model v f s directory entry table model tab size 4 indent size 4 no tab collapse fold 1 2003 2005 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s browser importsimport table io v f s io v f s io v f s io v f s log standard utility v f s directory entry table model 23970 2015 08 08 18 10 36 since j edit 4 2pre1 v f s directory entry table model table model v f s directory entry table model constructor v f s directory entry table model ext attr list extend attribute sort column 0 ascending set root set root v f s vf list v f s list ext attr clear add extend attribute vf length 0 fire table row delete 0 length 1 entry list size i 0 i length i++ i entry list get i 0 length 0 fire table row insert 0 length 1 sort entry compare get sort attribute sort column ascending fire table structure change expand expand v f s vf entry entry list v f s list start index 1 i 0 i length i++ i entry start index i start index 1 collapse vf start index add extend attribute vf entry expand list make large enough destination entry entry length + list size entry subdir entry list size i 0 i list size i++ subdir i entry list get i entry level + 1 entry sort expand entry accord current sort sort subdir entry compare get sort attribute sort column ascending make room after expand entry subdir next index start index + 1 arraycopy 0 0 next index arraycopy subdir 0 next index list size arraycopy next index next index + list size length next index fire table row insert start index + 1 start index + list size + 1 fire table row update start index start index fire table structure change start index collapse collapse v f s vf index entry entry index entry expand entry expand last index index + 1 last index length entry e last index e level entry level last index++ e expand remove extend attribute v f s get v f s path e dir entry get path remove extend attribute vf entry entry length last index + index + 1 arraycopy 0 0 index + 1 arraycopy last index index + 1 length last index fire table row update index index fire table row delete index + 1 last index fire table structure change get column count get column count 1 + ext attr size get row count get row count 0 length get column name get column name col col 0 j edit get property vf browser name j edit get property vf browser + get extend attribute col get column get column col entry get value at get value at row col row get ascending get ascending ascending get sort column get sort column sort column get sort attribute get sort attribute column column 0 ? name get extend attribute column sort column sort column column toggle ascending descend column wa click again ascending sort column column || ascending we t sort some attribute sort get sort attribute column sort v f s e s t t u s sort entry compare sort ascending remember column sort column column fire table structure change get extend attribute get extend attribute index ext attr get index 1 name get column width i column index save column width since j edit 4 3pre2 get column width i ext attr get extend attribute i j edit get property vf browser + ext attr + width 100 set column width i column index w column width since j edit 4 3pre2 set column width i w ext attr get extend attribute i j edit set property vf browser + ext attr + width w column move column move from from from 1 || from get column count 1 || get column count extend attribute ea ext attr remove from 1 ext attr add 1 ea get v f s get v f s f v f s length i 0 i f length i++ f i i dir entry f member entry member list extend attribute ext attr sort column ascending add extend attribute add extend attribute v f s vf attr vf get extend attribute vf attr loop i 0 i attr length i++ extend attribute attr ext attr attr i equal attr name attr ref++ vf attr loop vf ha an extend attribute which list add end ref count 1 ext attr add extend attribute attr i remove extend attribute remove extend attribute v f s vf attr vf get extend attribute vf attr loop i 0 i attr length i++ iterator extend attribute it ext attr iterator it ha next extend attribute attr it next attr i equal attr name attr ref 0 we no longer dir using extend attribute it remove vf attr loop vf ha an extend attribute which list ??? log log log w r n i n g we forget about + attr i entry entry v f s dir entry branch an expand dir? expand how deeply we are nest level parent entry entry parent extension extension entry v f s dir entry level entry parent dir entry level parent parent entry v f s dir entry level dir entry dir entry level level extension misc utility get extension dir entry get name extend attribute extend attribute reference counter allow u remove column from table when no directory using column visible ref name extend attribute name name name ref 1 entry compare link comparator compare link v f s directory entry table model entry instance sorting column v f s browser since j edit 4 3pre7 entry compare comparator entry sort ignore sort mix dir sort ascending sort attribute create entry compare expand branch are sort too keep their parent entry sort extend attribute which sort entry ascending sort order reverse entry compare sort ascending sort mix dir j edit get property vf browser sort mix dir sort ignore j edit get property vf browser sort ignore sort ascending ascending sort attribute sort compare entry entry1 entry entry2 we want compare sibling ancestor entry entry1 level entry2 level compare entry1 entry2 parent entry1 level entry2 level compare entry1 parent entry2 here we entry same level entry1 parent entry2 parent compare entry1 parent entry2 parent here we sibling same parent let s real comparison v f s file1 entry1 dir entry v f s file2 entry2 dir entry sort mix dir file1 get type file2 get type file2 get type file1 get type result modify attribute present then we local sort attribute v f s e m o d i f i e d result file1 get modify compare file2 get modify sort size sort attribute v f s e s i e result file1 get length compare file2 get length sort type extension sort attribute v f s e t y p e result standard utility compare entry1 extension entry2 extension sort ignore sort name result standard utility compare file1 get name file2 get name sort ignore sort ascending ? result result 