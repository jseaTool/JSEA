selection select text tab size 4 indent size 4 no tab collapse fold 1 2001 2005 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s textarea importsimport list list buffer j edit buffer standard utility an hold data on region select text an cannot use directly instead serve parent two specific type selection structure link selection range represent an ordinary range select text link selection rect represent rectangular selection john gellene p i documentation selection 21831 2012 06 18 22 54 17 ezust since j edit 3 2pre1 selection cloneable get start start offset selection get start start get end end offset selection get end end get start beginning portion selection fall on specify line use manipulate selection text on line line basis buffer buffer line line number since j edit 4 1pre1 get start j edit buffer buffer line get end end portion selection fall on specify line use manipulate selection text on line line basis buffer buffer line line number since j edit 4 1pre1 get end j edit buffer buffer line get start line starting line number selection get start line start line get end line ending line number selection get end line end line overlap selection specify selection overlap s other selection since j edit 4 1pre1 overlap selection s start s start start s end || end s start end s end override get get name + start + start + end + end + start line + start line + end line + end line + clone override clone clone clone support e internal i just drink whole + bottle cough syrup i feel + funny member start end start line end line selection constructor selection selection constructor selection selection sel start sel start end sel end selection constructor selection start end start start end end next two maybe? get text j edit buffer buffer builder buf replace selection given text buffer buffer text text offset at end insert text set text j edit buffer buffer text call when text insert into buffer buffer buffer question start line first line start start offset from beginning buffer num line number line insert length number character insert selection wa change content insert j edit buffer buffer start line start num line length call when text remove from buffer buffer buffer question start line first line start start offset from beginning buffer num line number line remove length number character remove selection wa change content remove j edit buffer buffer start line start num line length range an ordinary range selection since j edit 3 2pre1 range selection range constructor range range constructor range selection sel sel range constructor range start end start end get start override get start j edit buffer buffer line line start line start buffer get line start offset line get end override get end j edit buffer buffer line line end line end buffer get line end offset line 1 member get text override get text j edit buffer buffer builder buf buf append buffer get text start end start set text replace selection given text buffer buffer text text offset at end insert text override set text j edit buffer buffer text buffer remove start end start text text length 0 buffer insert start text start + text length start content insert override content insert j edit buffer buffer start line start num line length change start start start + length num line 0 start line buffer get line offset start change end start end + length num line 0 end line buffer get line offset end change change content remove override content remove j edit buffer buffer start line start num line length end start + length change start start start end start start change start end start length change end start end end end start change end end end length change change num line 0 start line buffer get line offset start end line buffer get line offset end change rect rectangular selection since j edit 3 2pre1 very fast rect selection rect constructor rect rect constructor rect selection sel sel rect constructor rect start end start end rect constructor rect start line start end line end start line start line start start end line end line end end rect constructor rect j edit buffer buffer start line start column end line end column start line start line end line end line width 1 start offset buffer get offset virtual column start line start column width start offset 1 extra start virt start column width 0 start offset buffer get line end offset start line 1 start offset + buffer get line start offset start line end offset buffer get offset virtual column end line end column width end offset 1 extra end virt end column width 0 end offset buffer get line end offset end line 1 end offset + buffer get line start offset end line start start offset end end offset get start column get start column j edit buffer buffer virt col start buffer get virtual width start line start buffer get line start offset start line + extra start virt virt col end buffer get virtual width end line end buffer get line start offset end line + extra end virt math min virt col start virt col end get end column get end column j edit buffer buffer virt col start buffer get virtual width start line start buffer get line start offset start line + extra start virt virt col end buffer get virtual width end line end buffer get line start offset end line + extra end virt math max virt col start virt col end get start override get start j edit buffer buffer line get column on other line buffer line get start column buffer get end override get end j edit buffer buffer line get column on other line buffer line get end column buffer member extra start virt extra end virt get text override get text j edit buffer buffer builder buf start get start column buffer end get end column buffer i start line i end line i++ line start buffer get line start offset i line len buffer get line length i rect start buffer get offset virtual column i start rect start 1 rect start line len rect end buffer get offset virtual column i end rect end 1 rect end line len rect end rect start err i + + start + + end + + rect start + + rect end buf append buffer get text line start + rect start rect end rect start i end line buf append set text replace selection given text buffer buffer text text offset at end insert text override set text j edit buffer buffer text start column get start column buffer end column get end column buffer tab size buffer get tab size max width 0 total line 0 list contain list line list split text into line text last newline 0 current width start column i 0 i text length i++ ch text at i ch total lines++ line add text substring last newline i last newline i + 1 max width math max max width current width line add current width current width start column ch current width + tab size current width % tab size current width++ last newline text length total lines++ line add text substring last newline line add current width max width math max max width current width insert line into buffer end offset 0 total 1 last line math max start line + total line 1 end line i start line i last line i++ i buffer get line count buffer insert buffer get length line start buffer get line start offset i line len buffer get line length i rect start buffer get offset virtual column i start column total start whitespace rect start 1 start whitespace start column total 0 rect start line len start whitespace 0 rect end buffer get offset virtual column i end column rect end 1 rect end line len buffer remove rect start + line start rect end rect start start whitespace 0 buffer insert rect start + line start standard utility create white space start whitespace 0 end whitespace total line 0 rect end line len end whitespace 0 end whitespace max width start column index 2 i start line % total line str line get index buffer insert rect start + line start + start whitespace str rect end line len end whitespace 0 end whitespace max width line get index + 1 start whitespace + str length end whitespace 0 buffer insert rect start + line start + start whitespace standard utility create white space end whitespace 0 end offset rect start + line start + start whitespace + end whitespace move caret down line text || text length 0 end end offset content insert override content insert j edit buffer buffer start line start num line length end start end + length start line start line start + length num line 0 start line buffer get line offset start end line buffer get line offset end end virtual column buffer get virtual width end line end buffer get line start offset end line start start start virtual column buffer get virtual width start line start buffer get line start offset start line start + length start virtual column buffer get virtual width start line start buffer get line start offset start line total virtual width 1 end buffer get offset virtual column end line end virtual column + start virtual column start virtual column total virtual width end 1 end buffer get line start offset end line + end end buffer get line end offset end line 1 extra end virt total virtual width 0 end virtual column start start start + length num line 0 start line buffer get line offset start num line 0 end line buffer get line offset end end virtual column buffer get virtual width end line end buffer get line start offset end line start line end line extra end virt 0 extra end virt + end virtual column end virtual column start line start line extra start virt 0 extra start virt + end virtual column end virtual column content remove override content remove j edit buffer buffer start line start num line length end start + length change start start start end start start change start end start length change end start end end end start change end end end length change change num line 0 start line buffer get line offset start end line buffer get line offset end change member get column on other line get column on other line j edit buffer buffer line col value buffer get offset virtual column line col value 1 buffer get line end offset line 1 buffer get line start offset line + value 