hyp search request hyp search request run i o thread tab size 4 indent size 4 no tab collapse fold 1 1998 1999 2000 2001 2002 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s search importsimport tree textarea selection textarea j edit text area buffer g u i utility j edit view hyp search result window hyp search request 23224 2013 09 30 20 51 42 shlomy hyp search request task hyp search request constructor hyp search request view view search matcher matcher hyp search result result selection selection view view matcher matcher result result search search replace get search root search node mutable tree node hyp search operation node search matcher selection selection run override run set status j edit get property hypersearch status search set fileset search replace get search set fileset get view || length 0 thread utility run dispatch thread runnable run g u i utility view empty fileset result search root search node set maximum fileset get count view minimize synchronization stuff like we only show status message at most twice second initially zero so we alway show first message search caption j edit get property hypersearch result search search replace get search + selection buffer buffer view get buffer search selection buffer current 0 last status time 0 l result count 0 ask max result j edit get property hypersearch max warning result i 0 i length i++ thread current thread interrupt log log log m e s s g e search stop user action stop button ask result count max result max result 0 log log log d e b u g search progress + result count + occurrence found asking user stop ask ret g u i utility confirm view hypersearch too many result result count j option pane y e s n o o p t i o n j option pane q u e s t i o n m e s s g e ret j option pane y e s o p t i o n log log log m e s s g e search stop user action i current++ current time current time milli current time last status time 250 l set value current last status time current time result set search status search caption + buffer buffer j edit open temporary buffer wait buffer load buffer load task instance wait io task result count + hyp search buffer 0 buffer get length log log log m e s s g e result count + o u r e n e s e log log log e r r o r e thread utility run dispatch thread runnable run search replace handle view e thread utility run dispatch thread runnable run result search root search node select node member instance variable view view search matcher matcher hyp search result result mutable tree node root search node selection selection search mutable tree node select node search selection search selection buffer buffer set cancellable result count 0 buffer read lock selection s selection s selection rect j s get start line j s get end line j++ result count + hyp search buffer s get start buffer j s get end buffer j result count + hyp search buffer s get start s get end buffer read unlock set cancellable result count hyp search hyp search buffer buffer start end matcher boy moore search matcher set cancellable set cancellable hyp search node hyp search node hyp search node buffer get path mutable tree node buffer node mutable tree node hyp search node result count hyp search buffer start end buffer node hyp search node set count result count result count 0 root search node insert buffer node root search node get child count set cancellable result count hyp search hyp search buffer buffer start end mutable tree node buffer node matcher whole word buffer set mode no word sep buffer get property no word sep matcher set no word sep no word sep result count 0 j edit text area text area j edit get active view get text area caret line text area get buffer buffer ? text area get caret line 1 buffer read lock end line buffer get line end offset buffer get line offset end 1 end offset start hyp search result last result counter 0 counter++ start line buffer get line start offset buffer get line offset offset offset search matcher match match match matcher next match buffer get segment offset end offset start line end line counter 0 interrupt e thread current thread interrupt match line buffer get line offset offset + match start last result || last result line line last result hyp search result buffer line mutable tree node child mutable tree node last result last result line caret line select node child buffer node add child last result add occur offset + match start offset + match end offset + match end result count++ buffer read unlock result count 