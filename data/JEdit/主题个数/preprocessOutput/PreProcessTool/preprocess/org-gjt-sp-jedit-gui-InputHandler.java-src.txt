input handler manage key binding execute action tab size 4 indent size 4 no tab collapse fold 1 1999 2003 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s gui importsimport text j text component textarea j edit text area buffer j edit buffer input input handler generic g u i utility log standard utility event key event an input handler convert user s key stroke into concrete action also take care recording action repetition p provide all necessary support an input handler doesn t actually key binding logic up so input handler 24411 2016 06 19 11 02 53 kerik sf gui input handler input handler input handler edit action input handler constructor create input handler view view input handler view view view view handle key handle keystroke key stroke key stroke input could handle since j edit 4 2pre5 handle key key event translator key key stroke handle key key stroke process key event forward key event directly input handler slightly fast than using key listener because some overhead avoid since 4 3pre7 override process key event key event evt from global debug d u m p k e y e v e n t s log log log d e b u g key event + input handler evt + from + from log log log d e b u g view+ focus +view focus + view get text area ha focus from view v i e w evt preproces key event evt evt debug d u m p k e y e v e n t s log log log d e b u g key event after workaround + input handler evt + from + from component prefix focus owner view get prefix focus owner focus on text area evt get key event k e y t y p e d user press eg c+e n n search bar we want focus go back there after prefix prefix focus owner prefix focus owner showing prefix focus owner request focus focus on text area key event interceptor key event interceptor key type evt from view t i o n b r || prefix active || view get text area ha focus process key event key stroke handling evt from type global process key event sub focus on text area key event k e y p r e s s e d key event interceptor key event interceptor key press evt key event workaround bindable evt get key prefix focus owner prefix focus owner showing prefix focus owner request focus focus on text area view set prefix focus owner process key event key stroke handling evt from press global process key event sub focus on text area key event k e y r e l e s e d key event interceptor key event interceptor key release evt preproces key event key event preproces key event key event evt view close component focus owner view get focus owner focus owner j component j component comp j component focus owner input map map comp get input map action map am comp get action map map am comp enable key stroke key stroke key stroke get key stroke event evt binding map get key stroke binding am get binding focus owner j text component fix bug where key event j text component inside view are also handle input handler evt get key event k e y p r e s s e d evt get key key event v k e n t e r key event v k t b key event v k b k s p e key event v k s p e evt consume debug d u m p k e y e v e n t s log log log d e b u g key event preprocess + input handler evt key event workaround process key event evt process key event sub process key event sub focus on text area we might be close result above view close weird hack we t want c+e insert search bar search bar ha focus prefix active component focus owner view get focus owner focus owner j text component view set prefix focus owner focus owner view get text area request focus focus on text area view get text area request focus view set prefix focus owner view set prefix focus owner get repeat count number time next action repeat get repeat count repeat count set repeat count set number time next action repeat repeat count repeat count set repeat count repeat count old repeat count repeat count repeat count repeat count old repeat count repeat count view get status set message get last action last execute action since j edit 2 5pre5 edit action get last action last action read next specify bean shell replacing next input character msg prompt display status bar since j edit 3 2pre2 read next msg view get status set message msg read next action specify action repeating recording necessary action action since j edit 4 2pre1 override action action action j edit get action action action specify action repeating recording necessary action action override action edit action action j edit buffer buffer view get buffer buffer inside compound edit buffer end compound edit remember last execute action action no remember last history model get model action add item action get name last action action last action count++ last action action last action count 1 remember old value action change them repeat count repeat count execute action action no repeat || repeat count 1 action view stop people dumb stuff like c+ e n t e r 100 c+n repeat count r e p e t o u n t t h r e s h o l d label action get label label label action get name label generic g u i utility prettify menu label label pp label repeat count g u i utility confirm view large repeat count pp j option pane w r n i n g m e s s g e j option pane y e s n o o p t i o n j option pane y e s o p t i o n repeat count 1 view get status set message buffer begin compound edit i 0 i repeat count i++ action view buffer end compound edit macro recorder recorder view get recorder recorder action no record recorder record repeat count action get repeat wa originally clear otherwise might be set action etc repeat count 1 first all action set read next clear repeat read next repeat count 1 view get status set message last action last action last action u i get look feel provide feedback action last action instance variable view view user input user input ch last action count 0 j edit text area text area view get text area buffer buffer view get buffer buffer inside compound edit buffer begin compound edit repeat count 1 text area user input ch stop people dumb stuff like c+ e n t e r 100 c+n repeat count r e p e t o u n t t h r e s h o l d pp value ch repeat count g u i utility confirm view large repeat count user input pp j option pane w r n i n g m e s s g e j option pane y e s n o o p t i o n j option pane y e s o p t i o n repeat count 1 view get status set message j edit buffer buffer view get buffer repeat count 1 buffer begin compound edit i 0 i repeat count i++ text area user input ch repeat count 1 buffer end compound edit macro recorder recorder view get recorder recorder recorder record input repeat count ch text area overwrite enable repeat count 1 read next read next ch j edit buffer buffer view get buffer buffer inside compound edit buffer end compound edit str standard utility escape value ch might bit slow occur lot index index read next index 1 read next read next substring 0 index + \ + str + \ + read next substring index + 8 macro recorder recorder view get recorder recorder recorder record get repeat count read next view get status set message get repeat count 1 buffer begin compound edit bean shell eval view bean shell get name space i 1 i + get repeat count + i++ + read next + buffer end compound edit bean shell eval view bean shell get name space read next read next 