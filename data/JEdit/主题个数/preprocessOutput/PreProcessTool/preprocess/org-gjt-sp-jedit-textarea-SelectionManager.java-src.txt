selection tab size 4 indent size 4 no tab collapse fold 1 2004 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s textarea importsimport list iterator list set tree set annotation nonnull buffer selection so painter use have call get selection which involve an list selection selection selection constructor selection text area text area text area text area selection list selection get selection count number selection use test existence selection get selection count selection size get selection current selection since j edit 3 2pre1 nonnull selection get selection selection selection selection size set selection set selection nest overlapping selection are merge where possible set selection selection selection selection clear add selection selection add selection add selection nest overlapping selection are merge where possible element are ignore selection selection since j edit 3 2pre1 add selection selection selection selection selection s selection s add selection s add selection add selection selection add me add me start add me end illegal argument add me start + + add me end add me start add me end add me selection range add me selection rect selection rect add me extra end virt 0 iterator selection it selection iterator it ha next merge selection one one selection selection s it next s overlap add me add me start math min s start add me start add me end math max s end add me end it remove add me start line text area get line offset add me start add me end line text area get line offset add me end add i 0 i selection size i++ selection s selection get i add me start s start selection add i add me add add selection add add me text area invalidate line range add me start line add me end line set selection set selection nest overlapping selection are merge where possible set selection selection selection selection clear selection add selection selection get selection at offset selection contain specific offset there no selection at offset offset offset since j edit 3 2pre1 selection get selection at offset offset selection selection s selection offset s start offset s end s remove from selection deactivate specify selection sel selection remove from selection selection sel selection remove sel resize selection resiz selection at specify offset create one there no selection at specify offset utility mainly mouse event handler because handle end being before offset gracefully unlike rest selection p i offset offset end selection end extra end virt only rectangular selection specifie how far into virtual space rect make selection rectangular? resize selection offset end extra end virt rect reverse end offset tmp offset offset end end tmp reverse selection sel rect selection rect rect sel selection rect offset end reverse rect sel extra start virt extra end virt rect sel extra end virt extra end virt sel rect sel sel selection range offset end add selection sel get select line sort line number on which selection selection are present p most convenient way iterate through select line buffer line number pass parameter such link buffer get line text get select line set set tree set selection s selection end line s end text area get line start offset s end line ? s end line 1 s end line j s start line j end line j++ set add j value set size i 0 line set value i++ line value invert selection invert selection selection selection selection selection size + 1 last offset 0 i 0 i selection size i++ selection s selection get i selection i selection range last offset s get start last offset s get end selection selection size selection range last offset text area get buffer length set selection selection get selection start end on line x co ordinate selection start end on given line may get selection start end screen line physical line selection s start text area get screen line start offset screen line end text area get screen line end offset screen line end s start || start s end sel start screen line text area display line visible s start line sel start screen line text area get screen line offset s start sel start screen line 1 sel end screen line text area display line visible s end line sel end screen line text area get screen line offset s end sel end screen line 1 j edit buffer buffer text area get buffer line start buffer get line start offset physical line x1 x2 s selection rect start line start end line start selection rect rect selection rect s start rect get start column buffer end rect get end column buffer line len buffer get line length physical line total 1 rect start buffer get offset virtual column physical line start total rect start 1 x1 start total 0 text area width rect start line len x1 0 rect end buffer get offset virtual column physical line end total rect end 1 x2 end total 0 text area width rect end line len x2 0 end rect start || start rect end x1 rect start start ? 0 x1 + text area offset x y physical line rect start x x2 rect end end ? text area get width x2 + text area offset x y physical line rect end x sel start screen line sel end screen line sel start screen line 1 x1 text area offset x y physical line s start line start x x2 text area offset x y physical line s end line start x screen line sel start screen line x1 text area offset x y physical line s start line start x x2 text area get width screen line sel end screen line x1 0 x2 text area offset x y physical line s end line start x x1 0 x2 text area get width x1 0 x1 0 x2 0 x2 0 x1 x2 x2++ x1 x2 inside selection given point inside selection use drag drop mouse handler below inside selection x y offset text area xy offset x y selection s text area get selection at offset offset s screen line text area get screen line offset offset screen line 1 selection start end get selection start end screen line text area get line offset offset s selection start end x selection start end 0 x selection start end 1 text area text area 