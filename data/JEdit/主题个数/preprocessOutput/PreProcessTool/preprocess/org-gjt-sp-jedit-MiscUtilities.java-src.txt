misc utility variou miscellaneou utility function tab size 4 indent size 4 no tab collapse fold 1 ?? 1999 2013 richard s hall dirk moebiu jgellene ezust vanza kpou vampire0 jarekczek k satoda voituk thomas mey martin raspe possibly other member all volunteer developer team tm g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s importsimport io net malform u r l net u r i net u r i syntax net u r l charset malform input regex matcher regex pattern io log i o utility buffer j edit buffer list path u r l name manipulation manipulation p most frequently use member are p b some path name b p link get name link get parent path link construct path misc utility 24464 2016 07 19 14 47 33 ezust misc utility path name canon path canonical form specify path name currently only expand leading b local path name only b path path name since j edit 4 0pre2 canon path path path length 0 path path start path path substring length path start path path substring length u r l path path separator \\ get rid mix path on window path path replace \\ also get rid trailing space on window trim path length path at trim 1 trim path at trim 1 \\ trim 1 path at trim 2 \\ trim path path substring 0 trim path start + separator path path substring 2 home get property user home home end separator home + path home + separator + path equal path get property user home equal path get parent path j edit get active view get buffer get path path expand variable var pattern \\$ z0 9 + var pattern string2 \\$\\ ^ + \\ win pattern % ^% + % pattern var pattern pattern compile var pattern pattern var pattern2 pattern compile var pattern string2 pattern win pattern pattern compile win pattern helper function expand variable when handling window path on non window win2unix win path unix path win path replace \\ matcher m win pattern matcher unix path m find var name m group 2 expansion getenv var name expansion m replace first expansion unix path accept from user setting which may contain variable prefix path variou syntax perform reverse abbreviate from platform function support following prefix syntax \ expand user home $varname all platform %varname% all platform varname non window platform expand each these looking at environment variable possible expansion which unchang input one expand variable since j edit 4 3 abbreviate ezust expand variable start || start \\ get property user home + substring 1 matcher m win pattern matcher operate window m find win2unix pattern p var pattern m p matcher m find operate window p win pattern p var pattern2 m p matcher m find no variable substitute var name m group 2 expansion getenv var name expansion everyth uppercase? var name var name upper uparg upper m p matcher uparg expansion getenv var name expansion expansion expansion replace \\ \\\\ m replace first expansion abbreviate reverse expand variable shorten path possible us platform convention %varname% on window $varname on other platform an abbreviate path replacing value variable prefix expand variable since j edit 4 3 abbreviate path svc svc var compressor svc compress path same abbreviate check view option which disable feature j edit u i component since j edit 5 1 abbreviate view path j edit get property view abbreviate path path abbreviate path resolve symlink resolve symbolic link path name specify using get canonical path b local path name only b since j edit 4 2pre1 resolve symlink path u r l path path 2 aug 2003 o s 2 ha get canonical path operate o s2 path 18 nov 2003 calling on drive letter on window cause drive access operate window path length 2 || path length 3 path at 1 path path get canonical path i o io path absolute path specify path name an absolute path u r l since j edit 4 1pre11 absolute path path u r l path path start || path start + separator || equal path equal path operate window path length 2 path at 1 path length 2 path at 1 path at 2 \\ || path at 2 path start \\\\ || path start sure correct open v m s operate unix || operate v m s nice simple path length 0 path at 0 construct path construct an absolute path name from directory another path name v f s aware parent directory path path name construct path parent path absolute path path canon path path parent parent get property user dir path || path length 0 parent handle specially on window insert \ between eg myfile txt operate window path length 2 path at 1 path path length 2 path at 1 path at 2 \\ path path substring 0 2 + \\ + path substring 2 canon path path + separator d + separator equal path parent equal path get parent path parent path start || path start parent get parent path parent path path substring 3 path start d || path start path path substring 2 path length 0 parent operate window u r l parent path at 0 \\ parent parent substring 0 2 v f s vf v f s get v f s path parent canon path vf construct path parent path construct an absolute path name from three path component v f s aware parent parent directory path1 first path path2 second path construct path parent path1 path2 construct path construct path parent path1 path2 concat path like link construct path except path append parent absolute b local path name only b parent parent path path path append parent concat path parent path parent canon path parent path canon path path make all child path relative path start separator path path substring 1 path length 3 path at 1 path path replace separator parent parent get property user dir parent end separator parent + path parent + separator + path get first separator index first index o s specific separator path path since j edit 4 3pre3 get first separator index path start get path start path index path index start index 1 index path index separator start index get last separator index last index o s specific separator path path since j edit 4 3pre3 get last separator index path start get path start path start 0 path path substring start index math max path last index path last index separator index 1 index index + start get extension extension specify filename starting last dot path path last dot text follow an empty no dot are found i e your filename i p 192 168 1 1 data tar gz gz get complete base name get extension path f index get last separator index path index path last index there could dot path no extension index 1 || index f index path substring index get name last component specify path v f s aware path path name get name path v f s get v f s path path get name path get complete base name complete basename name before last period i e your filename net log i p 192 168 1 1 data tar gz i p 192 168 1 1 data tar path path name get base name get base name get extension get extension since j edit 5 0 get complete base name path name get name path index name last index index 1 name name substring 0 index get base name base name name before first period i e your filename net log i p 192 168 1 1 data tar gz i p 192 path path name since j edit 5 0 get complete base name get base name path name get name path index name index index 1 name name substring 0 index same thing get base name deprecate use get base name instead since j edit 4 0 deprecate get name no extension path get base name path get parent path parent specify path v f s aware path path name since j edit 2 6pre5 get parent path path v f s get v f s path path get parent path path get protocol u r l protocol specify u r l url u r l since j edit 2 6pre5 get protocol u r l url url substring 0 url index u r l check specify u r l str check u r l otherwise u r l str f index get last separator index str f index 0 etc passwd f index 2 \ u t o e x e b t index str index index 1 d \ w i n d o w s doesn t contain at all protocol str substring 0 index v f s vf v f s get v f s protocol protocol vf vf url v f s u r l str malform u r l mf get nth backup get store nth backup given name last part filename being back up backup number current backup backup total number backup copy since 5 0pre1 get nth backup name backup backup backup prefix backup suffix backup directory backup backup prefix backup prefix backup suffix backup suffix backup 1 backup backup directory backup prefix + name + backup suffix backup backup directory backup prefix + name + backup suffix + backup + backup suffix backup open desktop open u r i using desktop association p us desktop command each platform which ask user choose an association already one using desktop s dialog contrast desktop open which just an i o unknown type u r i supply use desktop browser path u r i thing open browse alan ezust since j edit 5 0 open desktop path list sl list operate window misc utility u r l path u r i uri u r i path desktop get desktop browse uri i o ioe log log log e r r o r path t open u r i ioe u r i syntax use log log log e r r o r path bad u r i syntax use sl add rundll32 sl add s h e l l32 d l l shell exec run d l l operate mac o s sl add open operate x11 gnome use gnome open need way testing gnome actually running though otherwise correct use f usr bin gnome open f sl add gnome open sl add xdg open sl empty i t know what platform desktop get desktop open path sl add path log log log d e b u g misc utility open desktop + sl join runtime get runtime exec sl i o ioe log log log e r r o r misc utility open desktop fail + path ioe prepare backup directory prepare directory backup specify property use determine directory there no dedicate backup directory specify prop then current directory use only local directory create backup directory non local no backup directory specify property since 5 0pre1 prepare backup directory path backup directory j edit get property backup directory dir local v f s get v f s path path v f s local path replace non path path check backup directory create directory doesn t backup directory || backup directory length 0 local backup directory get parent dir backup directory backup directory misc utility construct path get property user home backup directory perhap here we would want guard property parallel backup backup directory misc utility concat path backup directory get parent dir backup directory dir dir mkdir dir prepare backup prepare filename performing backup given multiple backup doe necessary backup renumber check wheth last backup wa earlier than backup min time property m ago us property determine backup like prefix suffix path back up backup dir directory usually obtain from prepare backup directory suitable backup last backup wa les than backup min time m ago since 5 0pre1 prepare backup path backup dir read property backup j edit get property backup 1 backup prefix j edit get property backup prefix backup suffix j edit get property backup suffix backup time distance j edit get property backup min time 0 prepare backup path backup backup prefix backup suffix backup dir get path backup time distance prepare filename performing backup given multiple backup doe necessary backup renumber check wheth last backup wa earlier than backup time distance m ago path back up backup number backup must 1 1 backup number backup directory directory determine externally obtain from prepare backup directory suitable backup last backup wa les than backup time distance m ago since 5 0pre1 prepare backup path backup backup prefix backup suffix backup directory backup time distance local v f s get v f s path path v f s local path replace non path path name get name backup get nth backup name 1 backup backup prefix backup suffix backup directory backup equal log log log w r n i n g misc utility j edit get property ioerror backup same name + + j edit get property ioerror backup fail mod time backup last modify backup wa create les than backup time distance ago we create backup current time milli mod time backup time distance log log log d e b u g misc utility backup because backup min time last backup get nth backup name backup backup backup prefix backup suffix backup directory unfortunate circumstance calculate backup name may equal source name careful delete original last backup equal last backup delete backup 1 i backup 1 i 0 i backup1 get nth backup name i backup backup prefix backup suffix backup directory backup2 get nth backup name i+1 backup backup prefix backup suffix backup directory backup1 rename backup2 backup save backup save backup optionally number read property determine backup like prefix suffix directory p call prepare backup directory local since j edit 5 0pre1 save backup backup dir prepare backup directory backup prepare backup backup dir backup save backup backup save backup optionally number local backup number backup must 1 1 backup number backup prefix backup name prefix backup suffix backup name suffix backup directory directory where save backup they save same directory itself since j edit 4 0pre1 save backup backup backup prefix backup suffix backup directory save backup backup backup prefix backup suffix backup directory 0 save backup optionally number require specify backup directory generate backup filename local backup number backup must 1 1 backup number backup prefix backup name prefix backup suffix backup name suffix backup directory directory where save backup they save same directory itself backup time distance minimum time minute when backup 1 shall move into 2 0 backup are alway move since j edit 4 2pre5 save backup backup backup prefix backup suffix backup directory backup time distance backup prepare backup backup backup prefix backup suffix backup directory backup time distance backup save backup backup save backup local require specify source destination local backup local backup since j edit 5 0pre1 save backup backup log log log d e b u g misc utility saving backup \ + get absolute path + \ \ + backup get absolute path + rename backup i o utility move backup binary check an input stream binary first encoding auto detection an encoding detect stream text stream otherwise check first character 100 j edit property vf binary check length encoding than 1 j edit property vf binary check count n u l \u0000 wa found stream declare binary 100% because sometime autodetection could fail close stream yourself stream stream wa detect binary i o i o an i o occur since j edit 4 3pre10 binary input stream i o auto detection result detection auto detection result an encoding detect text stream detection get detect encoding read stream encoding encoding might wrong enough binary detection contain character input stream reader detection get rewind stream malform input mie probably mean input binary backup check filename backup filename filename check backup since j edit 4 3pre5 backup filename filename start filename end filename end bak autodetect detect stream gzipp ha an encoding specify an xml p i input stream reader must autodetect buffer buffer only want autodetect encoding reader using detect encoding i o io dur read since j edit 4 3pre5 reader autodetect input stream buffer buffer i o encoding buffer encoding get property encoding encoding buffer get property j edit buffer e n o d i n g gzipp buffer || buffer get property buffer e n o d i n g u t o d e t e t auto detection result detection auto detection result gzipp detection stream gzipp gzipp log log log d e b u g misc utility stream gzipp detect detection get detect encoding detect encoding detect log log log d e b u g misc utility stream encoding detect + detect detection get rewind stream make stream buffer same way auto detection get mark stream reader result encoding server get text reader encoding buffer store succesful property gzipp buffer set property buffer g i p p e d buffer set property j edit buffer e n o d i n g encoding result convert name name all slash character are replace period trailing remove name name name cl name name i cl name length 6 i 0 i cl name i cl name i cl name 0 cl name length 6 convert name name all period are replace slash extension add name name name name replace concat path equal p1 path name p2 path name both path are equal ignore trailing slash well insensitivity on window since j edit 4 3pre2 path equal p1 p2 v f s v1 v f s get v f s path p1 v f s v2 v f s get v f s path p2 v1 v2 p1 end || p1 end separator p1 p1 substring 0 p1 length 1 p2 end || p2 end separator p2 p2 substring 0 p2 length 1 v1 get capability v f s s e i n s e n s i t i v e p 0 p1 equal ignore p2 p1 equal p2 text escape convert escape specify newline tab str since j edit 2 3pre1 escape str builder buf builder i 0 i str length i++ str at i \\ i str length 1 buf append \\ str at ++i n buf append t buf append buf append buf append buf get prefix common prefix given set str ignore insensitive since j edit 4 2pre2 get prefix list str ignore str empty prefix length 0 loop s str get 0 prefix length s length loop ch s at prefix length i 1 i str size i++ s str get i prefix length s length loop compare s at prefix length ch ignore loop prefix length++ str get 0 substring 0 prefix length common prefix given set str ignore insensitive since j edit 4 2pre2 get prefix str ignore get prefix str ignore common prefix given set str call on each ignore insensitive since j edit 4 2pre6 get prefix str ignore str length 0 prefix length 0 first str 0 loop prefix length first length loop ch first at prefix length i 1 i str length i++ s str i prefix length s length loop compare s at prefix length ch ignore loop prefix length++ first substring 0 prefix length build convert an internal number build into `human readable form build build build build build length 11 unknown + build + first 2 are major number major parse build substring 0 2 second 2 are minor number minor parse build substring 3 5 then pre release status beta parse build substring 6 8 micro number micro parse build substring 9 11 major + + minor + beta 99 ? pre + beta + micro tool jar available on j d k 1 2 high make sure tool jar available call plugin require library p tool jar search following place ol classpath wa use when j edit wa start j edit s jar folder user s home j edit s jar folder i home i lib tool jar add j edit s list know jar using j edit add plugin j r so get load through j r loader ol p on old j d k s doe perform check though there no tool jar only on j d k 1 2 tool jar could found print some warning on log too about place where wa search since j edit 3 2 2 tool jar available log log log d e b u g misc utility search tool jar collection path link list 1 check wheth tool jar classpath path add classpath + get property path sun tool javac com sun tool javac must there name sun tool javac found e1 name com sun tool javac log log log d e b u g misc utility classpath fine found e log log log d e b u g misc utility classpath 2 check wheth j edit user setting jar folder setting dir j edit get setting directory setting dir tool path construct path setting dir jar tool jar path add tool path tool path log log log d e b u g misc utility user s jar folder fine j edit load automatically 3 check wheth j edit s jar folder j edit dir j edit get j edit home j edit dir tool path construct path j edit dir jar tool jar path add tool path tool path log log log d e b u g misc utility j edit s jar folder fine j edit load automatically 4 check wheth home lib tool path get property home tool path lower end separator + jre tool path tool path substring 0 tool path length 4 tool path construct path tool path lib tool jar path add tool path tool path log log log w r n i n g misc utility could find tool jar + i check following location + path load yet plugin j r jar j edit get plugin j r tool path jar log log log d e b u g misc utility add + tool path + j edit plugin j edit add plugin j r tool path log log log d e b u g misc utility ha be load before parse permission parse unix style permission rwxrwxrwx s must 9 character since j edit 4 1pre8 parse permission s permission 0 s length 9 s at 0 r permission + 0400 s at 1 w permission + 0200 s at 2 x permission + 0100 s at 2 s permission + 04100 s at 2 s permission + 04000 s at 3 r permission + 040 s at 4 w permission + 020 s at 5 x permission + 010 s at 5 s permission + 02010 s at 5 s permission + 02000 s at 6 r permission + 04 s at 7 w permission + 02 s at 8 x permission + 01 s at 8 t permission + 01001 s at 8 t permission + 01000 permission get encoding list support character encoding since j edit 4 3 get select wheth just select encoding all get encoding get select set set get select set encoding server get select name set encoding server get available name set set size throwable contain stack trace given throwable since j edit 4 2pre6 throwable throwable t writer s writer t print stack trace print writer s s member misc utility compare compare two public? ch1 first ch2 second ignore want ignore compare ch1 ch2 ignore ignore character upper ch1 character upper ch2 ch1 ch2 get path start get path start path path start 0 operate window path length 3 path at 1 path at 2 || path at 2 \\ 3 0 contain character contain character reader reader i o nb j edit get property vf binary check length 100 authorize j edit get property vf binary check count 1 i 0 l i nb i++ reader read 1 0 authorize authorize 0 replace non path replace character which are usually invalid part pathname use backup routine convert remote filename local path replace replace illegal example replace non path path replace path s foreign ?\ | construct regex from s foreign builder sb foreign esc builder 20 i 0 i s foreign length i++ sb foreign esc append \\ sb foreign esc append s foreign at i path replace all + sb foreign esc + replace store property store property sort key prop given property out output stream comment description property list since j edit 5 3 store property property prop output stream out comment i o property sort property override enumeration key collection enumeration tree set key set sort put all prop sort store out comment var compressor svc var compressor singleton quickly compressing path into variable prefix value alan ezust var compressor reverse mapping value environment variable name map prefix map hash map previously compress save quick access map previou hash map var compressor constructor var compressor process builder pb process builder map env pb environment operate unix prefix map put get property user home map entry entry env entry set k entry get key k equal ignore pwd || k equal ignore oldpwd character letter k at 0 v entry get value only add possible candidate prefix map path prefix v no need trailing separator v end separator v v substring 0 v length 1 check actually operate window k length +2 v length get replace % f o o% k length +1 v length get replace f o o operate window no sensitivity might well convert lower v v lower k k lower prefix map contain key v other key prefix map get v other key length k length prefix map put v k compress compress path original path previou contain key path previou get path best prefix verify prefix best prefix prefix prefix map key set prefix length best prefix length operate window path lower start prefix best prefix prefix path start prefix best prefix prefix only use prefix directory prefix path best prefix equal verify prefix remainder original substring best prefix length remainder length 1 || remainder start separator verify prefix best prefix best prefix verify prefix best prefix length 1 remainder original substring best prefix length envvar prefix map get best prefix envvar equal path envvar + remainder operate window path % + envvar upper + % + remainder path + envvar + remainder previou put original path path path prefix argument may absolutely point directory speed no access network happen path prefix s use directory since cause access network check directory actually s contain path separator s absolute 