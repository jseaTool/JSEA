first line tab size 4 indent size 4 no tab collapse fold 1 2005 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s textarea debug log anchor first visible line textarea first line 23224 2013 09 30 20 51 42 shlomy first line anchor scroll line + skew vertical scroll bar position skew scroll count from beginning line use soft wrap skew pre content remove num line first line constructor first line display display text area text area display text area override pre content insert start line num line scroll line 0 physical line start line current physical line get physical line num line visible 0 i 0 physical line current physical line i++ physical line++ get display line visible physical line scroll line + get display get screen line count physical line i num line num line visible++ pre content insert scroll line scroll line content insert some content insert start line start insert num line number insert line content insert start line num line debug s r o l l d e b u g log log log d e b u g content insert before + current physical line get physical line anchor change only content wa insert before start line current physical line set call change start line current physical line scroll line 0 physical line start line end line current physical line + num line num line visible 0 i 0 physical line end line physical line++ i++ get display line visible physical line scroll line + get display get screen line count physical line i num line num line visible++ move physical line num line visible move scroll line scroll line pre content insert scroll line debug s r o l l d e b u g log log log d e b u g content insert after + debug s r o l l v e r i f y scroll verify override pre content remove start line offset num line scroll line 0 physical line start line current physical line get physical line num line visible 0 i 0 physical line current physical line i++ physical line++ get display line visible physical line scroll line + get display get screen line count physical line i num line num line visible++ pre content remove scroll line scroll line pre content remove num line num line visible content remove call before content remove from buffer start line first line remove content start offset offset start line num line number remove line content remove start line start offset num line debug s r o l l d e b u g log log log d e b u g content remove before + remove content start before anchor we need pull anchor up current physical line get physical line start line current physical line set call change start line current physical line scroll line 0 physical line start line end line current physical line num line physical line end line physical line++ get display line visible physical line scroll line + get display get screen line count physical line move physical line pre content remove num line move scroll line scroll line pre content remove scroll line debug s r o l l d e b u g log log log d e b u g content remove after + debug s r o l l v e r i f y scroll verify change override change debug debug s r o l l d e b u g log log log d e b u g change before + get physical line + + get scroll line + + get skew debug s r o l l v e r i f y scroll verify ensure physical line visible current physical line get physical line screen line get display get screen line count current physical line get skew screen line set skew screen line 1 debug debug s r o l l v e r i f y scroll verify debug s r o l l d e b u g log log log d e b u g change after + get physical line + + get scroll line + + get skew scroll verify err s r o l l v e r i f y verify scroll line 0 current physical line get physical line i 0 n get display get buffer get line count i n i current physical line i++ get display line visible i verify scroll line + get display get screen line count i scroll line get scroll line verify scroll line scroll line runtime ex runtime scroll line + scroll line + + verify scroll line + diff + verify scroll line scroll line log log log e r r o r ex reset override reset debug s r o l l d e b u g log log log d e b u g reset current physical line get physical line physical line get display get first visible line scroll line 0 physical line 1 physical line current physical line scroll line + get display get screen line count physical line next line get display get next visible line physical line next line 1 physical line next line set physical line physical line set scroll line scroll line screen line get display get screen line count physical line get skew screen line set skew screen line 1 get text area update scroll bar phy down scroll down physical line amount phy down amount screen amount current physical line get physical line current scroll line get scroll line debug s r o l l d e b u g log log log d e b u g phy down start + current physical line + + current scroll line set skew 0 get display line visible current physical line last visible line get display get last visible line current physical line last visible line set physical line last visible line next physical line get display get next visible line current physical line next physical line 0 amount next physical line current physical line move scroll line get display get screen line count current physical line set physical line next physical line current physical line get physical line scroll line 0 next physical line get display get next visible line current physical line next physical line 1 next physical line current physical line + amount scroll line + get display get screen line count current physical line amount next physical line current physical line current physical line next physical line set physical line current physical line move scroll line scroll line debug s r o l l d e b u g log log log d e b u g phy down end + get physical line + + get scroll line j edit text area scroll need simplify it screen amount 0 scroll up screen amount screen amount 0 scroll down screen amount phy up scroll up physical line amount phy up amount screen amount debug s r o l l d e b u g log log log d e b u g phy up start +get physical line + + get scroll line set skew 0 current physical line get physical line get display line visible current physical line first visible line get display get first visible line current physical line first visible line set physical line first visible line prev physical line get display get prev visible line current physical line amount current physical line prev physical line current physical line get physical line scroll line 0 prev physical line get display get prev visible line current physical line prev physical line 1 prev physical line current physical line amount scroll line get display get screen line count prev physical line amount current physical line prev physical line current physical line prev physical line set physical line current physical line move scroll line scroll line debug s r o l l d e b u g log log log d e b u g phy up end +get physical line + + get scroll line j edit text area scroll need simplify it screen amount 0 scroll up screen amount screen amount 0 scroll down screen amount scroll down scroll down screen line amount scroll down amount debug s r o l l d e b u g log log log d e b u g scroll down ensure physical line visible amount + get skew set skew 0 physical line get physical line screen line sum 0 amount 0 screen line get display get screen line count physical line amount screen line set skew amount next line get display get next visible line physical line next line 1 visible get display line visible physical line physical line next line visible amount screen line screen line sum + screen line set physical line physical line move scroll line screen line sum scroll up scroll up screen line amount scroll up amount debug s r o l l d e b u g log log log d e b u g scroll up before + ensure physical line visible amount get skew amount les than skew so we stay same like just going upper set skew get skew amount move first screen line current physical line amount get skew set skew 0 physical line get physical line screen line sum 0 amount 0 prev line get display get prev visible line physical line prev line 1 move previou visible physical line physical line prev line screen line get display get screen line count physical line screen line sum screen line amount screen line set skew screen line amount amount screen line set physical line physical line move scroll line screen line sum debug s r o l l d e b u g log log log d e b u g scroll up after + ensure physical line visible ensure physical line visible physical line get physical line get display line visible physical line physical line get display get last visible line set physical line get display get last visible line set scroll line get display get scroll line count 1 physical line get display get first visible line set physical line get display get first visible line set scroll line 0 next line get display get next visible line physical line next line 0 screen line count 0 screen line count get display get screen line count next line set physical line next line move scroll line screen line count override first line + get physical line + + get scroll line + + get skew + get skew skew set skew skew skew skew skew skew set call change 