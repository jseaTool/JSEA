buffer j edit buffer tab size 4 indent size 4 no tab collapse fold 1 1998 2005 1999 2000 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s importsimport component io io i o net socket list map vector worker state value text segment browser v f s browser buffer buffer undo listener buffer fold handler buffer j edit buffer bufferio buffer autosave request bufferio buffer i o request bufferio io task bufferio marker save request bufferset buffer set gui dockable window io v f s io v f s io v f s io v f s msg buffer update syntax mode provider syntax parser rule set syntax token handler syntax token marker visitor j edit visitor adapter visitor save caret info visitor runnable queue log standard utility thread utility buffer represent content an open text maintain computer s memory oppose how may store on disk p bean shell script obtain current buffer instance from buffer variable p doe constructor buffer open close using j edit p partially thread safe howev must pay attention two very important guideline operation such insert remove undo change buffer data lock must call from w t thread when access buffer from another thread must call read lock before read un lock after plan on performing than one read ensure buffer content are change w t thread duration lock only whose description specify thread safety from other thread buffer 24087 2015 09 19 20 56 09 buffer j edit buffer some constant back up property since j edit 3 2pre2 b k e d u p buffer back up caret info property since j edit 3 2pre1 r e t buffer caret r e t p o s i t i o n e d buffer caret position store list link textarea selection instance s e l e t i o n buffer selection physical line number so scroll position preserve correctly acros reload which affect virtual line number due fold being reset s r o l l v e r t buffer scroll vert s r o l l h o r i buffer scroll horiz j edit set encoding base on u t f8 u t f16 xml signature at beginning file? e n o d i n g u t o d e t e t encoding autodetect property set ha trailing newline since j edit 4 0pre1 t r i l i n g e o l trailing e o l property set g zip since j edit 4 0pre4 g i p p e d gzipp input output reload reload buffer from disk asking confirmation buffer ha unsav change view view since j edit 2 7pre2 reload view view get flag u n t i t l e d dirty path result g u i utility confirm view changedreload j option pane y e s n o o p t i o n j option pane w r n i n g m e s s g e result j option pane y e s o p t i o n view visit save caret info visitor load view load load buffer from disk view view reload user ask recover autosave load since 2 5pre1 load view view reload performing i o g u i utility view buffer multiple io set property buffer i o request e r r o r o u r r e d set loading view text area temporarily blank out buffer being load indicate user there no data available yet get flag t e m p o r r y edit bus send buffer update view buffer update l o d s t r t e d load autosave reload || get flag n e w f i l e mod time last modify only on initial load reload autosave autosave load autosave recover autosave view autosave autosave delete load autosave load autosave v f s vf v f s get v f s path path check load view vf path set loading check again since above might set n e w f i l e flag reload || get flag n e w f i l e vf load view path set loading load autosave some stuff once loading finish runnable runnable runnable run path get property buffer i o request n e w p t h segment seg segment get property buffer i o request l o d d t end offset get property buffer i o request e n d o f f s e t s load text seg end offset unset property buffer i o request l o d d t unset property buffer i o request e n d o f f s e t s unset property buffer i o request n e w p t h undo mgr clear undo mgr set limit j edit get property buffer undo count 100 buffer temporary we t need call finish loading because set fold handler reload marker get flag t e m p o r r y finish loading set loading reload clear dirty flag reload set dirty load autosave path set path path load autosave we load an autosave so we set dirty note we t use set dirty because would send an unnecessary message b would also set u t o s v e d i r t y flag which make autosave thread out redundant autosave load autosave buffer set dirty send some edit bus message get flag t e m p o r r y fire buffer load edit bus send buffer update buffer view buffer update l o d e d edit bus send buffer update buffer view buffer update m r k e r s h n g e d get flag t e m p o r r y runnable run runnable queue i n s t n e run after io task runnable insert load from disk insert into buffer view view path path insert wa insert since 4 0pre1 insert view view path performing i o g u i utility view buffer multiple io set property buffer i o request e r r o r o u r r e d path misc utility construct path path path buffer buffer j edit get buffer path buffer view get text area set select text buffer get text 0 buffer get length v f s vf v f s get v f s path path initial sanity check directory etc fail vf insert view path autosave autosave buffer autosave autosave || get flag u t o s v e d i r t y || dirty || performing i o || autosave get parent set flag u t o s v e d i r t y thread utility run background buffer autosave request v f s get v f s autosave get path save prompt user save buffer view view rename buffer s path change only save specify filename buffer wa successfully save since j edit 2 6pre5 save view view rename save path path j edit get property save us f s b dockable window dwm view get dockable window component comp dwm get dockable vf browser v f s browser browser v f s browser comp browser save path browser get directory + g u i utility show v f s dialog view save path v f s browser s v e d i l o g length 1 since dialog type s v e d i l o g save save view 0 rename save set read only save save save buffer specify path name current path name s view view path path name save buffer use buffer wa successfully save path save view view path save view path save save buffer specify path name current path name s view view path path name save buffer use path rename buffer s path change only save specify filename buffer wa successfully save since j edit 2 6pre5 save view view path rename save view path rename save save buffer specify path name current path name s view view path path name save buffer use path rename buffer s path change only save specify filename disable status check disable status check regardles state check status property buffer wa successfully save save view view path rename disable status check performing i o g u i utility view buffer multiple io set property buffer i o request e r r o r o u r r e d path get flag n e w f i l e save view rename path mod time last modify mod time mod time get auto reload || get auto reload dialog path result g u i utility confirm view filechang save j option pane y e s n o o p t i o n j option pane w r n i n g m e s s g e result j option pane y e s o p t i o n edit bus send buffer update view buffer update s v i n g set performing i o old path path old symlink path symlink path path path ? path path v f s vf v f s get v f s path path check save view vf path set performing i o session vf create v f s session path view session set performing i o unset property overwrite readonly unset property forbid two stage save v f s vf get session path view vf rename cap vf get capability v f s r e n m e p 0 writeable log log log w r n i n g buffer saving + + read only vf rename cap log log log d e b u g buffer saving v f s rename save path vf canon path session path view misc utility u r l save path save path misc utility resolve symlink save path save path vf get two stage save name save path save path log log log d e b u g buffer saving two stage save impossible because path v f s view path ioerror save readonly twostagefail set performing i o result g u i utility confirm view vf overwrite readonly path j option pane y e s n o o p t i o n j option pane w r n i n g m e s s g e result j option pane y e s o p t i o n log log log w r n i n g buffer saving two stage save use save buffer set property overwrite readonly log log log d e b u g buffer save set performing i o log log log w r n i n g buffer saving readonly vf cannot two stage save v f s view path ioerror readonly set performing i o save path vf canon path session path view misc utility u r l save path save path misc utility resolve symlink save path save path vf get two stage save name save path j edit get property two stage save vf rename cap || save path writeable vf cannot two stage we must overwrite readonly flag result g u i utility confirm view vf twostageimpossible path j option pane y e s n o o p t i o n j option pane w r n i n g m e s s g e result j option pane y e s o p t i o n log log log w r n i n g buffer saving two stage save cannot use set property forbid two stage save log log log d e b u g buffer save set performing i o i o io v f s view path ioerror io set performing i o vf end v f s session session view i o io v f s view path ioerror io set performing i o vf save view path set performing i o once save complete few other thing runnable queue i n s t n e run after io task runnable run set performing i o set property overwrite readonly finish saving view old path old symlink path path rename get property buffer i o request e r r o r o u r r e d update marker view check status f i l e n o t h n g e d 0 f i l e h n g e d 1 f i l e d e l e t e d 2 check buffer ha change on disk view view one f i l e n o t h n g e d f i l e h n g e d f i l e d e l e t e d since j edit 4 2pre1 check status view view t these check save progress because moment mod time great than old mod time due multithread only support on local performing i o get flag n e w f i l e read only read only read only set read only read only edit bus send buffer update buffer update d i r t y h n g e d old mod time mod time mod time last modify mod time old mod time mod time mod time set flag n e w f i l e set dirty f i l e d e l e t e d f i l e h n g e d f i l e n o t h n g e d getter setter variou buffer meta data get last modify last time j edit modify on disk thread safe get last modify mod time set last modify set last time j edit modify on disk mod time modification time set last modify mod time mod time mod time get auto reload status u t o r e l o d flag reload change automatically get auto reload get flag u t o r e l o d set auto reload set status u t o r e l o d flag value reload change automatically set auto reload value set flag u t o r e l o d value autoreload override autoreload property overriden get io task io task get io task io task set io task set io task io task task io task || io task io task get state state value d o n e io task task get auto reload dialog status u t o r e l o d d i l o g flag prompt reload notify user when ha change on disk get auto reload dialog get flag u t o r e l o d d i l o g set auto reload dialog set status u t o r e l o d d i l o g flag value prompt reload notify user when ha change on disk set auto reload dialog value set flag u t o r e l o d d i l o g value autoreload override autoreload property overriden get v f s virtual filesystem responsible loading saving buffer thread safe v f s v f s get v f s v f s get v f s path path get autosave autosave buffer may non local get autosave autosave remove autosave remove autosave since j edit 4 3pre12 remove autosave autosave autosave delete set flag u t o s v e d i r t y get name name buffer thread safe get name name get path path name buffer thread safe get path path get path replace home path on unix path get path ? misc utility abbreviate view path get path get symlink path symbolic link link destination otherwise s path thread safe since j edit 4 2pre1 get symlink path symlink path get directory directory contain buffer since j edit 4 1pre11 get directory directory close buffer ha be close link j edit close buffer view buffer thread safe close get flag l o s e d load buffer load thread safe load loading wheth buffer lack correspond on disk thread safe get flag n e w f i l e set set flag flag set set flag n e w f i l e set flag u n t i t l e d untitl untitl thread safe untitl get flag u n t i t l e d set dirty set dirty change since last save flag buffer override set dirty d old d dirty untitl j edit get property suppres save confirm untitl d d get length initial length j edit get property use m d5for dirty calculation d equal calculate hash md5hash set dirty d editable editable d editable set flag u t o s v e d i r t y set flag u t o s v e d i r t y autosave autosave delete d old d editable edit bus send buffer update buffer update d i r t y h n g e d temporary temporary buffer thread safe j edit open temporary view j edit commit temporary buffer since j edit 2 2pre7 temporary get flag t e m p o r r y get icon buffer s icon since j edit 2 6pre6 icon get icon dirty g u i utility load icon dirty gif read only g u i utility load icon readonly gif get flag n e w f i l e g u i utility load icon gif g u i utility load icon normal gif property property change reload setting from property call after syntax buffer local property are change override property change property change line limit j edit get property line limit 4000 largefilemode get property largefilemode buffer mode limited equal largefilemode || nohighlight equal largefilemode autoreload override set auto reload dialog j edit get property auto reload dialog set auto reload j edit get property auto reload temporary edit bus send buffer update buffer update p r o p e r t i e s h n g e d get property override get property name ret val mode ret val mode get property name ret val set property name ret val ret val now buffer property value j edit get property buffer + name value an first ret val value number format nf ret val value ret val toggle word wrap toggle word wrap between three available mode use status bar view we show message view s status bar since j edit 4 1pre3 toggle word wrap view view wrap get property wrap wrap equal none large mode get property largefilemode limited equal large mode || nohighlight equal large mode wrap hard wrap soft wrap equal soft wrap hard wrap equal hard wrap none view get status set message clear j edit get property view status wrap change wrap set property wrap wrap property change toggle auto indent toggle automatic indentation on off view view s status bar display message since j edit 5 0 toggle auto indent view view indent get property auto indent indent equal none indent simple indent equal simple indent full indent equal full indent none set property auto indent indent view get status set message clear j edit get property view status autoindent change indent toggle line separator toggle line separator between three available setting use status bar view we show message view s status bar since j edit 4 1pre3 toggle line separator view view status line sep get property l i n e s e p equal line sep status window line sep equal line sep status mac line sep \r \r equal line sep status unix line sep view get status set message clear j edit get property view status linesep change j edit get property line sep + status set property l i n e s e p line sep set dirty property change get context sensitive property some setting like comment start end vary between different part buffer h t m l text inline script example offset offset name property name since j edit 4 0pre3 override get context sensitive property offset name value get context sensitive property offset name value parser rule set rule get rule set at offset offset value j edit get mode rule get mode name get property name value value mode get property name value value value edit mode syntax highlighting set mode set buffer s edit mode calling accept each register edit mode set mode mode mode user mode get property mode user mode unset property mode mode mode provider instance get mode user mode mode first line get line text 0 mode mode provider instance get mode get v f s get path path first line mode large buffer size j edit get property large buffer size 4000000 get flag t e m p o r r y get length large buffer size large buffer size 0 mode load necessary context insensitive mode get property context insensitive large mode j edit get property largefilemode ask ask equal large mode context insensitive context insensitive j text pane tp j text pane tp set editable tp set text j edit get property large buffer dialog message i j option pane show option dialog j edit get active view tp j edit get property large buffer dialog title name j option pane d e f u l t o p t i o n j option pane w r n i n g m e s s g e j edit get property large buffer dialog full syntax j edit get property large buffer dialog context insensitive j edit get property large buffer dialog mode j edit get property large buffer dialog context insensitive i 0 set property largefilemode full set mode mode 1 set property largefilemode limited set mode mode 2 set property largefilemode nohighlight mode get mode set mode mode full equal large mode set property largefilemode full set mode mode limited equal large mode set property largefilemode limited set mode mode nohighlight equal large mode set property largefilemode nohighlight mode get mode set mode mode set mode mode mode mode get mode mode set mode mode mode get mode mode mode j edit get mode j edit get property buffer mode mode mode j edit get mode text mode deprecate get deprecate call use link get path instead deprecate get marker get marker vector marker since j edit 3 2pre1 vector marker get marker marker get marker status prompt action some action status prompt given marker action only intend call from action xml since j edit 4 2pre2 get marker status prompt action j edit get property view status + action get marker name get marker name all set marker use status bar eg b % ^ since j edit 4 2pre2 get marker name builder buf builder marker marker marker marker get shortcut \0 buf length 0 buf append buf append marker get shortcut buf length 0 j edit get property view status no marker buf add remove marker marker set on line position remove otherwise marker specify shortcut add po position marker shortcut shortcut \0 none since j edit 3 2pre5 add remove marker shortcut po line get line offset po get marker at line line remove marker line add marker shortcut po add marker add marker buffer po position marker shortcut shortcut \0 none since j edit 3 2pre1 add marker shortcut po marker marker n marker shortcut po add t sort marker buffer being load load set flag m r k e r s h n g e d marker n create position i 0 i marker size i++ marker marker marker get i shortcut \0 marker get shortcut shortcut marker set shortcut \0 marker get position po marker remove element at i i i 0 i marker size i++ marker marker marker get i marker get position po marker insert element at marker n i add add marker add element marker n load get flag t e m p o r r y edit bus send buffer update buffer update m r k e r s h n g e d get marker range first marker within specify range start start offset end end offset since j edit 4 0pre4 marker get marker range start end marker marker marker po marker get position po start po end marker get marker at line first marker at specify line there none line line number since j edit 3 2pre2 marker get marker at line line marker marker marker get line offset marker get position line marker remove marker remove all marker at specify line line line number since j edit 3 2pre2 remove marker line i 0 i marker size i++ marker marker marker get i get line offset marker get position line set flag m r k e r s h n g e d marker remove position marker remove element at i i edit bus send buffer update buffer update m r k e r s h n g e d remove all marker remove all define marker since j edit 2 6pre1 remove all marker set flag m r k e r s h n g e d marker marker marker marker remove position marker remove all element load edit bus send buffer update buffer update m r k e r s h n g e d get marker marker specify shortcut shortcut shortcut since j edit 3 2pre2 marker get marker shortcut marker marker marker marker get shortcut shortcut marker get marker path path buffer s marker vf appropriate v f s path path buffer different from field when using save marker path since j edit 4 3pre10 get marker path v f s vf path vf get parent path path + + vf get name path + mark update marker save marker delete when there are mo marker left handling marker now independent from saving buffer change marker set buffer dirty longer view current view marker be update since j edit 4 3pre7 update marker view view marker change adapt from v f s save v f s vf v f s get v f s path get path vf get capability v f s w r i t e p 0 || vf marker support v f s view path vf support save marker session vf create v f s session path view session thread utility run background marker save request view session vf path marker change when marker change marker need update since j edit 4 3pre7 marker change get flag m r k e r s h n g e d set marker change set unset m r k e r s h n g e d flag change change since j edit 4 3pre7 set marker change change set flag m r k e r s h n g e d change miscellaneou set wait socket socket close when buffer close wait socket socket set wait socket socket wait socket wait socket wait socket get next next buffer list buffer get next next get prev previou buffer list buffer get prev prev get index position buffer buffer list get index count 0 buffer buffer prev buffer count++ buffer buffer prev count representation buffer simply path name override name + + misc utility abbreviate view directory + add buffer undo listener add buffer undo listener listener listener since j edit 4 3pre18 add buffer undo listener buffer undo listener listener undo listener add listener remove buffer undo listener remove buffer undo listener listener listener since j edit 4 3pre18 remove buffer undo listener buffer undo listener listener undo listener remove listener member previou buffer list buffer prev next buffer list buffer next buffer constructor buffer path temp map prop prop text token marker j edit get mode text get token marker marker vector marker set flag t e m p o r r y temp must call before edit bus message are sent set path path magic u n t i t l e d only set constructor set n e w f i l e also set doesn t on disk so we tell apart create j edit those just t on disk why we need tell difference between two? j edit add buffer list check only open buffer an untitl buffer so replace buffer add we t want behavior occur t on disk only untitl one set flag u n t i t l e d set flag n e w f i l e set flag u t o r e l o d j edit get property auto reload set flag u t o r e l o d d i l o g j edit get property auto reload dialog undo listener vector buffer undo listener commit temporary commit temporary set flag t e m p o r r y finish loading close close set flag l o s e d autosave autosave delete notify client wait wait socket wait socket get output stream \0 wait socket get output stream flush wait socket get input stream close wait socket get output stream close wait socket close i o io log log log e r r o r io member override token marker line context mark token segment seg token marker line context prev context token handler token handler token marker line context context buffer mode line limit 0 line limit seg length context text token marker mark token prev context token handler seg context token marker mark token prev context token handler seg context fire begin undo fire begin undo buffer undo listener listener undo listener listener begin undo throwable t log log log e r r o r sending buffer undo event + listener + log log log e r r o r t fire end undo fire end undo buffer undo listener listener undo listener listener end undo throwable t log log log e r r o r sending buffer undo event + listener + log log log e r r o r t fire begin redo fire begin redo buffer undo listener listener undo listener listener begin redo throwable t log log log e r r o r sending buffer begin redo event + listener + log log log e r r o r t fire end redo fire end redo buffer undo listener listener undo listener listener end redo throwable t log log log e r r o r sending buffer end redo event + listener + log log log e r r o r t member flag set flag set flag flag value value flag | 1 flag flag 1 flag get flag get flag flag mask 1 flag flag mask mask get flag autoreload property overriden get flag u t o r e l o d j edit get property auto reload || get flag u t o r e l o d d i l o g j edit get property auto reload dialog flag value l o s e d 0 n e w f i l e 3 u n t i t l e d 4 u t o s v e d i r t y 5 u t o r e l o d 6 u t o r e l o d d i l o g 7 t e m p o r r y 10 m r k e r s h n g e d 12 flag instance variable indicate autoreload property wa override line limit token marker text token marker autoreload override path symlink path name directory autosave mod time md5hash initial length buffer mode vector marker marker socket wait socket list buffer undo listener undo listener current io task buffer io task io task set path set path path j edit visit j edit visitor adapter override visit edit pane edit pane edit pane buffer rename buffer path path path path v f s vf v f s get v f s path path vf get capability v f s w r i t e p 0 set read only name vf get name path directory vf get parent path path vf v f s path symlink path misc utility resolve symlink path we t autosave won t delete after save autosave autosave delete autosave get parent + name + i wonder lack anyth past? autosave symlink path path recover autosave recover autosave view view autosave read might get call at startup g u i utility hide splash screen autosave get path result g u i utility confirm view autosave found j option pane y e s n o o p t i o n j option pane w r n i n g m e s s g e result j option pane y e s o p t i o n v f s get v f s load view autosave get path show message when all i o request are complete runnable queue i n s t n e run after io task runnable run g u i utility message view autosave load check load check load view view v f s vf path vf get capability v f s l o w l t e n y p 0 session vf create v f s session path view session v f s vf get session path view set readable v f s view path ioerror no read set set read only writeable get type v f s f i l e v f s view path ioerror open directory set i o io v f s view path ioerror io vf end v f s session session view i o io v f s view path ioerror io check save check save view view v f s vf path vf get capability v f s l o w l t e n y p 0 session vf create v f s session path view session v f s vf get session path view get type v f s f i l e v f s view path ioerror save directory i o io v f s view path ioerror io vf end v f s session session view i o io v f s view path ioerror io an m d5 hash content buffer calculate hash dummy 1 j edit get property use m d5for dirty calculation dummy standard utility md5 get segment 0 get length update buffer s member current hash length comparison update hash initial length get length md5hash calculate hash finish loading finish loading update hash parse buffer local property h probably only way fix fold handler old fold handler get fold handler set mode get fold handler old fold handler on reload fold handler doesn t change we still need re collapse fold t on initial fold handler creation invalidate fold level fire fold handler change create marker position marker marker marker marker remove position po marker get position po get length marker set position get length po 0 marker set position 0 marker create position finish saving finish saving view view old path old symlink path path rename set buffer s path caveat won t work save call relative path i t think anyone call like anyway path equal old path buffer buffer j edit get buffer path rename we save same name one s already open we presume we close since user would confirm overwrite save dialog box anyway buffer t happen? buffer get path equal old path buffer set dirty j edit close buffer view buffer set path path j edit visit j edit visitor adapter override visit edit pane edit pane buffer set buffer set edit pane get buffer set buffer set index buffer 1 buffer set sort we save over an already open using save then reload buffer buffer t happen? buffer get path equal old path buffer load view update buffer path rename mod time last modify we lock so autosave which grab read lock execute between deletion autosave clearing dirty flag lock autosave autosave delete set flag u t o s v e d i r t y set read only set flag n e w f i l e set flag u n t i t l e d set dirty j edit get property reset undo on save undo mgr clear unlock parse buffer local property get path equal old path temporary j edit update position old symlink path set mode user add mode buffer local property mode get property mode mode mode equal get mode get name set mode update hash temporary edit bus send buffer update view buffer update d i r t y h n g e d message type introduce 4 0pre4 edit bus send buffer update view buffer update s v e d 