v f s virtual filesystem tab size 4 indent size 4 no tab collapse fold 1 2000 2003 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s io importsimport color component io io closeable regex pattern regex pattern syntax msg property change bufferio buffer load request bufferio buffer save request bufferio buffer insert request log progress observer i o utility standard utility task thread utility virtual filesystem p plugin provide virtual defining entry their service xml like so pre lt s e r v i e l s s io v f s n m e i name i i my v f s i lt s e r v i e pre u r l form i name i i path i then handle v f s name i name i p link service p h3 session h3 session use persist thing like login information network socket etc need kind persistence dummy session p whose name are prefix expect given previously obtain session session must obtain link create v f s session component call from w t e d t thread unles filesystem ha n o n w t s e s s i o n p capability p when session must dispose using link end v f s session component p h3 thread safety h3 following cannot call from an i o thread link create v f s session component unles n o n w t s e s s i o n p capability set link insert view buffer link load view buffer link save view buffer all remain are require thread safe subclass h3 implement v f s h3 override many few want make sure link get capability value reflect functionality your v f s v f s get v f s path v f s get v f s protocol v f s 24415 2016 06 19 11 07 55 kerik sf v f s capability read capability since j edit 2 6pre2 r e d p 1 0 capability since j edit 2 6pre2 w r i t e p 1 1 browse capability since j edit 4 3pre11 wa official p i add item browser s b plugin b menu j edit 4 1 earlier j edit 4 2 there different way must provide browser action xml your plugin j r define plugin i i browser menu item plugin i i browser menu property link edit plugin b r o w s e p 1 2 delete capability since j edit 2 6pre2 d e l e t e p 1 3 rename capability since j edit 2 6pre2 r e n m e p 1 4 make directory capability since j edit 2 6pre2 m k d i r p 1 5 low latency capability set then confirm dialog show before directory search v f s since j edit 4 1pre1 l o w l t e n y p 1 6 insensitive capability since j edit 4 1pre1 s e i n s e n s i t i v e p 1 7 session create outside event dispatch thread capability set doe require create v f s session call on edt all implement create v f s session set other may too since j edit 5 0pre1 n o n w t s e s s i o n p 1 8 extend attribute type since j edit 4 2pre1 e t y p e type status read only read etc since j edit 4 2pre1 e s t t u s status size since j edit 4 2pre1 e s i e size last modify date since j edit 4 2pre1 e m o d i f i e d modify i o b u f s i e 32678 v f s constructor create virtual filesystem name name cap capability v f s name cap name name cap cap reasonable ? ext attr e s i e e t y p e create virtual filesystem name name cap capability ext attr extend attribute since j edit 4 2pre1 v f s name cap ext attr name name cap cap ext attr ext attr get name v f s s name name use obtain label store vf i name i label property get name name get capability capability v f s since j edit 2 6pre2 get capability cap marker support an additional marker save v f s since j edit 4 3pre10 marker support get extend attribute extend attribute support v f s since j edit 4 2pre1 get extend attribute ext attr get name name component specify path path path since j edit 3 1pre4 get name path path equal path path end || path end separator path path substring 0 path length 1 index math max path last index path last index separator index 1 index path index t want get name root index 1 || index path length 1 path path substring index + 1 get path path component specify v f s path standard cut off protocol protocol separator character then delegate eventually present sub v f s path present v f s path like jode archive test zip test txt p v f s additional information v f s path like username password host port f t p v f s archive filename archive v f s override remove those information also easy would remove those additional information then delegate get path vf path v f s path since j edit 4 5pre1 get path vf path misc utility u r l vf path vf path path vf path substring misc utility get protocol u r l vf path length + 1 v f s get v f s path path get path path get parent path parent specify path must override non value browsing filesystem work path path since j edit 2 6pre5 get parent path path ignore last character path properly handle path like foo bar last index path length 1 last index 0 path at last index separator || path at last index last index count math max 0 last index index path last index separator count index 1 index path last index count index 1 ensure get parent protocol example protocol index path last index path substring 0 index + 1 construct path construct path from specify directory name component must override non value otherwise browsing filesystem work p unles are writing v f s call directly ensure correct behavior b must b call link misc utility construct path instead parent parent directory path path since j edit 2 6pre2 construct path parent path parent + path get separator separator use v f s since j edit 2 6pre9 get separator get two stage save name temporary name base on given path j edit first save i name i save then rename original howev some virtual might support character filename so permit v f s override behavior two stage save use introduce j edit 4 3pre1 path path name since j edit 4 1pre7 get two stage save name path misc utility construct path get parent path path + get name path + save reload directory call before directory reload browser use flush cache etc since j edit 4 0pre3 reload directory path create v f s session create v f s session call from w t thread so i o could howev prompt login name password example simple filesystem may set n o n w t s e s s i o n p capability when set session may obtain from thread path path question comp component parent dialog box show session session there be since j edit 2 6pre3 create v f s session path component comp same link create v f s session may call from thread first check n o n w t s e s s i o n p capability enter e d t thread necessary create v f s session safe path component comp session get capability n o n w t s e s s i o n p 0 session create v f s session path comp session gett gett session gett path comp thread utility run dispatch thread wait gett session gett get session load load specify buffer post an i o request i o thread view view buffer buffer path path load view view buffer buffer path get capability r e d p 0 v f s view path vf support load name session create v f s session path view session get capability w r i t e p 0 buffer set read only task request buffer load request view buffer session path buffer temporary make hyp search much fast request run buffer load request cause u i interation example f t p connection dialog so runn dispatch thread thread utility run dispatch thread request thread utility run background request save save specifie buffer post an i o request i o thread view view buffer buffer path path save view view buffer buffer path get capability w r i t e p 0 v f s view path vf support save name session create v f s session path view session when save path save path same buffer s previou path buffer get path we want create backup path old path wa back up well b k e d u p property set path equal buffer get path buffer unset property buffer b k e d u p thread utility run background buffer save request view buffer session path another using v f s progress progress observer could t want monitor progress probably launch command work thread source v f s source v f s source session v f s session source path source path must must target v f s target v f s target session target session target path target path path must parent must comp component parent dialog box stop could stop ? wa succesful i o i o an i o occur since j edit 4 3pre3 progress observer progress v f s source v f s source session source path v f s target v f s target session target path component comp stop i o progress source v f s source session source path target v f s target session target path comp stop another using v f s progress progress observer could t want monitor progress probably launch command work thread source v f s source v f s source session v f s session source path source path must must target v f s target v f s target session target session target path target path path must parent must comp component parent dialog box stop could stop ? send v f s update want send v f s update after otherwise lot wa succesful i o i o an i o occur since j edit 5 0 progress observer progress v f s source v f s source session source path v f s target v f s target session target path component comp stop send v f s update i o source path equal target path log log log w r n i n g v f s j edit get property ioerror self source path progress progress set status initialize input stream output stream out v f s source v f s source v f s get source session source path comp source v f s found source path + source path + doesn t progress progress set maximum source v f s get length v f s target v f s target v f s get target session target path comp target v f s parent target path misc utility get parent path target path v f s parent target v f s target v f s get target session parent target path comp parent target v f s found target path + parent target path + doesn t parent target v f s get type v f s d i r e t o r y target filename misc utility get name target path target path misc utility construct path parent target path target filename i o parent target path target v f s get type v f s d i r e t o r y target v f s get path equal source v f s get path target path misc utility construct path target path source v f s get name buffer input stream source v f s create input stream source session source path comp out buffer output stream target v f s create output stream target session target path comp result i o utility stream i o b u f s i e progress out stop send v f s update v f s send v f s update target v f s target path result i o utility close quietly closeable i o utility close quietly closeable out another using v f s progress progress observer could t want monitor progress probably launch command work thread source path source path target path target path comp component parent dialog box stop stop send v f s update want send v f s update after otherwise lot wa succesful i o i o an i o occur since j edit 5 0 progress observer progress source path target path component comp stop send v f s update i o v f s source v f s v f s get v f s path source path v f s target v f s v f s get v f s path target path source session target session source session source v f s create v f s session source path comp source session log log log w r n i n g v f s unable get valid session from + source v f s + path + source path target session target v f s create v f s session target path comp target session log log log w r n i n g v f s unable get valid session from + target v f s + path + target path progress source v f s source session source path target v f s target session target path comp stop send v f s update source session source v f s end v f s session source session comp target session target v f s end v f s session target session comp another using v f s progress progress observer could t want monitor progress probably launch command work thread source path source path target path target path comp component parent dialog box stop stop wa succesful i o i o an i o occur since j edit 4 3pre3 progress observer progress source path target path component comp stop i o progress source path target path comp stop insert insert into specify buffer post an i o request i o thread view view buffer buffer path path insert view view buffer buffer path get capability r e d p 0 v f s view path vf support load name session create v f s session path view session thread utility run background buffer insert request view buffer session path name start require session canon path canonical form specify path name example might expand user s home directory session session path path comp component parent dialog box i o an i o occur since j edit 4 0pre2 canon path session path component comp i o path list directory convenience match name against glob optionally list directory recursively session session directory directory note must full u r l include host name path name so on username password need v f s obtain from session instance glob only name match glob recursive subdirectory also list comp component parent dialog box i o an i o occur since j edit 4 1pre1 list directory session directory glob recursive component comp i o retval list directory session directory glob recursive comp retval list directory convenience match name against glob optionally list directory recursively session session directory directory note must full u r l include host name path name so on username password need v f s obtain from session instance glob only name match glob recursive subdirectory also list comp component parent dialog box i o an i o occur skip binary ignore binary them slow down process since open skip hide skip hide directory backup ignore beginning ending bak since j edit 4 3pre5 list directory session directory glob recursive component comp skip binary skip hide i o v f s filter filter glob v f s filter glob list directory session directory filter recursive comp skip binary skip hide list directory convenience filter directory listing accord filter optionally list directory recursively session session directory directory note must full u r l include host name path name so on username password need v f s obtain from session instance filter link v f s filter use filter recursive subdirectory also list comp component parent dialog box i o an i o occur skip binary ignore binary them slow down process since open skip hide skip hide directory backup ignore beginning ending bak since j edit 4 3pre7 list directory session directory v f s filter filter recursive component comp skip binary skip hide i o list list 100 list session hash set directory filter recursive comp skip binary skip hide ret val size sort ret val standard utility compare ret val list list specify directory session session directory directory note must full u r l include host name path name so on username password need v f s obtain from session instance comp component parent dialog box i o an i o occur since j edit 4 3pre2 v f s list session directory component comp i o v f s comp directory vf support list name get specify directory entry session session get link v f s create v f s session component path path comp component parent dialog box i o an i o occur specify directory entry doesn t since j edit 4 3pre2 v f s get session path component comp i o delete delete specify u r l session v f s session path path comp component parent dialog box i o an i o occur since j edit 2 7pre1 delete session path component comp i o rename rename specify u r l some filesystem might support move u r l between directory howev other may rely on behavior session v f s session from old path path comp component parent dialog box i o an i o occur since j edit 2 7pre1 rename session from component comp i o mkdir create directory specify u r l session v f s session directory directory comp component parent dialog box i o an i o occur since j edit 2 7pre1 mkdir session directory component comp i o backup back up specify 5 0pre1 copy backup directory before 5 0pre1 wa empty session v f s session path path comp component parent dialog box i o an i o occur since j edit 3 2pre2 backup session path component comp i o v f s vf src v f s get v f s path path vf src get session path comp backup doe maybe applicable local filesystem t worry backup purpose may out real filesystem backup dir misc utility prepare backup directory path backup dir log log log w r n i n g v f s backup remote + path + fail because there no backup directory backup dir usually mean there no specify backup directory log log log w r n i n g v f s backup + path + fail directory + backup dir + doe backup misc utility prepare backup path backup dir backup using v f s v f s vf dst v f s get v f s path backup get path session dst vf dst create v f s session safe backup get path comp session dst vf src session path vf dst session dst backup get path comp log log log w r n i n g v f s backup + path + fail + backup + fail vf dst end v f s session session dst comp create input stream create an input stream call from i o thread session v f s session path path ignore found ignore comp component parent dialog box an inputstream there wa problem i o an i o occur since j edit 2 7pre1 input stream create input stream session path ignore component comp i o v f s comp path vf support load name create output stream create an output stream call from i o thread session v f s session path path comp component parent dialog box i o an i o occur since j edit 2 7pre1 output stream create output stream session path component comp i o v f s comp path vf support save name save complete call after ha be save session v f s session buffer buffer path path buffer wa save different from link buffer get path user b save b command example comp component parent dialog box i o an i o occur since j edit 4 1pre9 save complete session buffer buffer path component comp i o finish two stage save call after ha be save we use two stage save first saving another re apply permission example session v f s session buffer buffer path path buffer wa save different from link buffer get path user b save b command example comp component parent dialog box i o an i o occur since j edit 4 3pre4 finish two stage save session buffer buffer path component comp i o end v f s session finish specify v f s session must call after all i o v f s complete avoid leaving stale network connection such session v f s session comp component parent dialog box i o an i o occur since j edit 2 7pre1 end v f s session session component comp i o get color color specify name match against user specify regular expression since j edit 4 0pre1 color get color name lock color load color color entry entry color entry re matcher name match entry color directory entry compare link comparator compare link v f s instance since j edit 4 2pre1 directory entry compare comparator v f s sort ignore sort mix dir create directory entry compare sort mix dir directory are put at top listing sort ignore upper come before lower directory entry compare sort mix dir sort ignore sort mix dir sort mix dir sort ignore sort ignore compare v f s file1 v f s file2 sort mix dir file1 get type file2 get type file2 get type file1 get type standard utility compare file1 get name file2 get name sort ignore member name cap ext attr list color entry color lock initializ edit bus add bus e b component handle message e b message msg msg property change lock color recursive list list session collection stack list directory v f s filter filter recursive component comp skip binary skip hide i o recursive misc utility u r l directory resolve path misc utility resolve symlink directory looking at symlink traverse resolve path than once directory equal resolve path stack contain resolve path log log log e r r o r recursion list + directory stack add resolve path v f s list session directory comp || length 0 i 0 i length i++ thread current thread interrupt v f s i skip hide hide || misc utility backup get name filter accept get type v f s d i r e t o r y || get type v f s f i l e s y s t e m recursive canon path canon path session get path comp list session stack canon path filter recursive comp skip binary skip hide s regular skip binary binary session log log log n o t i e get path + skip binary i o e log log log e r r o r e may binary add get path load color load color lock color list color entry j edit get property vf browser colorize glob i 0 glob j edit get property vf browser color + i + glob color add color entry pattern compile standard utility glob r e glob j edit get color property vf browser color + i + color color black pattern syntax e log log log e r r o r v f s invalid regular expression + glob log log log e r r o r v f s e i++ color entry color entry pattern re color color color entry pattern re color color re re color color session gett session gett runnable session gett path component comp path path comp comp session path component comp run session create v f s session path comp get session 