part bean shell script distribution documentation update may found at http www beanshell sun notice content are subject sun 1 0 may use except compliance available at http www sun com original bean shell initial developer original pat niemey create pat niemey are 2000 all right reserve g n u notice alternatively content may use g n u less l g p l which provision l g p l are applicable instead those above wish allow use your only l g p l allow other use your s p l indicate your decision delete provision above replace them notice other provision require l g p l delete provision above recipient may use your s p l l g p l patrick niemey pat pat net learning o reilly associate http www pat net pat bsh vector stack name space represent call path each invocation example push name space onto stack top stack alway current namespace evaluation p use support caller magic reference print script stack trace when evaluation occur p note would awefully nice use stack here sigh stay 1 1 compatible p note how thread safe might ask? wouldn t thread executing variou beanshell mutate callstack? t we need one call stack p thread interpreter? answer we thread enter our script via an external hard reference via type e g runnable an arbitrary x call expose create call stack each external call p call stack vector name space stack vector name space 2 call stack call stack name space namespace push namespace clear stack remove all element push name space n stack insert element at n 0 name space top get 0 zero base name space get depth depth depth name space j v o d e name space stack element at depth kind crazy use set name space command zero base set depth name space n stack set element at n depth name space pop depth 1 interpreter pop on empty call stack name space top top stack remove element at 0 top swap value top stack old value name space swap name space top name space old top name space stack element at 0 stack set element at top 0 old top depth stack size name space name space nsa name space depth stack into nsa nsa builder sb builder sb append call stack name space nsa i 0 i nsa length i++ sb append +nsa i + sb occasionally we need freeze callstack reporting purpose etc suppres warning uncheck call stack call stack c call stack c stack vector name space stack clone c 