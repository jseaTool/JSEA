input support input support j edit text area tab size 4 indent size 4 no tab collapse fold 1 2006 kazutoshi satoda g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s textarea importsimport text attribute text attribute character iterator point rectangle graphics2 d font metric im input request event input listener event input event font text layout font text attribute font text hit info input support j edit text area kazutoshi satoda since j edit 4 3pre7 input support text area extension input request input listener owner text area owner compose text layout which wa build from last input event text layout compose text layout x offset caret compose text compose caret x 0 last commit information support cancel latest commit text last commit at 0 last commit text input support text area owner owner owner owner add input listener owner get painter add extension text area painter h i g h e s t l y e r utility compute value get text location from x y rectangle get caret rectangle x y text area painter painter owner get painter point origin painter get location on screen height painter get line height rectangle origin x + x origin y + y 0 height text area extension paint valid line graphics2 d gfx screen line physical line start end y compose text layout caret owner get caret position start caret caret end text area painter painter owner get painter hight baseline are take from painter s font metric instead text layout so compose text render at same position text text area font metric fm painter get font metric x owner offset x y caret x width math round compose text layout get advance height painter get line height offset baseline height fm get leading +1 fm get descent caret x x + compose caret x gfx set color painter get background gfx fill rect x y width height gfx set color painter get foreground compose text layout draw gfx x y + offset baseline gfx set color painter get caret color gfx draw line caret x y caret x y + height 1 input request rectangle get text location text hit info offset compose text layout location compose text point caret owner offset x y owner get caret position get caret rectangle caret x + compose caret x caret y location select text selection selection on caret owner get selection at offset owner get caret position selection on caret point selection start owner offset x y selection on caret get start get caret rectangle selection start x selection start y text hit info get location offset x y compose text layout point origin owner get painter get location on screen point caret owner offset x y owner get caret position local x x origin x caret x local y y origin y caret y compose text layout get leading +1 compose text layout get ascent compose text layout hit test local x local y get insert position offset owner get caret position attribute character iterator get commit text begin index end index attribute character iterator attribute attribute attribute owner get text begin index end index begin index get iterator get commit text length owner get buffer length attribute character iterator cancel latest commit text attribute character iterator attribute attribute last commit text offset last commit at length last commit text length sample owner get text offset length sample sample equal last commit text attribute character iterator cancel attribute sample get iterator owner get buffer remove offset length owner set caret position offset last commit text cancel cleare last commit information prevent accidental match last commit text attribute character iterator get select text attribute character iterator attribute attribute selection selection on caret owner get selection at offset owner get caret position selection on caret attribute owner get select text selection on caret get iterator input listener input text change input event event compose text layout attribute character iterator text event get text text commit count event get commit character count commit count 0 last commit text last commit at owner get caret position builder commit builder commit count count text first count commit count attribute character iterator d o n e count 0 text next count owner user input commit append last commit text commit end index text get end index commit count end index attribute compose attribute text commit count end index text area painter painter owner get painter compose add attribute text attribute f o n t painter get font compose text layout text layout compose get iterator painter get font render context also update caret caret position change event caret position change input event event compose caret x 0 compose text layout text hit info caret event get caret caret compose caret x math round compose text layout get caret info caret 0 adjust visiblity insertion x owner offset x y owner get caret position x text hit info visible event get visible position compose visible x visible ? math round compose text layout get caret info visible 0 compose caret x visible x insertion x + compose visible x painter width owner get painter get width adjustment 0 visible x 0 adjustment visible x visible x painter width adjustment visible x painter width 1 adjustment 0 owner set horizontal offset owner get horizontal offset adjustment cancel horizontal adjustment compose text f i x m e horizontal offset may beyond max value owner s horizontal scroll bar owner scroll caret invalidate one line below caret because underline compose text go beyond caret line some font setting caret line owner get caret line owner invalidate line range caret line caret line + 1 event consume 