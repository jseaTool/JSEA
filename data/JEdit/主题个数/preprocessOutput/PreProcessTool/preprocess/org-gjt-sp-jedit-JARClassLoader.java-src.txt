j r loader load from j r tab size 4 indent size 4 no tab collapse fold 1 1999 2003 1999 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s importsimport io input stream io i o net u r l zip zip entry zip zip log jar manifest jar jar net malform u r l jar attribute jar attribute name loader load from j r all instance share same set j r loader 24427 2016 06 22 22 29 03 j r loader loader j r loader constructor constructor create loader loading from all plugin example bean shell us one these so script use plugin j r loader create loader optionally delegate finding parent loader since j edit 4 3pre6 j r loader delegate first delegate first delegate first debug i n d e x++ live++ load found could found load clazz resolve found found pend delegate first load from parent clazz found cnf keep going wa found pend cnf obj hash get clazz obj n o l s s we remember which we t because bean shell loading all possible prefix name combination found clazz obj j r loader j r loader loader j r loader obj loader load clazz resolve found cnf2 hash put clazz n o l s s cnf2 delegate first delegating reaching statement mean wa really found otherwise we ll loading from parent loader pend load from parent clazz get resource stream input stream get resource stream name current jar first jar zip zip jar get zip zip entry entry zip get entry name entry zip get input stream entry then from another jar obj resource hash get name obj j r loader j r loader loader j r loader obj loader get resource stream name from loader get resource stream name i o io log log log e r r o r io get resource override get resource because we want search f i r s t loader then parent path etc u r l get resource name jar zip zip jar get zip zip entry entry zip get entry name entry u r l get resource path name obj resource hash get name obj j r loader j r loader loader j r loader obj loader get resource name u r l ret get resource name ret log log log d e b u g j r loader would get resource +name+ log log log d e b u g j r loader +ret+ ret i o io log log log e r r o r io get resource path construct jeditresource etc path from name resource associate jar existence resource actually check name name resource jeditresource path jar name resource unsupport operation an anonymou j r loader no associate jar get resource path name must fix dur plugin development jar unsupport operation t call get resource path on anonymou j r loader name start name + name jeditresource + misc utility get name jar get path + + name dump debug dump log log log d e b u g j r loader total instance create + i n d e x log log log d e b u g j r loader live instance + live hash map entry entry hash entry set entry get value n o l s s log log log d e b u g j r loader entry get key + + entry get value jar anonymou + + jar get path + + + find resource zero one resource get resource override enumeration u r l get resource name i o single element enumeration enumeration u r l u r l element single element enumeration u r l element element element ha element element u r l next element element u r l retval element element retval no such element u r l resource get resource name single element enumeration resource finalize finalize live member j r loader constructor since j edit 4 2pre1 j r loader plugin j r jar jar jar activate activate jar get plugin delegate j edit get property plugin + jar get plugin get name + loader delegate delegate first delegate || equal delegate jar get hash put resource jar get resource resource resource resource resource hash put resource deactivate deactivate jar get loader hash get loader hash remove two plugin provide same resource jar get resource resource resource resource loader resource hash get resource loader resource hash remove resource two plugin provide same resource member use mark non existent hash n o l s s i n d e x live map hash hashtable map resource hash hash map delegate first plugin j r jar load load from j r only load clazz resolve found jar activate plugin cl find load clazz cl resolve resolve cl cl name misc utility clazz define clazz zip zip jar get zip zip entry entry zip get entry name entry found clazz input stream zip get input stream entry len entry get size data len success 0 offset 0 success len len success offset + success success read data offset len success 1 log log log e r r o r fail load + clazz + from + zip get name found clazz cl define clazz data 0 data length resolve resolve cl cl i o io log log log e r r o r io found clazz define clazz define clazz i o idx clazz last index idx 1 name clazz substring 0 idx get name define name jar jar get get manifest get mf value get mf value attribute section attr attribute attr attribute name name value section attr value section attr get value name attr value attr get value name value define name manifest define name manifest mf mf define name attribute sa mf get attribute name replace + attribute mf get attribute u r l seal base value get mf value sa name s e l e d seal base jar get u r i u r l malform u r l e n o p m d define name get mf value sa name s p e i f i t i o n t i t l e get mf value sa name s p e i f i t i o n v e r s i o n get mf value sa name s p e i f i t i o n v e n d o r get mf value sa name i m p l e m e n t t i o n t i t l e get mf value sa name i m p l e m e n t t i o n v e r s i o n get mf value sa name i m p l e m e n t t i o n v e n d o r seal base load from parent load from parent clazz found cl loader parent loader get get loader parent loader cl parent loader load clazz cl find clazz cl 