log logging event tab size 4 indent size 4 no tab collapse fold 1 1999 2003 g n u 2 w i t h o u t n y w r r n t y m e r h n t b i l i t y f i t n e s s f o r p r t i u l r p u r p o s e g n u g n u 59 330 m 02111 1307 u s importsimport io output stream io i o io output stream io print stream io writer text date format event list data event event list data listener list model utility text date format m e d i u m provide logging event functionality somewhere between out full blow logging such log4j p all event are log an memory buffer optionally stream those high urgency warning are also print standard output p logging traceback support p also optionally redirect standard output log link init log 24428 2016 06 23 02 49 29 log constant maximum number log message keep memory since j edit 2 6pre5 m x l i n e s 500 debug message urgency use message only when debug problem since j edit 2 2pre2 d e b u g 1 message urgency use message which give detail than notice since j edit 2 2pre2 m e s s g e 3 notice urgency use message directly affect user since j edit 2 2pre2 n o t i e 5 warning urgency use message warrant attention since j edit 2 2pre2 w r n i n g 7 urgency use message signal failure since j edit 2 2pre2 e r r o r 9 init initializ log stdio standard output intercept sent log urgency these implicit log entry n o t i e e r r o r accordingly note such situation out print call appear on standard output output level high than n o t i e level message log level high print console since j edit 3 2pre4 init stdio level stdio out real out err real err set out create print stream n o t i e set err create print stream e r r o r log level level log some stuff log m e s s g e log when reporting bug please + include following information prop vm vm name runtime runtime name vendor compiler o name o o arch user home home path prop prop log m e s s g e log prop + + get property prop set log writer write all currently log message stream there wa no stream set previously set stream future log message stream writer since j edit 3 2pre4 set log writer writer stream log stream stream wrap i log line count i log length i++ stream log i stream line sep i 0 i log line count i++ stream log i stream line sep stream flush e n o p m d nothing who care well p m d call on log stream stream get set beep on output since j edit 5 1pre1 get beep on output beep on output when beep on output set every output going standard signal standard beep intend debug purpose allow immediate problem detection since j edit 5 1pre1 set beep on output beep on output log beep on output beep on output flush stream flush log stream since j edit 2 6pre5 flush stream stream stream flush i o io io print stack trace real err close stream close log stream before your exit since j edit 2 6pre5 close stream stream stream close stream i o io io print stack trace real err get log list model list model viewing log content since j edit 4 2pre1 list model get log list model list model log log an message an cause call link log then explicitly provide so present debug user manner just message also stack trace since j edit 4 3pre5 log urgency source message throwable we nice here start log urgency source message log urgency source log log message thread safe p following send typical debug message activity log pre log log log d e b u g counter + counter pre correspond activity log entry might read follow pre debug parser counter 15 pre urgency urgency one log d e b u g log m e s s g e log n o t i e log w r n i n g log e r r o r source source message an instance when writing log message from macro set parameter bean shell make easy spot activity log message message an since j edit 2 2pre2 log urgency source message source source source thread current thread get name source source thread current thread get get name source source ? source get name source source get get name index source last index index 1 source source substring index+1 message throwable log urgency source throwable message message value message multiple thread log stuff we t want output get mix up l o k tokeniz st tokeniz message line count 0 old wrap wrap st ha token line count++ log urgency source st next token replace list model update line count old wrap member instance variable l o k log log line count wrap level writer stream line sep print stream real out print stream real err log list model list model date format time format m x t h r o w b l e s 10 list throwable throwable initialize externally through set beep on output beep on output prevent too much beep we remember last beep time last beep time 0 initializ l o k level w r n i n g real out out real err err log m x l i n e s line sep get property line separator list model log list model time format date format get time instance m e d i u m throwable collection list list throwable m x t h r o w b l e s create print stream print stream create print stream urgency source log print stream urgency source log log urgency source throwable message print stream out create print stream urgency source urgency level throwable throwable size m x t h r o w b l e s throwable remove 0 throwable add message l o k message print stack trace out log log urgency source message full message time format format date + + thread current thread get name + + urgency urgency + + source + + message log log line count full message ++log line count log length wrap log line count 0 stream stream full message stream line sep e e print stack trace real err urgency level urgency e r r o r real err full message real out full message beep on output time current time milli time last beep time 1000 u i get look feel provide feedback last beep time current time milli urgency urgency urgency urgency d e b u g debug m e s s g e message n o t i e notice w r n i n g warning e r r o r illegal argument invalid urgency + urgency log list model log list model list model list list data listener listener list list data listener fire interval add fire interval add index1 index2 list data listener listener listener listener interval add list data event list data event i n t e r v l d d e d index1 index2 fire interval remove fire interval remove index1 index2 list data listener listener listener listener interval remove list data event list data event i n t e r v l r e m o v e d index1 index2 add list data listener add list data listener list data listener listener listener add listener remove list data listener remove list data listener list data listener listener listener remove listener get element at get element at index wrap index m x l i n e s log line count log index + log line count log index m x l i n e s + log line count log index get size get size wrap m x l i n e s log line count update update line count old wrap line count 0 || listener empty utility runnable run wrap old wrap fire interval remove 0 line count 1 fire interval remove 0 log line count fire interval add m x l i n e s line count + 1 m x l i n e s fire interval add log line count line count + 1 log line count log print stream print stream us log output message ha special treatment printf function using stream ha one caveat printing message t line at end one add automatically log print stream print stream output stream buffer output stream orig log print stream constructor log print stream urgency source log output stream urgency source buffer output stream orig out printf hack allow printf print weird stuff output since printf doesn t seem print whole message one shot our output stream above would line log into several line so we buffer result printf call print whole thing one shot similar hack would need other printf i ll settle common only print stream printf format orig buffer reset out buffer printf format data buffer orig data 0 data length out orig i o ioe n o p m d t anything? buffer reset log output stream log output stream output stream urgency source log output stream constructor log output stream urgency source urgency urgency source source b barray b barray 0 1 b off len str b off len log urgency source str 