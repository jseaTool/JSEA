2010 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e semi supervise constraint gnu trove t gnu trove t hash map bit sum lattice semi supervise label map type feature vector type feature vector type instance type instance constraint distribution over pair consecutive label condition presence input feature subclass g e multiple constraint group together here thing efficient gregory druck two label g e constraint g e constraint two label g e constraint constraint t hash map constraint map label map map t cache two label g e constraint constraint two label g e constraint constraint map t hash map map cache t two label g e constraint two label g e constraint constraint t hash map constraint map label map map constraint constraint constraint map constraint map map map cache t fi input feature index target target over pair label weight weight constraint add constraint fi target weight constraint label map label map map map map pre process feature vector fv cache reset quick fi loc 0 loc fv num location loc++ fi fv index location loc constraint map contain key fi cache add constraint map get fi bit pre process instance count bit bit bit size 0 instance instance feature vector fv feature vector instance get ip 1 ip fv size ip++ fi constraint map key binary constraint feature fv get ip location fi 0 constraint get constraint map get fi count + 1 bit ii++ bit get composite constraint feature value feature vector fv ip si1 si2 complication start consider transition into position 1 ip 0 0 value 0 li1 map get label index si1 li1 label map t r t l e l 0 li2 map get label index si2 0 cache size i++ value + constraint get cache get quick get value li1 li2 value get value zero expectation two label g e constraint constraint constraint constraint expectation map get num label map get num label compute expectation sum lattice lattice xi t cache t 0 lattice size i++ lattice get feature vector fv feature vector lattice get get input sum lattice lattice lattice get xi lattice get xi ip 1 ip fv size ++ip cache reset quick feature vector fv fv get feature vector ip fi loc 0 loc fv num location loc++ fi fv index location loc binary constraint feature constraint map contain key fi cache add constraint map get fi prev 0 prev map get num ++prev prev map get label index prev prev label map t r t l e l curr 0 curr map get num ++curr curr map get label index curr curr label map t r t l e l prob math xi ip prev curr j 0 j cache size j++ constraint get cache get quick j expectation prev curr + prob two label g e constraint target expectation count weight two label g e constraint target weight target target weight weight expectation count 0 get value prev curr 