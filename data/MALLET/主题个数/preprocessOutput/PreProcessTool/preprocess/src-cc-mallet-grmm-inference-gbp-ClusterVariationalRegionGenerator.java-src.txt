2003 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e inference gbp logging logger type factor type factor graph type undirect grid type variable collection util logger create jun 1 2005 h r e f $ cluster variational region generator v 1 1 2007 10 22 21 37 58 $ cluster variational region generator region graph generator logger logger logger get logger cluster variational region generator get name debug base region region cluster variational region generator factor region cluster variational region generator base region region region region region graph construct region graph factor graph mdl region graph rg region graph depth 0 base region region compute base region mdl these region base region these region empty debug depth 0 region + collection util dump these region overlap compute overlap these region add edge overlap rg these region overlap these region overlap depth++ rg compute inference cache logger info cluster variational region generator region +rg size + edge +rg num edge rg compute overlap region overlap iterator it1 region iterator it1 next region r1 region it1 next iterator it2 region iterator it2 next region r2 region it2 next r1 r2 collection intersection collection util intersection r1 var r2 var intersection empty subsume overlap intersection collection ptl collection util intersection r1 factor r2 factor variable var variable intersection variable intersection size factor ptl factor ptl factor ptl size region r region var ptl overlap add r we can still subsume region small region first iterator overlap iterator next region region region next region overlap sub next index overlap size subsume region region var overlap region region contain variable var subsume region collection var iterator region iterator next region region region next region var contain var add edge overlap region graph rg iterator iterator next region region next iterator iterator next region region next var contain var rg add computing base region subsume region region iterator region iterator next region region region next iterator it2 region iterator it2 next region r2 region it2 next r2 region r2 var size region var size r2 var contain region var add factor factor graph mdl region iterator region iterator next region region region next iterator p mdl factor iterator p next factor ptl factor p next region var contain ptl var region factor add ptl base region top level region cluster variational mdl undirect model region region subsume another compute base region factor graph mdl region top level region consist single factor node model pairwise equivalent bethe energy factor region base region compute base region factor graph mdl region mdl factor size iterator mdl factor iterator next factor ptl factor next region add region ptl subsume region region add factor mdl region region grid2x2 region base region compute base region factor graph mdl region undirect grid grid undirect grid mdl 0 grid get width 1 x++ y 0 y grid get height 1 y++ variable var variable grid get y grid get y+1 grid get x+1 y+1 grid get x+1 y region add region var factor 0 add factor mdl region region 