2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e classify constraint pr gnu trove t hash map type feature vector expectation constraint posterior regularization p r penaliz l 2^2 difference target gregory druck max ent l2 f l p r constraint max ent f l p r constraint t hash map constraint index normalize max ent l2 f l p r constraint num feature num label value normalize num feature num label value constraint index t hash map normalize normalize override add constraint fi ex weight constraint put fi max ent l2 f l p r constraint ex weight constraint index put fi constraint index size max ent l2 f l p r constraint max ent f l p r constraint max ent l2 f l p r constraint target weight target weight num dimension constraint size num label get auxiliary value value 0 fi constraint key ci constraint index get fi 0 num label li++ ci + constraint size target dot value + constraint get fi target regularization value 2 constraint get fi weight value get gradient gradient fi constraint key ci constraint index get fi norm normalize norm constraint get fi count norm 1 0 num label li++ ci + constraint size gradient ci + constraint size constraint get fi target constraint get fi expectation norm regularization gradient ci + constraint size constraint get fi weight get complete value value 0 fi constraint key norm normalize norm constraint get fi count norm 1 0 num label li++ value constraint get fi weight math pow constraint get fi target constraint get fi expectation norm 2 2 value get score feature vector input label score 0 0 index cache size i++ ci constraint index get index cache get quick ci + label constraint size norm normalize norm constraint get index cache get quick count norm 1 value score + value cache get quick norm score + norm score 