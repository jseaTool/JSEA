2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e classify logging logger classify constraint pr max ent p r constraint optimize optimizable type feature vector type instance type instance type matrix ops logger math optimizable training auxiliary model q e step projection p r training gregory druck gdruck gdruck p r aux classifier optimizable optimizable gradient value logger logger logger get logger p r aux classifier optimizable get name cache stale num cache value cache gradient base dist p r aux classifier classifier max ent p r constraint constraint instance training p r aux classifier optimizable instance training base p r aux classifier classifier training training base dist base classifier classifier classifier get constraint classifier get constraint feature num 0 0 length i++ num + length cache value n e g t v e n f n t y cache gradient num cache stale get num num get buffer start 0 0 length i++ arraycopy 0 buffer start length start + length get parameter index start 0 0 length i++ start length start start length runtime index + bound start 0 0 length i++ arraycopy start 0 length start + length cache stale parameter index value start 0 0 length i++ start length start value start length cache stale get value gradient gradient fill gradient 0 classifier zero expectation num label training get target alphabet size value 0 sum log p 0 0 training size ii++ score num label instance instance training get feature vector input feature vector instance get instance weight training get instance weight classifier get classification score instance score log z n e g t v e n f n t y 0 num label li++ base dist base dist 0 score n e g t v e n f n t y base dist log p math log base dist score + log p log z math sum log prob log z score na n log z value instance weight log z na n value logger warning instance + instance get name + na n value infinite value logger warning instance + instance get name + infinite value skip value gradient normalize matrix ops normalize score increment expectation max ent p r constraint constraint constraint constraint increment expectation input score 1 ci 0 start 0 max ent p r constraint constraint constraint temp ci length value + constraint get auxiliary value ci constraint get gradient ci temp arraycopy temp 0 gradient start temp length start + temp length ci++ logger info p r auxiliary value + value value get value cache stale cache value get value gradient cache gradient cache stale cache value get value gradient gradient cache stale cache value get value gradient cache gradient cache stale arraycopy cache gradient 0 gradient 0 gradient length 