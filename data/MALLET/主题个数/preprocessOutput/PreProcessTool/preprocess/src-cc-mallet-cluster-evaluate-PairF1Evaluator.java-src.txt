cluster evaluate cluster clustering evaluate two clustering pairwise comparison pair instance compute positive negative classification determine pair same cluster aron culotta culotta degas 1 0 since 1 0 see clustering evaluator pair f1 evaluator clustering evaluator tp total fn total fp total pair f1 evaluator tp total fn total fp total 0 evaluate clustering truth clustering predict val get evaluation score truth predict pr + val 0 + re + val 1 + f1 + val 2 evaluate total pr total tp total tp total+fp total rec total tp total tp total+fn total f1 total 2 pr total rec total pr total+rec total pr + pr total + re + rec total + f1 + f1 total override get evaluation score clustering truth clustering predict tp fn fp tp fn fp 0 0 predict get num cluster i++ pr index predict get index label j 0 j pr index length j++ k j + 1 k pr index length k++ truth get label pr index j truth get label pr index k tp++ fp++ 0 truth get num cluster i++ index truth get index label j 0 j index length j++ k j + 1 k index length k++ predict get label index j predict get label index k fn++ pr tp tp+fp rec tp tp+fn f1 2 pr rec pr+rec tp total + tp fp total + fp fn total + fn pr rec f1 