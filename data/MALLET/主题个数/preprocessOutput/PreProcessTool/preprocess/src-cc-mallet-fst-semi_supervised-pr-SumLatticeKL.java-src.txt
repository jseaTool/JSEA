2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e semi supervise pr sum lattice transducer transducer transducer transition iterator type label vector type lattice m step m projection p r kedar bellare gregory druck sum lattice k l sum lattice ip input position op output position index transducer t total weight lattice length xi input sum lattice k l output alphabet label vector position output indicate probability over possible output index sum lattice k l transducer tran input init prob prob xi cache dot transducer incrementor incrementor xi need transition probability initialize some structure t tran input input lattice length input size + 1 num t num xi xi total weight 0 increment 0 num i++ t get get weight transducer m p o l e w e g h t init prob total weight + init prob t get get weight incrementor incrementor increment t get init prob ip 0 ip lattice length 1 ip++ 0 num i++ t get transition iterator it transition iterator input ip it next destination it next weight it get weight p xi ip destination get index total weight + p weight cache dot cache dot ip destination get index weight incrementor gather constraint probability q incrementor increment transition it p 0 num i++ t get get weight transducer m p o l e w e g h t prob total weight + prob t get get weight incrementor incrementor increment t get prob total weight transducer m p o l e w e g h t total weight + total weight get xi xi get gamma unsupport operation handle get total weight na n total weight total weight get gamma weight input position unsupport operation handle get gamma weight input position index unsupport operation handle get gamma probability input position unsupport operation handle get gamma probability input position index unsupport operation handle get xi probability ip s1 s2 unsupport operation handle get xi weight ip s1 s2 unsupport operation handle length lattice length get alpha ip unsupport operation handle get beta ip unsupport operation handle label vector get label position output position transducer get transducer t get input input 