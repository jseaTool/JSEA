2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e semi supervise pr io serializable concurrent callable concurrent execution concurrent executor concurrent future concurrent thread pool executor logging logger r f transducer optimize optimizable gradient value type instance type instance type matrix ops type logger m step m projection p r kedar bellare gregory druck r f optimizable k l serializable gradient value logger logger logger get logger r f optimizable k l get name serial u 1 l cache value weight stamp cache gradient weight stamp num num thread weight gaussian prior variance 1 0 cache value 123456789 cache gradient prob prob transition prob instance training r f crf r f factor constraint expectation thread pool executor executor p r auxiliary model aux model r f optimizable k l r f crf instance training p r auxiliary model aux model cache dot num thread weight crf crf training training num crf get get num factor cache gradient num cache value weight stamp 1 cache gradient weight stamp 1 weight 0 weight weight gather constraint aux model cache dot num thread num thread executor thread pool executor executor fix thread pool num thread probability weight prob weight length 0 weight length i++ prob math weight t o o shouldn t matrix ops normalize prob prob probability weight 0 weight length i++ j 0 j weight length j++ k 0 k weight j length k++ weight j k math weight j k suppres warning uncheck gather constraint p r auxiliary model aux model cache dot prob prob transition prob constraint r f factor crf get expectation r f factor crf get constraint zero 0 training size ii++ instance inst training get input inst get sum lattice p r ge latt sum lattice p r crf input aux model cache dot gamma ge latt get gamma prob probability gamma 0 prob add prob prob probability gamma gamma length 1 prob add prob transition prob ge latt get xi probability transition prob transition prob add transition prob sum lattice k l crf input prob prob transition prob constraint incrementor suppres warning uncheck get expectation value expectation zero updating task callable task callable increment training size num thread start 0 increment task index 0 task index num thread task index++ same structure zero value r f factor ex r f factor expectation task add expectation task start ex start task index num thread 2 training size start + increment value 0 future result executor task compute value future f result value + f get execution ee ee print stack trace interrupt ie ie print stack trace combine result callable task task expectation plus equal expectation task task get expectation 1 value get value crf get weight value change stamp cache value weight stamp cache value weight stamp crf get weight value change stamp starting current milli cache value get expectation value incorporate prior prior value crf get gaussian prior gaussian prior variance cache value + prior value logger info gaussian prior + prior value cache value weight na n cache value || infinite cache value label likelihood na n infinite logger info get value loglikelihood optimizable kl div + cache value ending current milli logger fine inference millisecond + ending starting cache value get value gradient buffer cache gradient weight stamp crf get weight value change stamp cache gradient weight stamp crf get weight value change stamp get value expectation plus equal constraint 1 0 expectation plus equal gaussian prior gradient crf get gaussian prior variance expectation na n infinite expectation get cache gradient matrix ops time equal cache gradient weight arraycopy cache gradient 0 buffer 0 cache gradient length get num num get buffer crf get get buffer get parameter index crf get get parameter index buff crf get buff crf weight value change parameter index value crf get parameter index value crf weight value change gaussian prior variance value gaussian prior variance value shutdown executor shutdown expectation task callable start r f factor expectation expectation task start r f factor ex start start expectation ex r f factor get expectation expectation call value 0 start ii++ instance inst training get input inst get init prob prob get prob prob get tran prob transition prob get cache dot input size crf num crf num j 0 j input size j++ k 0 k crf num k++ l 0 l crf num l++ cache dot j k l transducer m p o l e w e g h t label weight sum lattice k l crf input init prob prob tran prob cache dot get total weight value + label weight unlabel weight sum lattice crf input expectation incrementor get total weight unlabel weight sum lattice cache dot crf input cache dot expectation incrementor get total weight value unlabel weight value 