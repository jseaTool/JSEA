pipe io type regex pipe lowercase remove xml entity apo lt replace punctuation character whitespace up whitespace applie n gram replacement deletion replacement apply they specify first n gram preprocessor pipe serializable replacement replacement set n gram preprocessor replacement set replacement load replacement filename o buffer reader buffer reader reader filename replacement replacement total replacement 0 line line read line add replacement replacement line total replacements++ close replacement set add total replacement load deletion filename o buffer reader buffer reader reader filename replacement replacement total replacement 0 line line read line add replacement replacement line total replacements++ close replacement set add total replacement instance pipe instance instance input instance get input input lower input xml entity input input replace apo input input replace \ input input replace input input replace lt letter character dash apostrophe input input replace ^\\p l \\p n \\ \\ reduce block whitespace single space input input replace \\s+ replacement replacement set input replacement input input instance input instance serial u 1 u r r e n t e r l v e r o n 1 write output stream o write u r r e n t e r l v e r o n write replacement set read input stream o found read replacement set replacement read replacement serializable hash map replacement replacement index replacement replacement index hash map replacement add replacement replacement replacement key replacement get first replacement index contain key key replacement index put key replacement replacement index get key add replacement replacement input input split builder output builder position 0 position length position position position replacement index contain key replacement replacement replacement index get position replacement position output position position position position replacement be nothing be output output append + position ++ output serial u 1 u r r e n t e r l v e r o n 1 write output stream o write u r r e n t e r l v e r o n write replacement index read input stream o found read replacement index hash map replacement read 