2005 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e topic logging zip io format topic type gnu trove parametric topic model us minimal path assumption reduce bookkeeping david mimno n p topic model serializable logger logger logger get logger n p topic model get name training instance topic assignment topic assignment alphabet input alphabet alphabet alphabet topic label alphabet topic alphabet large topic see far max topic current topic num topic size vocabulary num type prior alpha gamma beta prior topic multinomial over word beta sum e f u l t e t 0 01 statistic sampling t hash map type topic count index feature index topic index t hash map topic index topic index document contain least topic t hash map doc topic total doc topic 0 show topic interval 50 word topic 10 random random format formatt print log likelihood alpha parameter balance local document topic count global over topic gamma parameter weight completely nev see topic global beta parameter control variability topic word distribution n p topic model alpha gamma beta topic assignment topic alphabet alphabet factory label alphabet size 1 alpha alpha gamma gamma beta beta random random topic t hash map doc topic t hash map formatt format get instance formatt maximum fraction digit 5 logger info parametric l topic interval n show topic interval interval word topic n random seed seed random random seed add instance instance training topic alphabet training get alphabet num type alphabet size beta sum beta num type type topic count t hash map num type type 0 type num type type++ type topic count type t hash map num topic topic doc 0 instance instance training doc++ t hash map topic count t hash map feature feature instance get label topic label topic alphabet size topic topic get feature position 0 position size position++ topic random next num topic topic adjust put value topic 1 1 topic position topic keep track doc least topic topic count contain key topic doc topic adjust put value topic 1 1 total doc topics++ topic count put topic 1 topic count adjust value topic 1 type get index position position type topic count type adjust put value topic 1 1 topic assignment t topic assignment instance topic add t max topic num topic 1 sample iteration o iteration 1 iteration iteration iteration++ iteration start current milli loop over document corpus doc 0 doc size doc++ feature feature get doc instance get label topic label get doc topic sample topic doc topic elapse milli current milli iteration start logger info iteration + + elapse milli + m + num topic occasionally print information show topic interval 0 iteration % show topic interval 0 logger info + iteration + topic + num topic + + top word word topic sample topic doc feature feature topic topic topic get feature t hash map current type topic count type old topic topic topic weight sum doc length get length t hash map local topic count t hash map populate topic count position 0 position doc length position++ local topic count adjust put value topic position 1 1 score sum topic term score num topic + 1 store topic currently topic doc topic key iterate over position word document position 0 position doc length position++ type get index position position old topic topic position grab relevant row our two dimensional current type topic count type topic count type count current count local topic count get old topic topic doc? current count 1 local topic count old topic doc topic? doc count doc topic get old topic doc count 1 very last topic get old topic 1 get rid topic doc topic old topic total doc topic topic old topic num topic topic doc topic key topic term score num topic + 1 last doc topic still doc topic adjust value old topic 1 total doc topic topic adjust value old topic 1 there least doc topic local topic count adjust value old topic 1 topic adjust value old topic 1 current type topic count get old topic 1 current type topic count old topic current type topic count adjust value old topic 1 now calculate add up score topic word sum 0 0 first topic currently 0 num topic i++ topic topic topic term score local topic count get topic + alpha doc topic get topic total doc topic + gamma current type topic count get topic + beta topic get topic + beta sum sum + topic term score add weight topic topic term score num topic alpha gamma num type total doc topic + gamma sum + topic term score num topic random point between 0 sum topic score sample random next uniform sum figure topic contain point topic 1 1 sample 0 0 i++ sample topic term score num topic topic topic topic position topic current type topic count adjust put value topic 1 1 topic adjust value topic 1 local topic count contain key topic local topic count adjust value topic 1 topic doc local topic count put topic 1 doc topic adjust value topic 1 total doc topics++ completely topic first generate topic max topic + 1 max topic topic num topics++ topic position topic local topic count put topic 1 doc topic put topic 1 total doc topics++ current type topic count put topic 1 topic put topic 1 topic doc topic key topic term score num topic + 1 display saving result top word num word builder output builder sorter sort word sorter num type topic doc topic key type 0 type num type type++ sort word type sorter type type topic count type get topic sort sort word output append topic + + topic get topic + 0 num word i++ sort word get weight 1 0 output append alphabet lookup sort word get + output append output print f o print stream print stream g z p output stream buffer output stream output stream f print close print print stream doc po typeindex type topic doc 0 doc size doc++ feature feature get doc instance get label topic label get doc topic n get doc instance get get doc instance get position 0 position topic get length position++ type get index position position topic topic get index position position print doc print print print print position print print type print print alphabet lookup type print print topic o instance training instance load 0 num topic length 1 ? parse 1 200 n p topic model lda n p topic model 5 0 10 0 0 1 lda add instance training num topic lda sample 1000 