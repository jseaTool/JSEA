2005 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e topic tree iterator formatt locale concurrent logging zip io format type topic topic assignment random logger simple parallel thread l newman asuncion smyth well algorithm topic model j m l r 2009 sparse l sampling scheme structure yao mimno mc callum efficient topic model inference streaming document collection k 2009 david mimno mc callum parallel topic model serializable u n g n e t o p 1 logger logger logger get logger parallel topic model get name topic assignment training instance topic assignment alphabet alphabet alphabet input label alphabet topic alphabet alphabet topic num topic topic fit these value encode type topic count count topic pair single topic mask topic bit num type total alpha dirichlet alpha alpha over topic alpha sum beta prior topic multinomial over word beta sum symmetric alpha e f u l t e t 0 01 type topic count index feature index topic index topic index topic index dirichlet estimation doc length count histogram document size topic doc count histogram document topic count index topic index position index num iteration 1000 burnin 200 save sample interval 10 optimize interval 50 tempering interval 0 show topic interval 50 word topic 7 save interval 0 filename save model interval 0 model filename random seed 1 format formatt print log likelihood time type appear corpus type total max over type total beta optimization max type count num thread 1 parallel topic model topic topic topic e f u l t e t parallel topic model topic alpha sum beta label alphabet topic alpha sum beta label alphabet label alphabet num topic label alphabet ret label alphabet 0 num topic i++ ret lookup index topic +i ret parallel topic model label alphabet topic alphabet alpha sum beta topic assignment topic alphabet topic alphabet alpha sum alpha sum beta beta num topic topic alphabet size formatt format get instance formatt maximum fraction digit 5 logger info l + num topic + topic + topic bit + topic bit + binary topic mask + topic mask alphabet get alphabet alphabet label alphabet get topic alphabet topic alphabet get num topic num topic reset topic change topic assignment initialize restore previously save num topic num topic num topic num topic bit count num topic 1 exact power 2 topic mask num topic 1 topic bit bit count topic mask add extra bit topic mask high bit num topic 2 1 topic bit bit count topic mask alpha num topic fill alpha alpha sum num topic topic num topic topic assignment get get type topic count type topic count get topic topic num iteration num iteration num iteration num iteration burnin burnin burnin burnin topic interval n show topic interval interval word topic n random seed seed random seed seed interval optimize dirichlet hyperparameter optimize interval interval optimize interval interval sure we least sample optimize hyperparameter save sample interval optimize interval save sample interval optimize interval symmetric alpha symmetric alpha tempering interval interval tempering interval interval num thread thread num thread thread define often save representation current g zip interval save interval iteration filename save iteration suffix save interval filename save interval interval filename filename define often save serialize model interval save serialize model interval iteration filename save iteration suffix save serialize model interval filename save model interval interval model filename filename add instance instance training alphabet training get alphabet num type alphabet size beta sum beta num type random random random seed 1 random random random random random seed instance instance training feature feature instance get label topic label topic alphabet size topic topic get feature position 0 position topic length position++ topic random next num topic topic position topic topic assignment t topic assignment instance topic add t build type topic count initialize histogram initialize o line field buffer reader reader buffer reader input stream reader g z p input stream input stream line reader read line skip some line starting describe format specify hyperparameter line start line start alpha line line replace alpha field line split num topic field length alpha sum 0 0 topic 0 topic field length topic++ alpha topic parse field topic alpha sum + alpha topic line start beta line line replace beta beta parse line beta sum beta num type line reader read line field line split topic assignment document feature feature document instance get feature topic feature document topic topic topic get feature position 0 position size position++ type get index position position type parse field 3 topic position parse field 5 err instance match + line illegal line reader read line line field line split build type topic count initialize histogram build type topic count type topic count num type topic num topic get total occurrence word type type total num type type total num type type topic count structure topic assignment document feature feature document instance get position 0 position get length position++ type get index position position type total type ++ max type count 0 allocate enough space we nev worry about overflow topic time type occur type 0 type num type type++ type total type max type count max type count type total type type topic count type math min num topic type total type topic assignment document feature feature document instance get feature topic feature document topic topic topic get feature position 0 position size position++ topic topic position topic u n g n e t o p topic topic ++ format these topic rightmost bit count remain left bit since count high bit sorting desc numeric value guarantee high count lower count type get index position position current type topic count type topic count type start assume empty sort descend here we add count we find location topic we need ensure large left neighbor index 0 current topic current type topic count index topic mask current value current type topic count index 0 current topic topic index++ index current type topic count length logger info overflow type + type current topic current type topic count index topic mask current value current type topic count index topic bit current value 0 value 1 we t worry about sorting topic suffix doesn t matter current type topic count index 1 topic bit + topic current type topic count index current value + 1 topic bit + topic now ensure still sort bubble value up index 0 current type topic count index current type topic count index 1 temp current type topic count index current type topic count index current type topic count index 1 current type topic count index 1 temp index sum type topic count worker runnable runnable clear topic total fill topic 0 clear type topic count looking entry first 0 entry type 0 type num type type++ target count type topic count type position 0 position target count length target count position 0 target count position 0 position++ thread 0 thread num thread thread++ handle total topic total runnable thread get topic topic 0 topic num topic topic++ topic topic + total topic now handle individual type topic count type topic count runnable thread get type topic count type 0 type num type type++ here individual thread count target global count count type topic count type target count type topic count type index 0 index count length count index 0 topic count index topic mask count count index topic bit target index 0 current topic target count target index topic mask current count target count target index 0 current topic topic target index++ target index target count length logger info overflow merging type + type current topic target count target index topic mask current count target count target index topic bit target count target index current count + count topic bit + topic now ensure still sort bubble value up target index 0 target count target index target count target index 1 temp target count target index target count target index target count target index 1 target count target index 1 temp target index index++ debuggg ensure count being reconstruct correctly type 0 type num type type++ target count type topic count type index 0 count 0 index target count length target count index 0 count + target count index topic bit index++ count type total type err expect + type total type + found + count gather statistic size document histogram dirichlet hyperparamet optimization initialize histogram max 0 total 0 seq len doc 0 doc size doc++ feature f feature get doc instance get seq len f get length seq len max max seq len total + seq len logger info max + max logger info total + total doc length count max + 1 topic doc count num topic max + 1 optimize alpha worker runnable runnable first clear statistic histogram fill doc length count 0 topic 0 topic topic doc count length topic++ fill topic doc count topic 0 thread 0 thread num thread thread++ length count runnable thread get doc length count topic count runnable thread get topic doc count count 0 count length count length count++ length count count 0 doc length count count + length count count length count count 0 topic 0 topic num topic topic++ symmetric alpha count 0 count topic count topic length count++ topic count topic count 0 topic doc count topic count + topic count topic count topic count topic count 0 symmetric we need count m putting same structure topic 0 topic histogram empty m duplicate loop isn t best thing check we symmetric num topic time instead num topic document length count 0 count topic count topic length count++ topic count topic count 0 topic doc count 0 count + topic count topic count ^ change topic count topic count 0 symmetric alpha alpha sum dirichlet learn symmetric concentration topic doc count 0 doc length count num topic alpha sum topic 0 topic num topic topic++ alpha topic alpha sum num topic alpha sum dirichlet learn alpha topic doc count doc length count 1 001 1 0 1 runtime e dirichlet optimization become unstable know happen very small corpus 5 doc logger warning dirichlet optimization become unstable reset alpha t 1 0 alpha sum num topic topic 0 topic num topic topic++ alpha topic 1 0 temper alpha worker runnable runnable first clear statistic histogram fill doc length count 0 topic 0 topic topic doc count length topic++ fill topic doc count topic 0 thread 0 thread num thread thread++ length count runnable thread get doc length count topic count runnable thread get topic doc count count 0 count length count length count++ length count count 0 length count count 0 topic 0 topic num topic topic++ count 0 count topic count topic length count++ topic count topic count 0 topic count topic count 0 topic 0 topic num topic topic++ alpha topic 1 0 alpha sum num topic optimize beta worker runnable runnable histogram start count 0 most frequent type be assign topic we need store max type count + 1 count count histogram max type count + 1 now count type topic pair index type 0 type num type type++ count type topic count type index 0 index count length count index 0 count count index topic bit count histogram count ++ index++ figure large we need observation length histogram max topic size 0 topic 0 topic num topic topic++ topic topic max topic size max topic size topic topic now allocate populate topic size histogram max topic size + 1 topic 0 topic num topic topic++ topic size histogram topic topic ++ beta sum dirichlet learn symmetric concentration count histogram topic size histogram num type beta sum beta beta sum num type logger info beta + formatt format beta + now value thread 0 thread num thread thread++ runnable thread reset beta beta beta sum estimate o start current milli worker runnable runnable worker runnable num thread doc thread size num thread offset 0 num thread 1 thread 0 thread num thread thread++ runnable total num topic arraycopy topic 0 runnable total 0 num topic runnable count num type type 0 type num type type++ count type topic count type length arraycopy type topic count type 0 count 0 count length runnable count type count some doc miss due division thread num thread 1 doc thread size offset random random random seed 1 random random random random random seed runnable thread worker runnable num topic alpha alpha sum beta random runnable count runnable total offset doc thread runnable thread initialize alpha statistic doc length count length offset + doc thread there thread type topic count directly rath allocate memory random random random seed 1 random random random random random seed runnable 0 worker runnable num topic alpha alpha sum beta random type topic count topic offset doc thread runnable 0 initialize alpha statistic doc length count length there thread we can communication overhead thread gather statistic portion runnable 0 thread executor service executor executor fix thread pool num thread iteration 1 iteration num iteration iteration++ iteration start current milli show topic interval 0 iteration 0 iteration % show topic interval 0 logger info + top word word topic save interval 0 iteration % save interval 0 print filename + + iteration save model interval 0 iteration % save model interval 0 write model filename + + iteration num thread 1 submit runnable thread pool thread 0 thread num thread thread++ iteration burnin optimize interval 0 iteration % save sample interval 0 runnable thread collect alpha statistic logger fine submit thread + thread executor submit runnable thread runnable thread run m getting some problem look thread hasn t start yet first poll appear finish occur very corpus thread sleep 20 interrupt e finish finish thread sleep 10 interrupt e finish thread done? thread 0 thread num thread thread++ logger info thread + thread + done? + runnable thread finish finish finish runnable thread finish print + current milli iteration start + sum type topic count runnable print + current milli iteration start + thread 0 thread num thread thread++ runnable total runnable thread get topic arraycopy topic 0 runnable total 0 num topic runnable count runnable thread get type topic count type 0 type num type type++ target count runnable count type count type topic count type index 0 index count length count index 0 target count index count index target count index 0 target count index 0 index++ arraycopy type topic count type 0 count 0 count length iteration burnin optimize interval 0 iteration % save sample interval 0 runnable 0 collect alpha statistic runnable 0 run elapse milli current milli iteration start elapse milli 1000 logger fine elapse milli + m logger fine elapse milli 1000 + iteration burnin optimize interval 0 iteration % optimize interval 0 optimize alpha runnable optimize beta runnable logger fine o + current milli iteration start + iteration % 10 0 print log likelihood logger info + iteration + l l + formatt format model log likelihood total logger info + iteration + executor shutdown now second math round current milli start 1000 0 minute second 60 second % 60 hour minute 60 minute % 60 day hour 24 hour % 24 builder report builder report append total day 0 report append day report append day hour 0 report append hour report append hour minute 0 report append minute report append minute report append second report append second logger info report iterate conditional mode equivalent gibbs sampling replacing sampling conditional taking maximum topic tend converge small iteration model reach good gibbs sampling maximize iteration iteration 0 total change m v l u e topic coefficient num topic current topic current value iteration iteration total change 0 iteration start current milli total change 0 loop over document corpus doc 0 doc size doc++ feature feature get doc instance get label topic label get doc topic doc topic topic get feature current type topic count type old topic topic doc length get length local topic count num topic populate topic count position 0 position doc length position++ local topic count doc topic position ++ global max topic 0 global max score 0 0 topic 0 topic num topic topic++ topic coefficient topic alpha topic + local topic count topic beta sum + topic topic beta topic coefficient topic global max score global max topic topic global max score beta topic coefficient topic score max score topic term score num topic iterate over position word document position 0 position doc length position++ type get index position position old topic doc topic position grab relevant row our two dimensional current type topic count type topic count type count local topic count old topic topic old topic recalculate word invariant part topic coefficient old topic alpha old topic + local topic count old topic beta sum + topic old topic topic we just decrement previou max topic search max topic old topic global max topic global max score beta topic coefficient old topic topic 0 topic num topic topic++ beta topic coefficient topic global max score global max topic topic global max score beta topic coefficient topic topic global max topic max score global max score topic old topic 0 old topic + old topic + below 0 index 0 already decrement index current type topic count length current type topic count index 0 current topic current type topic count index topic mask current value current type topic count index topic bit already decrement current topic old topic we re decrement add up sampling weight same decrement require u reorder topic we re here look cell again current value current value 0 current type topic count index 0 current type topic count index current value topic bit + old topic shift reduce value sub index index sub index current type topic count length 1 current type topic count sub index current type topic count sub index + 1 temp current type topic count sub index current type topic count sub index current type topic count sub index + 1 current type topic count sub index + 1 temp sub index++ already decrement score topic coefficient current topic beta + current value score max score topic current topic max score score index++ put topic into count doc topic position topic local topic count topic ++ topic topic ++ index 0 found topic found topic index current type topic count length current topic current type topic count index topic mask current value current type topic count index topic bit current topic topic current type topic count index current value + 1 topic bit + topic index 0 current type topic count index current type topic count index 1 temp current type topic count index current type topic count index current type topic count index 1 current type topic count index 1 temp found topic current value 0 current type topic count index 1 topic bit + topic found topic index++ topic coefficient topic alpha topic + local topic count topic beta sum + topic topic beta topic coefficient topic global max score global max score beta topic coefficient topic global max topic topic topic old topic total change++ elapse milli current milli iteration start logger info iteration + + elapse milli + m + total change + + model log likelihood total iteration++ sort set topic contain sorter key into alphabet get access get top word tree sorter get sort word tree sorter topic sort word tree sorter num topic initialize tree set topic 0 topic num topic topic++ topic sort word add tree sorter collect count type 0 type num type type++ topic count type topic count type index 0 index topic count length topic count index 0 topic topic count index topic mask count topic count index topic bit topic sort word get topic add sorter type count index++ topic sort word element topic word most probable word topic descend these probably num word maximum length topic word les get top word num word tree sorter topic sort word get sort word num topic topic 0 topic num topic topic++ tree sorter sort word topic sort word get topic many word we report? some topic few word zero weight limit num word sort word size num word limit sort word size topic limit iterator sorter iterator sort word iterator 0 limit i++ sorter info iterator next topic alphabet lookup info get print top word num word line o print stream print stream print top word num word line close print top word print stream num word line print top word num word line top word num word line builder builder tree sorter topic sort word get sort word print result topic topic 0 topic num topic topic++ tree sorter sort word topic sort word get topic word 0 iterator sorter iterator sort word iterator line append topic + + formatt format alpha topic + iterator next word num word sorter info iterator next append alphabet lookup info get + + formatt format info get weight + word++ append topic + + formatt format alpha topic + iterator next word num word sorter info iterator next append alphabet lookup info get + word++ append topic xml report print writer num word tree sorter topic sort word get sort word ?xml 1 0 ? topic model topic 0 topic num topic topic++ topic + topic + alpha + alpha topic + total + topic topic + rank 1 iterator sorter iterator topic sort word get topic iterator iterator next rank num word sorter info iterator next word rank + rank + count + info get weight + + alphabet lookup info get + word rank++ topic topic model topic phrase xml report print writer num word num topic get num topic gnu trove t hash map phrase gnu trove t hash map num topic alphabet alphabet get alphabet get count phrase ti 0 ti num topic ti++ phrase ti gnu trove t hash map di 0 di get size di++ topic assignment t get get di instance instance t instance feature fv feature instance get bigram fv feature bigram bigram prevtopic 1 prevfeature 1 topic 1 buffer sb feature 1 doclen fv size pi 0 pi doclen pi++ feature fv get index position pi topic get get di topic get index position pi topic prevtopic bigram || feature bigram fv get bi index position pi 1 sb sb buffer alphabet lookup prevfeature + + alphabet lookup feature sb append sb append alphabet lookup feature sb sb sb logger info phrase +sb phrase prevtopic get sb 0 phrase prevtopic put sb 0 phrase prevtopic increment sb prevtopic prevfeature 1 sb prevtopic topic prevfeature feature phrase now fill count now start printing xml ?xml 1 0 ? topic tree sorter topic sort word get sort word prob alphabet size ti 0 ti num topic ti++ print topic \ + ti + \ alpha \ + alpha ti + \ total \ + topic ti + \ gathering term phrase output temporarily we can get topic information printing output stream bout output stream print stream pout print stream bout holding candidate topic title augmentable feature vector title augmentable feature vector alphabet print word word 0 iterator sorter iterator topic sort word get ti iterator iterator next word num word sorter info iterator next pout word weight \ + info get weight topic ti + \ count \ + math round info get weight + \ + alphabet lookup info get + word word++ word 20 consider top 20 individual word candidate title title add alphabet lookup info get info get weight type 0 type alphabet size type++ prob type get count feature topic type ti get count topic ti rank feature vector rfv rank feature vector alphabet prob ri 0 ri num word ri++ fi rfv get index rank ri pout term weight \ +prob fi + \ count \ +thi get count feature topic fi ti + \ +alphabet lookup fi + term ri 20 consider top 20 individual word candidate title title add alphabet lookup fi get count feature topic fi ti print phrase key phrase ti key value phrase ti get value count key length 0 count length i++ count value countssum matrix ops sum count alphabet alph alphabet key rank feature vector rfv rank feature vector alph count max rfv num location num word ? rfv num location num word ri 0 ri max ri++ fi rfv get index rank ri pout phrase weight \ +count fi countssum+ \ count \ +value fi + \ +alph lookup fi + phrase phrase count les 20 simply unreliable ri 20 value fi 20 title add alph lookup fi 100 value fi prefer phrase factor 100 select candidate title buffer title buffer buffer rfv rank feature vector title get alphabet title num title 10 ri 0 ri num title ri rfv num location ri++ t add redundant title title buffer index rfv get rank ri 1 title buffer append rfv get rank ri ri num title 1 title buffer append num titles++ title \ + title buffer + \ print bout topic topic write internal representation type topic count count topic pair descend count print type topic count o print writer print writer writer type 0 type num type type++ builder buffer builder buffer append type + + alphabet lookup type topic count type topic count type index 0 index topic count length topic count index 0 topic topic count index topic mask count topic count index topic bit buffer append + topic + + count index++ buffer close print topic word weight o print writer print writer writer print topic word weight close print unnormaliz weight word topic most these equal smooth parameter beta print topic word weight print writer o probably most efficient topic 0 topic num topic topic++ type 0 type num type type++ topic count type topic count type weight beta index 0 index topic count length topic count index 0 current topic topic count index topic mask current topic topic weight + topic count index topic bit index++ topic + + alphabet lookup type + + weight get smooth over topic training instance get topic probability instance label topic get instance topic get topic probability topic get smooth over topic topic training instance topic assign inferenc get topic probability label topic topic num topic loop over document counting current topic assignment position 0 position topic get length position++ topic topic get index position position ++ add smooth normalize sum 0 0 topic 0 topic num topic topic++ topic topic + alpha topic sum + topic topic normalize topic 0 topic num topic topic++ topic topic sum topic print document topic o print writer print writer writer print document topic close print dense document topic print writer doc len topic count num topic doc 0 doc size doc++ label topic label get doc topic current doc topic topic get feature builder builder builder builder append doc builder append get doc instance get name builder append get doc instance get name builder append name doc len current doc topic length count up 0 doc len token++ topic count current doc topic ++ normalize topic 0 topic num topic topic++ builder append + alpha topic + topic count topic doc len + alpha sum builder fill topic count 0 print document topic print writer print document topic 0 0 1 print writer threshold print topic proportion great max print many topic print document topic print writer threshold max print doc name topic proportion doc len topic count num topic sorter sort topic sorter num topic topic 0 topic num topic topic++ initialize sorter dummy value sort topic topic sorter topic topic max 0 || max num topic max num topic doc 0 doc size doc++ label topic label get doc topic current doc topic topic get feature builder builder builder builder append doc builder append get doc instance get name builder append get doc instance get name builder append name builder append doc len current doc topic length count up 0 doc len token++ topic count current doc topic ++ normalize topic 0 topic num topic topic++ sort topic topic topic alpha topic + topic count topic doc len + alpha sum sort sort topic 0 max i++ sort topic get weight threshold builder append sort topic get + + sort topic get weight + builder fill topic count 0 get sub corpus topic word document mask normalize smooth num topic num type sub corpus topic num topic doc 0 doc size doc++ document mask doc word feature get doc instance get get feature topic get doc topic get feature position 0 position topic length position++ topic position word position ++ sub corpus topic topic position ++ smooth topic 0 topic num topic topic++ type 0 type num type type++ topic type + beta normalize topic normalizer num topic smooth topic 0 topic num topic topic++ topic normalizer topic 1 0 sub corpus topic topic + num type beta topic 0 topic num topic topic++ topic normalizer topic 1 0 sub corpus topic topic topic 0 topic num topic topic++ type 0 type num type type++ topic type topic normalizer topic get topic word normalize smooth num topic num type type 0 type num type type++ topic count type topic count type index 0 index topic count length topic count index 0 topic topic count index topic mask count topic count index topic bit topic type + count index++ smooth topic 0 topic num topic topic++ type 0 type num type type++ topic type + beta normalize topic normalizer num topic smooth topic 0 topic num topic topic++ topic normalizer topic 1 0 topic topic + num type beta topic 0 topic num topic topic++ topic normalizer topic 1 0 topic topic topic 0 topic num topic topic++ type 0 type num type type++ topic type topic normalizer topic get document topic normalize smooth size num topic doc 0 doc size doc++ topic get doc topic get feature position 0 position topic length position++ doc topic position ++ smooth topic 0 topic num topic topic++ doc topic + alpha topic normalize sum 0 0 topic 0 topic num topic topic++ sum + doc topic normalizer 1 0 sum topic 0 topic num topic topic++ doc topic normalizer tree sorter get topic document smooth tree sorter topic sort document tree sorter num topic initialize tree set topic 0 topic num topic topic++ topic sort document add tree sorter topic count num topic doc 0 doc size doc++ topic get doc topic get feature position 0 position topic length position++ topic count topic position ++ topic 0 topic num topic topic++ topic sort document get topic add sorter doc topic count topic + smooth topic length + num topic smooth topic count topic 0 topic sort document print topic document print writer print topic document 100 print writer count print top document print topic document print writer max topic doc name proportion tree sorter topic sort document get topic document 10 0 topic 0 topic num topic topic++ tree sorter sort document topic sort document get topic 0 sorter sorter sort document max doc sorter get proportion sorter get weight name get doc instance get name name get doc instance get name name name name format %d %d % %f topic doc name proportion i++ print f o print stream print stream g z p output stream buffer output stream output stream f print close print print stream doc po typeindex type topic print alpha topic 0 topic num topic topic++ print alpha topic + beta + beta doc 0 doc size doc++ feature feature get doc instance get label topic label get doc topic n get doc instance get get doc instance get formatt output formatt builder locale u pi 0 pi topic get length pi++ type get index position pi topic topic get index position pi output format %d % %d %d % %d doc pi type alphabet lookup type topic print doc print print print print pi print print type print print alphabet lookup type print print topic print output model log likelihood log likelihood 0 0 zero topic likelihood model dirichlet multinomial word topic dirichlet multinomial topic document likelihood function dirichlet multinomial gamma sum alpha prod gamma alpha + n prod gamma alpha gamma sum alpha + n log likelihood log gamma sum alpha log gamma sum alpha + n + sum log gamma alpha + n log gamma alpha document first topic count num topic topic log gamma num topic doc topic topic 0 topic num topic topic++ topic log gamma topic dirichlet log gamma stirl alpha topic doc 0 doc size doc++ label topic label get doc topic doc topic topic get feature 0 doc topic length token++ topic count doc topic ++ topic 0 topic num topic topic++ topic count topic 0 log likelihood + dirichlet log gamma stirl alpha topic + topic count topic topic log gamma topic subtract count + parameter sum term log likelihood dirichlet log gamma stirl alpha sum + doc topic length fill topic count 0 add parameter sum term log likelihood + size dirichlet log gamma stirl alpha sum topic count type topic pair just log gamma beta log gamma beta zero type topic 0 type 0 type num type type++ reuse pointer topic count type topic count type index 0 index topic count length topic count index 0 topic topic count index topic mask count topic count index topic bit zero type topics++ log likelihood + dirichlet log gamma stirl beta + count na n log likelihood logger warning na n log likelihood calculation 0 infinite log likelihood logger warning infinite log likelihood 0 index++ topic 0 topic num topic topic++ log likelihood dirichlet log gamma stirl beta num type + topic topic na n log likelihood logger info na n topic + topic + + topic topic 0 infinite log likelihood logger info infinite value topic + topic + + topic topic 0 log gamma | v| beta topic log likelihood + dirichlet log gamma stirl beta num type num topic log gamma beta type topic pair zero count log likelihood dirichlet log gamma stirl beta zero type topic na n log likelihood logger info infinite log likelihood logger info infinite value beta + beta + + num type 0 log likelihood tool estimate topic distribution document topic inferenc get inferenc topic inferenc type topic count topic get 0 instance get alphabet alpha beta beta sum tool evaluate marginal probability document model marginal prob estimator get prob estimator marginal prob estimator num topic alpha alpha sum beta type topic count topic serialization serial u 1 u r r e n t e r l v e r o n 0 n u l l n t e g e r 1 write output stream o write u r r e n t e r l v e r o n write write alphabet write topic alphabet write num topic write topic mask write topic bit write num type write alpha write alpha sum write beta write beta sum write type topic count write topic write doc length count write topic doc count write num iteration write burnin write save sample interval write optimize interval write show topic interval write word topic write save interval write filename write save model interval write model filename write random seed write formatt write print log likelihood write num thread read input stream o found read topic assignment read alphabet alphabet read topic alphabet label alphabet read num topic read topic mask read topic bit read num type read alpha read alpha sum read beta read beta sum read type topic count read topic read doc length count read topic doc count read num iteration read burnin read save sample interval read optimize interval read show topic interval read word topic read save interval read filename read save model interval read model filename read random seed read formatt format read print log likelihood read num thread read write serialize model output stream oo output stream output stream serialize model oo write oo close o e err problem serialize parallel topic model + serialize model + + e parallel topic model read f parallel topic model topic model input stream ois input stream input stream f topic model parallel topic model ois read ois close topic model initialize histogram topic model instance training instance load 0 num topic length 1 ? parse 1 200 parallel topic model lda parallel topic model num topic 50 0 0 01 lda print log likelihood lda topic 50 7 lda add instance training lda num thread parse 2 lda estimate logger info printing lda print gz logger info finish printing e e print stack trace 