2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e classify constraint ge gnu trove t gnu trove t gnu trove t hash map bit type feature vector type instance type instance expectation constraint generalize expectation g e gregory druck max ent f l g e constraint max ent g e constraint value num label num feature map between input feature index constraint t hash map max ent f l g e constraint constraint cache constrain feature fire last feature vector preproces call t index cache t value cache max ent f l g e constraint num feature num label value num feature num feature num label num label value value constraint t hash map max ent f l g e constraint index cache t value cache t add constraint fi ex weight get composite constraint feature value feature vector input label value 0 0 index cache size i++ value value + constraint get index cache get quick get value label value cache get quick value + constraint get index cache get quick get value label value compute expectation feature vector input dist weight pre process input 0 num label li++ p weight dist 0 index cache size i++ value constraint get index cache get quick expectation + p value cache get quick constraint get index cache get quick expectation + p zero expectation fi constraint key constraint get fi expectation num label bit pre process instance count 0 fi feature vector fv bit bit bit size instance instance weight get instance weight instance fv feature vector instance get loc 0 loc fv num location loc++ fi fv index location loc constraint contain key fi value constraint get fi count + weight fv value location loc constraint get fi count + weight bit ii++ feature label regularization constraint contain key num feature bit constraint get num feature count + weight bit pre process feature vector input index cache reset quick value value cache reset quick fi cache constrain input feature loc 0 loc input num location loc++ fi input index location loc constraint contain key fi index cache add fi value value cache add input value location loc feature label regularization constraint contain key num feature index cache add num feature value value cache add 1 max ent f l g e constraint target expectation count weight max ent f l g e constraint target weight target target weight weight expectation count 0 get target target get expectation expectation get count count get weight weight get value 