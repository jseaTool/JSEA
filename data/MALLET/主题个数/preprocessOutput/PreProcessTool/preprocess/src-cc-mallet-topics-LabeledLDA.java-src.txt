topic logging zip io type pipe iterator instance iterator label l david mimno label l serializable logger logger logger get logger label l get name command input command label l input f l e n m e filename read training instance stdin + instance feature feature vector command output prefix command label l output prefix t r n g prefix output sampling etc + indicate write command input model filename command label l input model f l e n m e filename read binary topic model input ignore + indicate read command input filename command label l input f l e n m e filename read gzipp gibbs sampling create output + original input input + indicate read model output option command output model filename command label l output model f l e n m e filename write binary topic model iteration + indicate write command command label l output f l e n m e filename write gibbs sampling iteration + indicate write command output model interval command label l output model interval n t e g e r 0 iteration between model gibbs sampling binary + you also output model argument prefix filename command output interval command label l output interval n t e g e r 0 iteration between sampling + you also output argument prefix filename command inferenc filename command label l inferenc filename f l e n m e topic inferenc applie previously train topic model document + indicate write command evaluator filename command label l evaluator filename f l e n m e hold likelihood evaluator document + indicate write command topic key command label l output topic key f l e n m e filename write top word topic dirichlet + indicate write command num top word command label l num top word n t e g e r 20 most probable word print topic model estimation command show topic interval command label l show topic interval n t e g e r 50 iteration between printing brief summary topic far command topic word weight command label l topic word weight f l e n m e filename write unnormaliz weight topic word type + indicate write command word topic count command label l word topic count f l e n m e filename write sparse representation topic word assignment + indicate write command diagnostics command label l diagnostics f l e n m e filename write measure topic quality xml format + indicate write command topic report xml command label l xml topic report f l e n m e filename write top word topic dirichlet xml format + indicate write command topic phrase report xml command label l xml topic phrase report f l e n m e filename write top word phrase topic dirichlet xml format + indicate write command topic doc command label l output topic doc f l e n m e filename write most prominent document topic iteration + indicate write command num top doc command label l num top doc n t e g e r 100 topic document output topic doc + report top document command doc topic command label l output doc topic f l e n m e filename write topic proportion document iteration + indicate write command doc topic threshold command label l doc topic threshold e m l 0 0 topic proportion document output doc topic + print topic proportion les threshold value command doc topic max command label l doc topic max n t e g e r 1 topic proportion document output doc topic + print n t e g e r topic + negative value indicate topic print model command num iteration command label l num iteration n t e g e r 1000 iteration gibbs sampling command inference command label l inference true|false inference just load save model report equivalent num iteration 0 command random seed command label l random seed n t e g e r 0 random seed gibbs sampler 0 clock hyperparameter command alpha command label l alpha e m l 0 1 alpha parameter smooth over doc topic n o t sum over topic command beta command label l beta e m l 0 01 beta parameter smooth over word distribution training instance topic assignment topic assignment alphabet input alphabet alphabet alphabet store meaning label topic alphabet label alphabet alphabet topic label alphabet topic alphabet topic request num topic size vocabulary num type prior alpha dirichlet alpha alpha over topic beta prior topic multinomial over word beta sum e f u l t e t 0 01 put topic count current document initialize locally below define here garbage collection overhead doc topic count index document index topic index statistic sampling type topic count index feature index topic index topic index topic index num iteration 1000 show topic interval 50 word topic 10 random random print log likelihood label l alpha beta topic assignment alpha alpha beta beta random random logger info label l alphabet get alphabet alphabet label alphabet get topic alphabet topic alphabet topic assignment get topic interval n show topic interval interval word topic n random seed seed random random seed num iteration num iteration num iteration num iteration get type topic count type topic count get topic total topic add instance instance training alphabet training get alphabet num type alphabet size beta sum beta num type we topic possible label label alphabet training get target alphabet num topic label alphabet size doc topic count num topic topic num topic type topic count num type num topic topic alphabet alphabet factory label alphabet size num topic doc 0 instance instance training doc++ feature feature instance get feature vector label feature vector instance get target label topic label topic alphabet size topic topic get feature position 0 position size position++ topic label index location random next label num location topic position topic topic topic ++ type get index position position type topic count type topic ++ topic assignment t topic assignment instance topic add t initialize o line field buffer reader reader buffer reader input stream reader g z p input stream input stream line reader read line skip some line starting describe format specify hyperparameter line start line reader read line field line split topic assignment document feature feature document instance get feature topic feature document topic topic topic get feature position 0 position size position++ type get index position position type parse field 3 topic parse field 5 topic position topic difference between dense type topic representation here sparse parallel topic model type topic count type topic ++ err instance match + line illegal line reader read line line field line split estimate o iteration 1 iteration num iteration iteration++ iteration start current milli loop over document corpus doc 0 doc size doc++ feature feature get doc instance get feature vector label feature vector get doc instance get target label topic label get doc topic sample topic doc label topic elapse milli current milli iteration start logger info iteration + + elapse milli + m occasionally print information show topic interval 0 iteration % show topic interval 0 logger info + iteration + log likelihood + model log likelihood + + top word word topic sample topic doc feature feature vector label feature topic possible topic label get index num label label num location doc topic topic get feature current type topic count type old topic topic topic weight sum doc length get length local topic count num topic populate topic count position 0 position doc length position++ local topic count doc topic position ++ score sum topic term score num label iterate over position word document position 0 position doc length position++ type get index position position old topic doc topic position grab relevant row our two dimensional current type topic count type topic count type count local topic count old topic topic old topic topic old topic 0 old topic + old topic + below 0 current type topic count old topic now calculate add up score topic word sum 0 0 here math happen note overall dominate what you loop label position 0 label position num label label position++ topic possible topic label position score alpha + local topic count topic beta + current type topic count topic beta sum + topic topic sum + score topic term score label position score random point between 0 sum topic score sample random next uniform sum figure topic contain point label position 1 sample 0 0 label position++ sample topic term score label position sure we actually sample topic label position 1 illegal label l topic sample topic possible topic label position put topic into count doc topic position topic local topic count topic ++ topic topic ++ current type topic count topic ++ model log likelihood log likelihood 0 0 zero topic likelihood model dirichlet multinomial word topic dirichlet multinomial topic document likelihood function dirichlet multinomial gamma sum alpha prod gamma alpha + n prod gamma alpha gamma sum alpha + n log likelihood log gamma sum alpha log gamma sum alpha + n + sum log gamma alpha + n log gamma alpha document first topic count num topic topic log gamma num topic doc topic topic 0 topic num topic topic++ topic log gamma topic dirichlet log gamma alpha doc 0 doc size doc++ label topic label get doc topic feature vector label feature vector get doc instance get target doc topic topic get feature 0 doc topic length token++ topic count doc topic ++ topic 0 topic num topic topic++ topic count topic 0 log likelihood + dirichlet log gamma alpha + topic count topic topic log gamma topic add parameter sum term log likelihood + dirichlet log gamma alpha label num location subtract count + parameter sum term log likelihood dirichlet log gamma alpha label num location + doc topic length fill topic count 0 topic count type topic pair zero type topic 0 type 0 type num type type++ reuse pointer topic count type topic count type topic 0 topic num topic topic++ topic count topic 0 zero type topics++ log likelihood + dirichlet log gamma beta + topic count topic na n log likelihood topic count topic exit 1 topic 0 topic num topic topic++ log likelihood dirichlet log gamma beta num topic + topic topic na n log likelihood topic + topic + + topic topic exit 1 log likelihood + dirichlet log gamma beta num topic dirichlet log gamma beta zero type topic na n log likelihood exit 1 log likelihood display saving result top word num word builder output builder sorter sort word sorter num type topic 0 topic num topic topic++ topic topic 0 type 0 type num type type++ sort word type sorter type type topic count type topic sort sort word output append topic + + label alphabet lookup topic + + topic topic + 0 num word i++ sort word get weight 0 output append alphabet lookup sort word get + output append output serialization serial u 1 u r r e n t e r l v e r o n 0 n u l l n t e g e r 1 write f output stream oo output stream output stream f oo write oo close o e err + f + + e label l read f label l topic model input stream ois input stream input stream f topic model label l ois read ois close topic model write output stream o write u r r e n t e r l v e r o n instance list write write alphabet write topic alphabet write num topic write alpha write beta write beta sum write show topic interval write word topic write random write print log likelihood write type topic count ti 0 ti num topic ti++ write topic ti read input stream o found feature length read topic assignment read alphabet alphabet read topic alphabet label alphabet read num topic read alpha read beta read beta sum read show topic interval read word topic read random random read print log likelihood read num doc size num type alphabet size type topic count read topic num topic ti 0 ti num topic ti++ topic ti read command summary label l sample association between word label command process label l label l label l input model filename value label l label l read input model filename value label l label l alpha value beta value random seed value 0 label l random seed random seed value input value instance training input value start db training instance iterator get instance input value substring 3 training instance load input value e logger warning unable restore instance + input value + + e exit 1 logger info load training size 0 training get 0 training get 0 get feature logger warning topic modeling currently support feature sequence keep importing exit 1 label l add instance training input filename value logger info initialize save label l initialize input filename value label l topic show topic interval value num top word value label l num iteration num iteration value inference value label l estimate topic key value print stream print stream topic key value print label l top word num top word value close output model filename value label l output stream oo output stream output stream output model filename value oo write label l oo close e logger warning couldn t write topic model filename + output model filename value t want directly inherit parallel topic model because two treat type topic count differently instead simulate standard parallel topic model copying over appropriate structure parallel topic model topic model parallel topic model label l topic alphabet label l alpha label l num topic label l beta topic model label l topic model alphabet label l alphabet topic model num type label l num type topic model beta sum label l beta sum topic model build type topic count diagnostics value print writer print writer diagnostics value topic model diagnostics diagnostics topic model diagnostics topic model num top word value diagnostics xml close topic report xml value print writer print writer topic report xml value topic model topic xml report num top word value close topic phrase report xml value print writer print writer topic phrase report xml value topic model topic phrase xml report num top word value close value output interval value 0 topic model print value topic doc value print writer print writer writer topic doc value topic model print topic document num top doc value close doc topic value print writer print writer writer doc topic value doc topic threshold value 0 0 topic model print dense document topic topic model print document topic doc topic threshold value doc topic max value close topic word weight value topic model print topic word weight topic word weight value word topic count value topic model print type topic count word topic count value inferenc filename value output stream oo output stream output stream inferenc filename value oo write topic model get inferenc oo close e logger warning couldn t inferenc + e get message evaluator filename value output stream oo output stream output stream evaluator filename value oo write topic model get prob estimator oo close e logger warning couldn t evaluator + e get message 