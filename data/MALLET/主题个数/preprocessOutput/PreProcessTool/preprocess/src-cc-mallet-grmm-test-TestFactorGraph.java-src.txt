2006 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e test junit framework test junit framework test junit framework test suite io buffer reader io reader io o hash iterator inference random graph type model reader type matrix ops random timing create mar 17 2005 h r e f $ test factor graph v 1 1 2007 10 22 21 37 40 $ test factor graph test variable var table factor tbl1 table factor tbl2 table factor tbl3 log table factor ltbl1 log table factor ltbl2 test factor graph name name up var variable variable 2 variable 2 variable 2 variable 2 tbl1 table factor variable var 0 var 1 0 8 0 1 0 1 0 8 tbl2 table factor variable var 1 var 2 0 2 0 7 0 8 0 2 tbl3 table factor variable var 2 var 3 0 2 0 4 0 6 0 4 ltbl1 log table factor value variable var 0 var 1 0 8 0 1 0 1 0 8 ltbl2 log table factor value variable var 1 var 2 0 2 0 7 0 8 0 2 test multiply factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 equal 2 fg factor size fg factor contain tbl1 fg factor contain tbl2 equal 3 fg num variable fg variable contain var 0 fg variable contain var 1 fg variable contain var 2 test num variable factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 equal 3 fg num variable test multiply factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 factor graph fg2 factor graph fg multiply tbl3 equal 2 fg factor size equal 3 fg2 factor size fg factor contain tbl3 fg2 factor contain tbl3 test value factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 assignment assn assignment fg var variable 0 1 0 equal 0 08 fg value assn 1e 5 test marginalize factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 factor marg fg marginalize var 1 factor expect table factor var 1 0 81 0 9 expect almost equal marg test sum factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 equal 1 71 fg sum 1e 5 test normalize factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 fg normalize equal 1 0 fg sum 1e 5 test log normalize factor graph fg factor graph fg multiply ltbl1 fg multiply ltbl2 fg normalize equal 1 0 fg sum 1e 5 test embed factor graph factor graph embed fg factor graph embed fg multiply tbl1 embed fg multiply tbl2 factor graph fg factor graph fg multiply embed fg fg multiply tbl3 equal 4 fg var size equal 2 fg factor size assignment assn assignment fg var variable 4 equal 0 032 fg value assn 1e 5 table factor tbl fg table equal 4 tbl var size equal 0 032 tbl value assn 1e 5 test table factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 table factor fg table table factor expect table factor tbl1 multiply tbl2 expect almost equal test table time fg factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 factor tbl3 multiply fg table factor equal 4 var size assignment assn assignment var variable 4 equal 0 032 value assn 1e 5 test log table time fg factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 factor ltbl1 multiply fg table factor equal 3 var size assignment assn assignment var variable 3 equal 0 128 value assn 1e 5 test factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 equal 2 fg get degree var 1 fg divide tbl1 equal 2 fg var size assignment assn assignment fg var variable 2 equal 0 2 fg value assn 1e 5 nv 0 iterator fg var iterator next next nvs++ equal 1 nv equal 1 fg get degree var 1 fg get 0 fg get 1 equal var 1 fg get 0 equal var 2 fg get 1 test redundant domain factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 fg multiply ltbl1 equal 3 fg var size equal wrong factor f g +fg dump 3 fg factor size assignment assn assignment fg var variable 3 equal 0 128 fg value assn 1e 5 uniform mdlstr v r sigma u1 u2 continuou + v r x1 x2 2 + sigma uniform 0 5 0 5 + u1 uniform 0 5 0 5 + u2 uniform 0 5 0 5 + x1 x2 binary pair sigma + x1 unary u1 + x2 unary u2 test continou sample o model reader reader model reader factor graph fg reader read model buffer reader reader uniform mdlstr random r random 324143 assignment assn assignment 0 10000 i++ assignment row fg sample r assn add row row variable x1 fg find variable x1 assignment assn1 assignment assn marginalize x1 col assn1 get column x1 matrix ops sum col col length equal 0 5 0 025 uniform mdlstr2 v r sigma u1 u2 continuou + v r x1 x2 2 + sigma normal 0 0 0 2 + u1 normal 0 0 0 2 + u2 normal 0 0 0 2 + x1 x2 binary pair sigma + x1 unary u1 + x2 unary u2 test continou sample2 o model reader reader model reader factor graph fg reader read model buffer reader reader uniform mdlstr2 random r random 324143 assignment assn assignment 0 10000 i++ assignment row fg sample r assn add row row variable x1 fg find variable x2 assignment assn1 assignment assn marginalize x1 col assn1 get column x1 matrix ops sum col col length equal 0 5 0 01 variable x2 fg find variable x2 assignment assn2 assignment assn marginalize x2 col2 assn2 get column x2 mean2 matrix ops sum col2 col2 length equal 0 5 mean2 0 025 test factor o model reader reader model reader factor graph fg reader read model buffer reader reader uniform mdlstr2 variable var variable 2 var label v0 lst fg factor var equal 0 lst size test factor of2 o variable x1 variable 2 variable x2 variable 2 factor graph fg factor graph fg add factor table factor x1 fg add factor table factor x2 fg add factor table factor variable x1 x2 lst fg factor x1 equal 1 lst size iterator lst iterator next factor f factor next equal 1 f var size f var contain x1 hash var v hash var variable x1 x2 lst2 fg factor v equal 1 lst2 size factor f factor lst2 get 0 f var equal v test table2 factor f1 table factor var 0 0 6 0 4 factor f2 constant factor 2 0 factor graph fg factor graph factor f1 f2 table factor tbl fg table equal 0 6 2 0 0 4 2 0 tbl value test clear factor graph fg factor graph fg multiply tbl1 fg multiply tbl2 equal 3 fg num variable equal 2 fg factor size fg clear equal 0 fg num variable equal 0 fg factor size vi 0 vi tbl1 var size vi++ fg contain var tbl1 get variable vi vi 0 vi tbl2 var size vi++ fg contain var tbl2 get variable vi test cache expand factor graph base fg random graph random frustrate grid 25 1 0 random 3324879 assignment assn assignment base fg base fg num variable val base fg log value assn timing timing timing num rep 100 rep 0 rep num rep rep++ factor graph fg factor graph base fg num variable fi 0 fi base fg factor size fi++ fg multiply base fg get factor fi equal val fg log value assn 1e 5 time1 timing elapse timing tick expansion rep 0 rep num rep rep++ factor graph fg factor graph fi 0 fi base fg factor size fi++ fg multiply base fg get factor fi equal val fg log value assn 1e 5 time2 timing elapse timing tick expansion time1 time2 test suite test suite test factor graph throwable test suite suite length 0 suite test suite 0 length i++ suite add test test factor graph suite test suite test factor graph suite junit textui test runner run suite 