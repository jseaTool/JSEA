2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e classify constraint pr gnu trove t gnu trove t gnu trove t hash map bit type feature vector type instance type instance expectation constraint posterior regularization p r gregory druck max ent f l p r constraint max ent p r constraint value num feature num label map between input feature index constraint t hash map max ent f l p r constraint constraint cache constrain feature fire last feature vector preproces call t index cache t value cache max ent f l p r constraint num feature num label value value value num feature num feature num label num label constraint t hash map max ent f l p r constraint index cache t value cache t add constraint fi ex weight increment expectation feature vector input dist weight pre process input 0 num label li++ p weight dist 0 index cache size i++ value constraint get index cache get quick expectation + p value cache get quick constraint get index cache get quick expectation + p zero expectation fi constraint key constraint get fi expectation num label bit pre process instance count 0 fi feature vector fv bit bit bit size instance instance weight get instance weight instance fv feature vector instance get loc 0 loc fv num location loc++ fi fv index location loc constraint contain key fi value constraint get fi count + weight fv value location loc constraint get fi count + weight bit ii++ feature label regularization constraint contain key num feature bit constraint get num feature count + weight bit pre process feature vector input index cache reset quick value value cache reset quick fi cache constrain input feature loc 0 loc input num location loc++ fi input index location loc constraint contain key fi index cache add fi value value cache add input value location loc feature label regularization constraint contain key num feature index cache add num feature value value cache add 1 max ent f l p r constraint count weight target expectation max ent f l p r constraint target weight count 0 weight weight target target expectation get target target get expectation expectation get count count get weight weight 