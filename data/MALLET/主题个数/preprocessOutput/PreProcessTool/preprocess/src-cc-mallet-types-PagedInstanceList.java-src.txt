2002 univ dept part m l l e t m achine learning languag e toolkit 1 0 furtherinformation see ` l e n e type io io input stream io output stream io o io input stream io output stream rmi dgc v m bit map pipe noop pipe pipe type feature vector type instance type instance type label type label alphabet type matrix ops instance avoid memory saving instance disk there enough memory instance fix size paging scheme page disk store instance page instance instance page constant size page vary instead instance instance you can store essentially disk size patience paging scheme optimize most frequent looping instance index 0 n there n instance instance 0 n size store together page 1 instance n size +1 2 n size page 2 etc page adjacent instance usually same page see instance aron culotta culotta culotta page instance instance t y p e f e t u r e v e t o r f t y p e l e l l t y p e o j e t o instance put page instance page directory store swap swap dir page number represent memory page memory page instance list represent memory page instance memory page dirty get memory bin dirty bit dirty bit total instance swap size 0 recommend garbage collection swap out? collect garbage total swap in swap in 0 total spend swap in swap 0 total swap out swap out 0 total spend swap in swap 0 uniquely identifie instance create serialize page name swap v m v m avoid create noop pipe page pipe noop pipe o n t r u t o r create page instance instance page instance swap disk directory swap dir amount memory drop below min memory pipe instance pipe num page page keep memory instance page instance store page swap dir page disk live page instance pipe pipe num page instance page swap dir pipe num page instance page instance page instance page swap dir swap dir memory page num page memory page instance num page noop pipe noop pipe get alphabet pipe get target alphabet 0 num page i++ memory page 1 swap dir swap dir mkdir security e err permission directory + swap dir exit 1 page instance pipe pipe num page instance page pipe num page instance page p l t t n g n m p l n g m e t h o shuffle element take collection shuffle r randomness shuffling shuffle shuffle random r size length shuffle size 1 0 swap r next + 1 tmp swap swap tmp shuffle element among several small list instance split add instance original prevent thrashing proportion number sum 1 normalize correspond proportion element sublist r randomness shuffling instance element proportion instance split random r proportion instance ret instance proportion length maxind proportion clone size size shuffle size split size build shuffle instance index 0 size i++ shuffle shuffle r shuffle matrix ops normalize maxind 0 maxind length i++ ret clone empty note we passing feature selection here 0 maxind + maxind 1 0 maxind length i++ fill maxind high instance index go correspond instance maxind math rint maxind size 0 j 0 size i++ give slight bias toward putting extra instance last instance maxind j j ret length j++ split shuffle j 0 size i++ logger info add instance + + split ilist + split ret split add get ret p g n g m e t h o get swap specify page page page get swap swap get page page swap dir + + page get page specify instance index swap index instance index get page dirty mark page dirty page specify instance index instance get page index index dirty index size index bound index + index + size + size swap index instance page dirty swap specify page page page swap dirty mark page dirty page just swap instance swap page dirty bin page % memory page length memory page bin page swap memory page bin start current milli page get page page input stream input stream input stream page instance page deserialize page memory page bin page memory page bin page e err e exit 1 close e err e exit 1 swap ins++ swap + current milli start dirty dirty bin memory page bin swap page specify bin dirty page page swap swap page bin page % memory page length page 1 dirty get bin start current milli page get page page output stream output stream output stream page instance page memory page bin memory page bin 1 memory page bin serialize page page dirty bin e err e exit 1 close e err e exit 1 collect garbage gc swap outs++ swap + current milli start e o r append instance note since memory instance already be allocate check memory succesful add instance instance instance page size % instance page 0 start page swap page spot page size instance page bin page % memory page length swap memory page bin page instance noop pipe memory page bin page memory page bin page page get page index size ret page add instance ret size++ ret instance specify index instance memory swap block instance back into memory instance get index instance page get page index index page get index % instance page replace instance position index note sanction change instance instance index instance instance instance page get page index index page index % instance page instance get collect garbage collect garbage collect garbage collect garbage instance shallow clone instance ret clone empty 0 size i++ ret add get ret instance clone empty clone empty into page instance pipe memory page length instance page swap dir clear num page size instance page 0 num page i++ get page delete 0 memory page length i++ memory page memory page 1 size 0 swap in 0 swap 0 swap out 0 swap 0 dirty clear clear get swap in swap in get swap swap get swap out swap out get swap swap size size serializ single metadata o serialize output stream obj o obj feature vector feature vector feature feature vector obj write t y p e f e t u r e v e t o r write feature get index write feature get value obj label write t y p e l e l write label obj write t y p e o j e t write obj serialize page metadata attempt serialize amount restore page leaving redundant pipe dictionary output stream page o serialize page output stream instance page o write page size instance inst page serialize inst get serialize inst get target write inst get name write inst get inst weight weight inst weight get inst weight write inst weight get inst write 1 0 write 1 0 deserialize serialize link serialize output stream o found deserialize input stream o found type read obj type t y p e l e l label alphabet ldict label alphabet get target alphabet name read obj ldict lookup label name t y p e f e t u r e v e t o r index read value read obj feature vector get alphabet index value t y p e o j e t obj read o unknown type + type obj deserialize page restore page serialize link serialize page output stream instance input stream page o found instance deserialize page input stream o found instance page instance noop pipe size read 0 size i++ deserialize target deserialize name read read weight read page add instance target name weight page construct instance deserializ value deserialize link instance load input stream ois equal ois input stream ois input stream input stream page instance ilist page instance ois read ois close ilist e e print stack trace illegal argument couldn t read page instance +file serialization page instance serial u 1 u r r e n t e r l v e r o n 1 write output stream o write u r r e n t e r l v e r o n write write pipe memory attribute write instance page write swap dir write memory page write dirty 0 memory page length i++ serialize page memory page read input stream o found v m read pipe pipe read memory attribute instance page read swap dir read memory page read dirty bit read memory page instance memory page length 0 memory page length i++ memory page deserialize page 