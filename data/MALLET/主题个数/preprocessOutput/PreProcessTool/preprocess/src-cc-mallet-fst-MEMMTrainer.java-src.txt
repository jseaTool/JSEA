bit logging logger type feature type feature vector type feature vector type instance type instance m e m m m e m m transition iterator optimize memory f g optimize optimizable optimize optimiz logger train evaluate link m e m m m e m m trainer transducer trainer logger logger logger get logger m e m m trainer get name m e m m memm gathering training training set be gather record instance we ve gather we t count instance instance training gather gsc user suppose weight manually flag sparse weight m e m m optimizable label likelihood omemm m e m m trainer m e m m memm memm memm m e m m optimizable label likelihood get optimizable m e m m instance training m e m m optimizable label likelihood memm training m e m m trainer sparse weight f sparse weight f train m e m m until convergence train instance training train training m v l u e train m e m m specify iteration until convergence whichev occur first training converge specify iteration train instance training num iteration num iteration 0 training size 0 allocate space place transition feature vector instance list here gathering training set these instance being create feature vector outgo transition them instance training gather training gather training set training gsc user weight manually sparse weight memm weight dimension training memm weight dimension densely expectation placement training go here 0 training size i++ instance instance training get feature vector input feature vector instance get feature output feature instance get target path consistent label gathering constraint sum lattice input output also path select current model we get some negative weight gathering constraint some training once some training sum lattice input gathering weight present sparse vector weight sparse vector weight length 0 weight length i++ num location weight present cardinality logger info r f weight +weight alphabet lookup + num feature +num location index num location j 0 j num location j++ index j weight present next bit j 0 ? 0 index j 1 +1 r f4 index +indice j weight index sparse vector index num location num location num location weight plus equal sparse weight weight weight omemm m e m m optimizable label likelihood memm training gather constraint omemm gather expectation constraint optimiz maximiz memory f g omemm training converge logger info r f about train +num iterations+ iteration 0 num iteration i++ converge maximiz optimize 1 logger info r f finish iteration maximiz +i run evaluator illegal argument e e print stack trace logger info catching saying converge converge converge logger info r f training converge +i logger info about trainable converge gather training set instance training training gather easy enough support just go training unsupport operation training multiple set support training gather training 0 training size i++ instance instance training get feature vector input feature vector instance get feature output feature instance get target path consistent label sum lattice memm input output transducer incrementor increment transducer count increment transducer count increment transition transducer transition iterator ti count m e m m m e m m ti get count 0 training doesn t yet training instance pipe because doesn t processing input training instance t o o we sure we t add duplicate second call weight dimenstion t o o note training still ambiguou outgo transition add same f v once training 1 0 weight incorrect inefficient +source get name + +get output + +get input training add instance ti get input ti get output count yet unsupport operation train instance training instance validation instance testing transducer evaluator eval num iteration num iteration proportion training proportion unsupport operation yet unsupport operation train feature induction instance training instance validation instance testing transducer evaluator eval num iteration num iteration between feature induction num feature induction num feature feature induction label prob threshold cluster feature induction training proportion gain name unsupport operation print instance list 0 memm num i++ memm get instance training training +i+ +state get name training j 0 j training size j++ instance inst training get j +state get name + +inst get target instance +j inst get target inst get objective function p weight train match expectation model observation gather suppres warning serial m e m m optimizable label likelihood r f optimizable label likelihood optimizable gradient value bit infinite value m e m m optimizable label likelihood m e m m memm instance training memm training expectation r f factor memm constraint r f factor memm constraint log probability training label gather expectation constraint gather constraint instance value nev total value we can t just sometime skip value because infinite off total value initialize infinite value r f factor factor gather constraint ? constraint expectation r f factor incrementor factor incrementor factor incrementor infinite value infinite value bit initialize infinite value label log prob 0 0 memm num i++ m e m m memm get training empty training + name j 0 j training size j++ instance instance training get j inst weight training get instance weight j feature vector fv feature vector instance get label instance get target transition iterator it transition iterator fv gather constraints?label memm it next gsc it next advance iterator destination m e m m it next just advance iterator weight it get weight factor incrementor increment transition it math weight inst weight it increment count math weight inst weight gather constraint it get output label infinite weight label log prob + inst weight weight xxx ????? logger warning +i+ transition +j+ infinite cost skip initialize infinite value illegal infinite cost transition yet support infinite value j infinite value get j illegal instance infinite value + now infinite value force weight 0 making sure factor refer expectation constraint they same value 0 memm num i++ factor weight 0 0 factor weight 0 0 label log prob log probability training label fill expectation get expectation value gather expectation constraint override get iteration t o o auto generate stub 0 override transducer get transducer memm override finish training t o o auto generate stub 