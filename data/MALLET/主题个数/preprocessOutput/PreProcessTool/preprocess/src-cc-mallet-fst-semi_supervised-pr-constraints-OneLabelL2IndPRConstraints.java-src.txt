2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e semi supervise pr constraint gnu trove t gnu trove t hash map bit hash map semi supervise label map type feature vector type feature vector type instance type instance constraint individual input feature label pair p r penaliz l 2^2 difference target expectation multiple constraint group together here thing efficient gregory druck label l2 ind p r constraint p r constraint normalize num dimension map between input feature index constraint t hash map label l2 ind p r constraint constraint label map map cache constrain feature fire last feature vector preproces call t cache label l2 ind p r constraint normalize normalize normalize num dimension 0 constraint t hash map label l2 ind p r constraint p r trainer map cache t label l2 ind p r constraint t hash map label l2 ind p r constraint constraint label map map normalize normalize normalize num dimension 0 constraint constraint t hash map label l2 ind p r constraint key constraint key constraint put key constraint get key num dimension + constraint get key get num constrain label map map cache t p r constraint label l2 ind p r constraint constraint map normalize add constraint fi target weight constraint contain key fi constraint put fi label l2 ind p r constraint constraint get fi add target weight num dimension num dimensions++ num dimension num dimension label map label map map map map pre process feature vector fv cache reset quick fi cache constrain input feature loc 0 loc fv num location loc++ fi fv index location loc constraint contain key fi cache add fi find example contain constrain input feature bit pre process instance count 0 fi feature vector fv bit bit bit size instance instance feature vector fv feature vector instance get ip 0 ip fv size ip++ fv fv get ip loc 0 loc fv num location loc++ fi fv index location loc constraint contain key fi constraint get fi count + 1 bit ii++ bit get score feature vector input input position src index d index dot 0 li2 map get label index d index 0 cache size i++ fi cache get quick label l2 ind p r constraint constraint constraint get fi dot + constraint get score li2 dot increment expectation feature vector input input position src index d index prob li2 map get label index d index 0 cache size i++ constraint get cache get quick increment expectation li2 prob get expectation expectation expectation length num dimension expectation length + + num dimension fi constraint key constraint get fi get expectation expectation add expectation expectation expectation length num dimension fi constraint key constraint get fi add expectation expectation zero expectation fi constraint key constraint get fi zero expectation get auxiliary value value 0 fi constraint key label l2 ind p r constraint constraint constraint get fi value + constraint get projection value contrib value get complete value value 0 fi constraint key label l2 ind p r constraint constraint constraint get fi value + constraint get complete value contrib value get gradient gradient fi constraint key label l2 ind p r constraint constraint constraint get fi constraint get gradient gradient label l2 ind p r constraint index count label index target weight hash map label map expectation label l2 ind p r constraint index 0 count 0 label index target weight label map hash map label l2 ind p r constraint label l2 ind p r constraint label l2 ind p r constraint index index count count label label index index target target weight weight label map label map increment expectation index add label target weight index target add target weight add weight label add label index add index label map put label index index++ zero expectation expectation label size get expectation expectation 0 index size i++ expectation index get expectation add expectation expectation 0 index size i++ expectation + expectation index get increment expectation value label map contain key label map get expectation + value get score label map contain key label map get normalize index get count index get 0 get projection value contrib value 0 0 index size i++ index get value + target get 2 weight get value get complete value contrib value 0 0 index size i++ normalize value + weight get math pow target get expectation count 2 2 value + weight get math pow target get expectation 2 2 value get gradient gradient 0 index size i++ pi index get normalize gradient pi + target get expectation count pi weight get gradient pi + target get expectation pi weight get get num constrain label index 