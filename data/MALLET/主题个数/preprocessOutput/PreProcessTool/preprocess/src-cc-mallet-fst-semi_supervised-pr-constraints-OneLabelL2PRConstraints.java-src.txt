2011 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e semi supervise pr constraint gnu trove t gnu trove t hash map gnu trove t hash map bit semi supervise label map type feature vector type feature vector type instance type instance constraint distribution over single label condition presence input feature p r penaliz l 2^2 difference target expectation multiple constraint group together here thing efficient gregory druck label l2 p r constraint p r constraint map between input feature index constraint t hash map label p r constraint constraint map between input feature index constraint index t hash map constraint index label map map normalize cache constrain feature fire last feature vector preproces call t cache label l2 p r constraint normalize constraint t hash map label p r constraint constraint index t hash map cache t normalize normalize label l2 p r constraint t hash map label p r constraint constraint t hash map constraint index label map map normalize constraint t hash map label p r constraint key constraint key constraint put key constraint get key constraint constraint constraint index constraint index map map cache t normalize normalize p r constraint label l2 p r constraint constraint constraint index map normalize add constraint fi target weight constraint put fi label p r constraint target weight constraint index put fi constraint index size num dimension map map get num label constraint size constraint label map label map map map map pre process feature vector fv cache reset quick fi cache constrain input feature loc 0 loc fv num location loc++ fi fv index location loc constraint contain key fi cache add fi find example contain constrain input feature bit pre process instance count 0 fi feature vector fv bit bit bit size instance instance feature vector fv feature vector instance get ip 0 ip fv size ip++ fv fv get ip loc 0 loc fv num location loc++ fi fv index location loc constraint contain key fi constraint get fi count + 1 bit ii++ bit get score feature vector input input position src index d index dot 0 li2 map get label index d index 0 cache size i++ j constraint index get cache get quick t o o binary feature normalize dot + j + constraint size li2 constraint get cache get quick count dot + j + constraint size li2 dot increment expectation feature vector input input position src index d index prob li2 map get label index d index 0 cache size i++ constraint get cache get quick expectation li2 + prob get expectation expectation expectation length num dimension fi constraint index key ci constraint index get fi label p r constraint constraint constraint get fi 0 constraint expectation length li++ expectation ci + constraint size constraint expectation add expectation expectation expectation length num dimension fi constraint index key ci constraint index get fi label p r constraint constraint constraint get fi 0 constraint expectation length li++ constraint expectation + expectation ci + constraint size zero expectation fi constraint key constraint get fi expectation map get num label get auxiliary value value 0 fi constraint key ci constraint index get fi 0 map get num label li++ ci + constraint size value + constraint get fi target 2 constraint get fi weight value t o o get complete value value 0 fi constraint key label p r constraint constraint constraint get fi 0 map get num label li++ normalize value + constraint weight math pow constraint target constraint expectation constraint count 2 2 value + constraint weight math pow constraint target constraint expectation 2 2 value get gradient gradient fi constraint key ci constraint index get fi label p r constraint constraint constraint get fi 0 map get num label li++ normalize gradient ci + constraint size constraint target constraint expectation constraint count ci + constraint size constraint weight gradient ci + constraint size constraint target constraint expectation ci + constraint size constraint weight label p r constraint target expectation count weight label p r constraint target weight target target weight weight expectation count 0 label p r constraint label p r constraint label p r constraint target weight count count expectation target length 