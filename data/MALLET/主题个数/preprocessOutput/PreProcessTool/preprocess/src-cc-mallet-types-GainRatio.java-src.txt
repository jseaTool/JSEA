2002 univ dept part m l l e t m achine learning languag e toolkit 1 0 information see ` l e n e type awt geom point2 collection comparator hashtable iterator logging logger logger math feature along threshold sort descend ratio 1 information gain split instance feature threshold value 2 split information p calculation perform take into consideration instance weight p instance gain ratio instance p tt instance ilist gain ratio gr gain ratio gain ratio ilist tt p j r quinlan improve continuou attribute c4 5 ftp ftp cmu project jair volume4 quinlan96a p gary huang ghuang ghuang gain ratio rank feature vector logger logger logger get logger gain ratio get name serial u 1 l log2 math log 2 m split point m base entropy label vector m base label m num split point best feature m min num inst calculate gain ratio feature split point pair snd pre 1 gain ratio element max gain ratio feature split point least average gain 2 optimal split point feature 3 overall entropy 4 overall label instance 5 split point split feature pre calc gain ratio instance ilist inst index min num inst num inst inst index length alphabet dict ilist get alphabet label alphabet target dict label alphabet ilist get target alphabet target count target dict size accumulate target label count sure sum instance target label 1 0 num inst ii++ instance inst ilist get inst index label label inst get label label weight sum 0 ll 0 ll label num location ll++ label index location ll label weight label value location ll label weight sum + label weight target count + label weight math almost equal label weight sum 1 calculate base entropy info label instance target target dict size base entropy 0 ci 0 ci target dict size ci++ p target count ci num inst target ci p p 0 base entropy p math log p log2 label vector base label label vector target dict target info gain sum 0 total num split point 0 pas test target count target dict size map feature index hashtable table map split point info gain split ratio hashtable feature info hashtable dict size go feature split point ascending fi 0 fi dict size fi++ fi+1 % 1000 0 logger info feature + fi+1 + + dict size feature info fi hashtable fill pas test target count 0 sort instance feature value inst index sort instance ilist inst index fi iterate sort instance 0 num inst 1 ii++ instance inst ilist get inst index instance inst plus ilist get inst index ii+1 feature vector fv1 feature vector inst get feature vector fv2 feature vector inst plus get lower fv1 value fi high fv2 value fi accumulate label weight instance passing test label label inst get label ll 0 ll label num location ll++ label index location ll label weight label value location ll pas test target count + label weight math almost equal lower high || inst get label equal inst plus get label feature spill point pair calculate info gain pair split inst into value feature p versu p total num split points++ split point lower + high 2 num pas inst ii+1 split point create partition too few instance ignore num fail inst num inst num pas inst num pas inst min num inst || num fail inst min num inst instance pas fail test useles pas proportion num pas inst num inst math almost equal pas proportion 0 || math almost equal pas proportion 1 calculate entropy instance passing failing test pas entropy 0 fail entropy 0 p ci 0 ci target dict size ci++ num pas inst 0 p pas test target count ci num pas inst p 0 pas entropy p math log p log2 num fail inst 0 fail test target count target count ci pas test target count ci p fail test target count num fail inst p 0 fail entropy p math log p log2 calculate gain t information gain testing feature split point pair gain t base entropy pas proportion pas entropy 1 pas proportion fail entropy info gain sum + gain t calculate split t split information split t pas proportion math log pas proportion log2 1 pas proportion math log 1 pas proportion log2 calculate gain ratio gain ratio gain t split t feature info fi put split point point2 gain t gain ratio loop sort instance loop feature feature split point least average gain get maximum gain ratio split point info gain tie breaker gain ratio dict size split point dict size num split best feature 0 feature vector identical split worthy 0 total num split point 0 || math almost equal info gain sum 0 gain ratio split point base entropy base label num split best feature avg info gain info gain sum total num split point max gain ratio 0 gain max gain ratio 0 tie breaker xxx 0 fi 0 fi dict size fi++ feature max gain ratio 0 feature gain max gain ratio 0 best split point na n iterator it feature info fi key iterator it next key it next point2 pt point2 feature info fi get key split point key value info gain pt get gain ratio pt get y info gain avg info gain gain ratio feature max gain ratio || gain ratio feature max gain ratio info gain feature gain max gain ratio feature max gain ratio gain ratio feature gain max gain ratio info gain best split point split point xxx++ best split point na n gain ratio fi feature max gain ratio split point fi best split point feature max gain ratio max gain ratio || feature max gain ratio max gain ratio feature gain max gain ratio gain max gain ratio max gain ratio feature max gain ratio gain max gain ratio feature gain max gain ratio num split best feature feature info fi size logger info label distrib + base label logger info base entropy + base entropy + info gain sum + info gain sum + total num split point + total num split point + avg info gain + avg info gain + num split avg gain + xxx gain ratio split point base entropy base label num split best feature sort instance instance ilist inst index feature index 0 inst index length ii++ instance inst ilist get inst index feature vector fv feature vector inst get add point2 inst index fv value feature index collection sort comparator compare o1 o2 point2 p1 point2 o1 point2 p2 point2 o2 p1 y p2 y p1 p2 p1 p2 ? 1 1 p1 y p2 y ? 1 1 sort inst index length 0 size i++ sort point2 get get sort construct gain ratio gain ratio gain ratio instance ilist inst index ilist size 0 inst index length ii++ inst index gain ratio ilist inst index 2 construct gain ratio gain ratio gain ratio instance ilist inst index min num inst obj calc gain ratio ilist inst index min num inst gain ratio obj 0 split point obj 1 base entropy obj 2 value label vector base label label vector obj 3 num split point best feature obj 4 value gain ratio ilist get alphabet gain ratio split point base entropy base label num split point best feature min num inst gain ratio alphabet alphabet gain ratio split point base entropy label vector base label num split point best feature min num inst alphabet gain ratio m split point split point m base entropy base entropy m base label base label m num split point best feature num split point best feature m min num inst min num inst threshold feature threshold pair maximum gain ratio get max value threshold get threshold rank 0 threshold feature threshold pair rank get threshold rank rank index get index rank rank m split point index get base entropy m base entropy label vector get base label m base label get num split point best feature m num split point best feature 