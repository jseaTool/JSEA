topic optimize memory f g optimize optimization type classify max ent pipe pipe pipe noop gnu trove t hash map io o io print stream io m r topic model l hyp max ent dmr num feature feature index pipe parameter pipe alpha cache alpha sum cache m r topic model topic topic estimate iteration round o num feature get 0 instance get target alphabet size + 1 feature index num feature 1 num doc size t o o consider beginning sub sampling? alpha cache num doc num topic alpha sum cache num doc start current milli max iteration iteration far + iteration round iteration far max iteration iteration far++ iteration start current milli show topic interval 0 iteration far 0 iteration far % show topic interval 0 print top word word topic save interval 0 iteration far % save interval 0 print filename + + iteration far + gz iteration far burnin optimize interval 0 iteration far % optimize interval 0 train regression learn loop over document corpus doc 0 doc num doc doc++ feature feature get doc instance get label topic label get doc topic dmr appropriate alpha alpha get doc instance sample topic doc topic m current milli iteration start m 1000 print math round m 1000 + print m + m iteration far % 10 0 + iteration far + print log likelihood model log likelihood flush second math round current milli start 1000 0 minute second 60 second % 60 hour minute 60 minute % 60 day hour 24 hour % 24 print total day 0 print day print day hour 0 print hour print hour minute 0 print minute print minute print second second feature topic prior document feature alpha dmr get alpha sum 0 0 smooth mass 0 0 feature topic prior document feature topic 0 topic num topic topic++ alpha topic math topic num feature + feature index alpha sum + alpha topic smooth mass + alpha topic beta topic topic + beta sum cache coefficient topic alpha topic topic topic + beta sum set alpha hypothetical document contain single feature alpha feature index dmr get alpha sum 0 0 smooth mass 0 0 feature topic prior document feature topic 0 topic num topic topic++ alpha topic math topic num feature + feature index + topic num feature + feature index alpha sum + alpha topic smooth mass + alpha topic beta topic topic + beta sum cache coefficient topic alpha topic topic topic + beta sum alpha feature instance alpha instance instance we can t standard score function max ent since our feature currently target feature vector feature feature vector instance get target feature alpha dmr get alpha sum 0 0 smooth mass 0 0 topic 0 topic num topic topic++ alpha topic topic num feature + feature index + matrix ops row dot num feature topic feature feature index alpha topic math alpha topic alpha sum + alpha topic smooth mass + alpha topic beta topic topic + beta sum cache coefficient topic alpha topic topic topic + beta sum learn fake pipe feature trove hashmap topic count target parameter pipe parameter pipe noop parameter pipe alphabet get 0 instance get target alphabet parameter pipe target alphabet topic alphabet instance parameter instance instance parameter pipe dmr dmr max ent parameter pipe num feature num topic doc 0 doc size doc++ get doc instance get target feature counter counter feature counter topic alphabet topic get doc topic get feature counter increment topic put real target topic count target parameter instance add instance get doc instance get target counter feature vector m r optimizable optimizable m r optimizable parameter instance dmr optimizable regular gaussian prior variance 0 5 optimizable intercept gaussian prior variance 100 0 memory f g optimiz memory f g optimizable optimize once optimiz optimize optimization e step size too small restart fresh initialization improve likelihood optimiz optimize optimization e step size too small dmr optimizable get classifier doc 0 doc size doc++ instance instance get doc instance feature feature instance get instance get target num get length set alpha alpha sum alpha instance now cache alpha value topic 0 topic num topic topic++ alpha cache doc topic alpha topic alpha sum cache doc alpha sum print top word print stream num word line dmr alpha print top word num word line write parameter o dmr print stream print stream parameter dmr print close serial u 1 u r r e n t e r l v e r o n 0 n u l l n t e g e r 1 o instance training instance load 0 num topic length 1 ? parse 1 200 instance testing length 2 ? instance load 2 m r topic model lda m r topic model num topic lda optimize interval 100 lda topic 100 10 lda add instance training lda estimate lda write dmr lda print dmr gz 